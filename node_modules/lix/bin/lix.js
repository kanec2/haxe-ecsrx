#!/usr/bin/env node
(()=>{var e={6732:function(e,t,r){(function(e){"use strict";var t={},$estr=function(){return js_Boot.__string_rec(this,"")},n=n||{},i;function $extend(e,t){var r=Object.create(e);for(var n in t)r[n]=t[n];if(t.toString!==Object.prototype.toString)r.toString=t.toString;return r}var s=n["Attribute"]={__ename__:"Attribute",__constructs__:["Off","Bold","Underline","Blink","ReverseVideo","Concealed","BoldOff","UnderlineOff","BlinkOff","NormalVideo","ConcealedOff","Black","Red","Green","Yellow","Blue","Magenta","Cyan","White","DefaultForeground","BlackBack","RedBack","GreenBack","YellowBack","BlueBack","MagentaBack","CyanBack","WhiteBack","DefaultBackground"],Off:{_hx_index:0,__enum__:"Attribute",toString:$estr},Bold:{_hx_index:1,__enum__:"Attribute",toString:$estr},Underline:{_hx_index:2,__enum__:"Attribute",toString:$estr},Blink:{_hx_index:3,__enum__:"Attribute",toString:$estr},ReverseVideo:{_hx_index:4,__enum__:"Attribute",toString:$estr},Concealed:{_hx_index:5,__enum__:"Attribute",toString:$estr},BoldOff:{_hx_index:6,__enum__:"Attribute",toString:$estr},UnderlineOff:{_hx_index:7,__enum__:"Attribute",toString:$estr},BlinkOff:{_hx_index:8,__enum__:"Attribute",toString:$estr},NormalVideo:{_hx_index:9,__enum__:"Attribute",toString:$estr},ConcealedOff:{_hx_index:10,__enum__:"Attribute",toString:$estr},Black:{_hx_index:11,__enum__:"Attribute",toString:$estr},Red:{_hx_index:12,__enum__:"Attribute",toString:$estr},Green:{_hx_index:13,__enum__:"Attribute",toString:$estr},Yellow:{_hx_index:14,__enum__:"Attribute",toString:$estr},Blue:{_hx_index:15,__enum__:"Attribute",toString:$estr},Magenta:{_hx_index:16,__enum__:"Attribute",toString:$estr},Cyan:{_hx_index:17,__enum__:"Attribute",toString:$estr},White:{_hx_index:18,__enum__:"Attribute",toString:$estr},DefaultForeground:{_hx_index:19,__enum__:"Attribute",toString:$estr},BlackBack:{_hx_index:20,__enum__:"Attribute",toString:$estr},RedBack:{_hx_index:21,__enum__:"Attribute",toString:$estr},GreenBack:{_hx_index:22,__enum__:"Attribute",toString:$estr},YellowBack:{_hx_index:23,__enum__:"Attribute",toString:$estr},BlueBack:{_hx_index:24,__enum__:"Attribute",toString:$estr},MagentaBack:{_hx_index:25,__enum__:"Attribute",toString:$estr},CyanBack:{_hx_index:26,__enum__:"Attribute",toString:$estr},WhiteBack:{_hx_index:27,__enum__:"Attribute",toString:$estr},DefaultBackground:{_hx_index:28,__enum__:"Attribute",toString:$estr}};var Sys=function(){};t["Sys"]=Sys;Sys.__name__="Sys";Sys.systemName=function(){var e=process.platform;switch(e){case"darwin":return"Mac";case"freebsd":return"BSD";case"linux":return"Linux";case"win32":return"Windows";default:var t=e;return t}};var a=r(2081);var Reflect=function(){};t["Reflect"]=Reflect;Reflect.__name__="Reflect";Reflect.field=function(e,t){try{return e[t]}catch(e){var r=e instanceof js__$Boot_HaxeError?e.val:e;return null}};Reflect.fields=function(e){var t=[];if(e!=null){var r=Object.prototype.hasOwnProperty;for(var n in e){if(n!="__id__"&&n!="hx__closures__"&&r.call(e,n)){t.push(n)}}}return t};Reflect.isFunction=function(e){if(typeof e=="function"){return!(e.__name__||e.__ename__)}else{return false}};Reflect.compare=function(e,t){if(e==t){return 0}else if(e>t){return 1}else{return-1}};Reflect.isEnumValue=function(e){if(e!=null){return e.__enum__!=null}else{return false}};Reflect.deleteField=function(e,t){if(!Object.prototype.hasOwnProperty.call(e,t)){return false}delete e[t];return true};Reflect.copy=function(e){if(e==null){return null}var t={};var r=0;var n=Reflect.fields(e);while(r<n.length){var i=n[r];++r;t[i]=Reflect.field(e,i)}return t};var js_Boot=function(){};t["js.Boot"]=js_Boot;js_Boot.__name__="js.Boot";js_Boot.getClass=function(e){if(e==null){return null}else if(e instanceof Array){return Array}else{var t=e.__class__;if(t!=null){return t}var r=js_Boot.__nativeClassName(e);if(r!=null){return js_Boot.__resolveNativeClass(r)}return null}};js_Boot.__string_rec=function(e,t){if(e==null){return"null"}if(t.length>=5){return"<...>"}var r=typeof e;if(r=="function"&&(e.__name__||e.__ename__)){r="object"}switch(r){case"function":return"<function>";case"object":if(e.__enum__){var i=n[e.__enum__];var s=i.__constructs__[e._hx_index];var a=i[s];if(a.__params__){t=t+"\t";return s+"("+function(r){var n;var i=[];{var s=0;var l=a.__params__;while(true){if(!(s<l.length)){break}var o=l[s];s=s+1;i.push(js_Boot.__string_rec(e[o],t))}}n=i;return n}(this).join(",")+")"}else{return s}}if(e instanceof Array){var l="[";t+="\t";var o=0;var u=e.length;while(o<u){var c=o++;l+=(c>0?",":"")+js_Boot.__string_rec(e[c],t)}l+="]";return l}var h;try{h=e.toString}catch(e){var d=e instanceof js__$Boot_HaxeError?e.val:e;return"???"}if(h!=null&&h!=Object.toString&&typeof h=="function"){var v=e.toString();if(v!="[object Object]"){return v}}var m="{\n";t+="\t";var p=e.hasOwnProperty!=null;var _=null;for(_ in e){if(p&&!e.hasOwnProperty(_)){continue}if(_=="prototype"||_=="__class__"||_=="__super__"||_=="__interfaces__"||_=="__properties__"){continue}if(m.length!=2){m+=", \n"}m+=t+_+" : "+js_Boot.__string_rec(e[_],t)}t=t.substring(1);m+="\n"+t+"}";return m;case"string":return e;default:return String(e)}};js_Boot.__interfLoop=function(e,t){if(e==null){return false}if(e==t){return true}if(Object.prototype.hasOwnProperty.call(e,"__interfaces__")){var r=e.__interfaces__;var n=0;var i=r.length;while(n<i){var s=n++;var a=r[s];if(a==t||js_Boot.__interfLoop(a,t)){return true}}}return js_Boot.__interfLoop(e.__super__,t)};js_Boot.__instanceof=function(e,t){if(t==null){return false}switch(t){case Array:return e instanceof Array;case ue:return typeof e=="boolean";case le:return e!=null;case oe:return typeof e=="number";case ae:if(typeof e=="number"){return(e|0)===e}else{return false}break;case String:return typeof e=="string";default:if(e!=null){if(typeof t=="function"){if(js_Boot.__downcastCheck(e,t)){return true}}else if(typeof t=="object"&&js_Boot.__isNativeObj(t)){if(e instanceof t){return true}}}else{return false}if(t==ce?e.__name__!=null:false){return true}if(t==he?e.__ename__!=null:false){return true}return e.__enum__!=null?n[e.__enum__]==t:false}};js_Boot.__downcastCheck=function(e,t){if(!(e instanceof t)){if(t.__isInterface__){return js_Boot.__interfLoop(js_Boot.getClass(e),t)}else{return false}}else{return true}};js_Boot.__nativeClassName=function(e){var t=js_Boot.__toStr.call(e).slice(8,-1);if(t=="Object"||t=="Function"||t=="Math"||t=="JSON"){return null}return t};js_Boot.__isNativeObj=function(e){return js_Boot.__nativeClassName(e)!=null};js_Boot.__resolveNativeClass=function(t){return e[t]};var Std=function(){};t["Std"]=Std;Std.__name__="Std";Std.string=function(e){return js_Boot.__string_rec(e,"")};Std.parseInt=function(e){if(e!=null){var t=0;var r=e.length;while(t<r){var n=t++;var i=e.charCodeAt(n);if(i<=8||i>=14&&i!=32&&i!=45){var s=parseInt(e,e[n+1]=="x"||e[n+1]=="X"?16:10);if(isNaN(s)){return null}else{return s}}}}return null};var ANSI=function(){};t["ANSI"]=ANSI;ANSI.__name__="ANSI";ANSI.aset=function(e){if(ANSI.strip||ANSI.stripIfUnavailable&&!ANSI.available){return""}var t=""+"[";var r=[];var n=0;while(n<e.length){var i=e[n];++n;if(!js_Boot.__instanceof(i,s)){throw new js__$Boot_HaxeError("Set argument is not an Attribute: "+Std.string(i))}r.push(ANSI.values.get(i))}return t+r.join(";")+"m"};ANSI.detectSupport=function(){if(Sys.systemName().toLowerCase().indexOf("window")==-1){var e=-1;try{e=a.spawnSync("tput",["colors"]).error==null?0:125}catch(e){var t=e instanceof js__$Boot_HaxeError?e.val:e}return e==0}else{return process.env["ANSICON"]!=null}};var DateTools=function(){};t["DateTools"]=DateTools;DateTools.__name__="DateTools";DateTools.__format_get=function(e,t){switch(t){case"%":return"%";case"A":return DateTools.DAY_NAMES[e.getDay()];case"B":return DateTools.MONTH_NAMES[e.getMonth()];case"C":return StringTools.lpad(Std.string(e.getFullYear()/100|0),"0",2);case"D":return DateTools.__format(e,"%m/%d/%y");case"F":return DateTools.__format(e,"%Y-%m-%d");case"I":case"l":var r=e.getHours()%12;return StringTools.lpad(Std.string(r==0?12:r),t=="I"?"0":" ",2);case"M":return StringTools.lpad(Std.string(e.getMinutes()),"0",2);case"R":return DateTools.__format(e,"%H:%M");case"S":return StringTools.lpad(Std.string(e.getSeconds()),"0",2);case"T":return DateTools.__format(e,"%H:%M:%S");case"Y":return Std.string(e.getFullYear());case"a":return DateTools.DAY_SHORT_NAMES[e.getDay()];case"b":case"h":return DateTools.MONTH_SHORT_NAMES[e.getMonth()];case"d":return StringTools.lpad(Std.string(e.getDate()),"0",2);case"e":return Std.string(e.getDate());case"H":case"k":return StringTools.lpad(Std.string(e.getHours()),t=="H"?"0":" ",2);case"m":return StringTools.lpad(Std.string(e.getMonth()+1),"0",2);case"n":return"\n";case"p":if(e.getHours()>11){return"PM"}else{return"AM"}break;case"r":return DateTools.__format(e,"%I:%M:%S %p");case"s":return Std.string(e.getTime()/1e3|0);case"t":return"\t";case"u":var n=e.getDay();if(n==0){return"7"}else if(n==null){return"null"}else{return""+n}break;case"w":return Std.string(e.getDay());case"y":return StringTools.lpad(Std.string(e.getFullYear()%100),"0",2);default:throw new js__$Boot_HaxeError("Date.format %"+t+"- not implemented yet.")}};DateTools.__format=function(e,t){var r="";var n=0;while(true){var i=t.indexOf("%",n);if(i<0){break}var s=i-n;r+=s==null?HxOverrides.substr(t,n,null):HxOverrides.substr(t,n,s);r+=Std.string(DateTools.__format_get(e,HxOverrides.substr(t,i+1,1)));n=i+2}var a=t.length-n;r+=a==null?HxOverrides.substr(t,n,null):HxOverrides.substr(t,n,a);return r};DateTools.format=function(e,t){return DateTools.__format(e,t)};var EReg=function(e,t){this.r=new RegExp(e,t.split("u").join(""))};t["EReg"]=EReg;EReg.__name__="EReg";EReg.prototype={match:function(e){if(this.r.global){this.r.lastIndex=0}this.r.m=this.r.exec(e);this.r.s=e;return this.r.m!=null},matched:function(e){if(this.r.m!=null&&e>=0&&e<this.r.m.length){return this.r.m[e]}else{throw new js__$Boot_HaxeError("EReg::matched")}},matchedLeft:function(){if(this.r.m==null){throw new js__$Boot_HaxeError("No string matched")}return HxOverrides.substr(this.r.s,0,this.r.m.index)},matchedRight:function(){if(this.r.m==null){throw new js__$Boot_HaxeError("No string matched")}var e=this.r.m.index+this.r.m[0].length;return HxOverrides.substr(this.r.s,e,this.r.s.length-e)},matchedPos:function(){if(this.r.m==null){throw new js__$Boot_HaxeError("No string matched")}return{pos:this.r.m.index,len:this.r.m[0].length}},matchSub:function(e,t,r){if(r==null){r=-1}if(this.r.global){this.r.lastIndex=t;this.r.m=this.r.exec(r<0?e:HxOverrides.substr(e,0,t+r));var n=this.r.m!=null;if(n){this.r.s=e}return n}else{var i=this.match(r<0?HxOverrides.substr(e,t,null):HxOverrides.substr(e,t,r));if(i){this.r.s=e;this.r.m.index+=t}return i}},map:function(e,t){var r=0;var n="";while(true){if(r>=e.length){break}else if(!this.matchSub(e,r)){n+=Std.string(HxOverrides.substr(e,r,null));break}var i=this.matchedPos();n+=Std.string(HxOverrides.substr(e,r,i.pos-r));n+=Std.string(t(this));if(i.len==0){n+=Std.string(HxOverrides.substr(e,i.pos,1));r=i.pos+1}else{r=i.pos+i.len}if(!this.r.global){break}}if(!this.r.global&&r>0&&r<e.length){n+=Std.string(HxOverrides.substr(e,r,null))}return n},__class__:EReg};var HxOverrides=function(){};t["HxOverrides"]=HxOverrides;HxOverrides.__name__="HxOverrides";HxOverrides.dateStr=function(e){var t=e.getMonth()+1;var r=e.getDate();var n=e.getHours();var i=e.getMinutes();var s=e.getSeconds();return e.getFullYear()+"-"+(t<10?"0"+t:""+t)+"-"+(r<10?"0"+r:""+r)+" "+(n<10?"0"+n:""+n)+":"+(i<10?"0"+i:""+i)+":"+(s<10?"0"+s:""+s)};HxOverrides.strDate=function(e){switch(e.length){case 8:var t=e.split(":");var r=new Date;r["setTime"](0);r["setUTCHours"](t[0]);r["setUTCMinutes"](t[1]);r["setUTCSeconds"](t[2]);return r;case 10:var n=e.split("-");return new Date(n[0],n[1]-1,n[2],0,0,0);case 19:var i=e.split(" ");var s=i[0].split("-");var a=i[1].split(":");return new Date(s[0],s[1]-1,s[2],a[0],a[1],a[2]);default:throw new js__$Boot_HaxeError("Invalid date format : "+e)}};HxOverrides.cca=function(e,t){var r=e.charCodeAt(t);if(r!=r){return undefined}return r};HxOverrides.substr=function(e,t,r){if(r==null){r=e.length}else if(r<0){if(t==0){r=e.length+r}else{return""}}return e.substr(t,r)};HxOverrides.remove=function(e,t){var r=e.indexOf(t);if(r==-1){return false}e.splice(r,1);return true};HxOverrides.iter=function(e){return{cur:0,arr:e,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};var IntIterator=function(e,t){this.min=e;this.max=t};t["IntIterator"]=IntIterator;IntIterator.__name__="IntIterator";IntIterator.prototype={__class__:IntIterator};var Lambda=function(){};t["Lambda"]=Lambda;Lambda.__name__="Lambda";Lambda.has=function(e,t){var r=$getIterator(e);while(r.hasNext()){var n=r.next();if(n==t){return true}}return false};Math.__name__="Math";var StringBuf=function(){this.b=""};t["StringBuf"]=StringBuf;StringBuf.__name__="StringBuf";StringBuf.prototype={__class__:StringBuf};var haxe_SysTools=function(){};t["haxe.SysTools"]=haxe_SysTools;haxe_SysTools.__name__="haxe.SysTools";haxe_SysTools.quoteUnixArg=function(e){if(e==""){return"''"}if(!new EReg("[^a-zA-Z0-9_@%+=:,./-]","").match(e)){return e}return"'"+StringTools.replace(e,"'","'\"'\"'")+"'"};haxe_SysTools.quoteWinArg=function(e,t){if(!new EReg('^[^ \t\\\\"]+$',"").match(e)){var r="";var n=e.indexOf(" ")!=-1||e.indexOf("\t")!=-1||e=="";if(n){r+='"'}var i=new StringBuf;var s=0;var a=e.length;while(s<a){var l=s++;var o=HxOverrides.cca(e,l);if(o==null){var u=o;if(i.b.length>0){r+=Std.string(i.b);i=new StringBuf}r+=String.fromCodePoint(u)}else{switch(o){case 34:var c=i.b;r+=c==null?"null":""+c;r+=c==null?"null":""+c;i=new StringBuf;r+='\\"';break;case 92:i.b+="\\";break;default:var h=o;if(i.b.length>0){r+=Std.string(i.b);i=new StringBuf}r+=String.fromCodePoint(h)}}}r+=Std.string(i.b);if(n){r+=Std.string(i.b);r+='"'}e=r}if(t){var d="";var v=0;var m=e.length;while(v<m){var p=v++;var _=HxOverrides.cca(e,p);if(haxe_SysTools.winMetaCharacters.indexOf(_)>=0){d+=String.fromCodePoint(94)}d+=String.fromCodePoint(_)}return d}else{return e}};var StringTools=function(){};t["StringTools"]=StringTools;StringTools.__name__="StringTools";StringTools.startsWith=function(e,t){if(e.length>=t.length){return e.lastIndexOf(t,0)==0}else{return false}};StringTools.endsWith=function(e,t){var r=t.length;var n=e.length;if(n>=r){return e.indexOf(t,n-r)==n-r}else{return false}};StringTools.isSpace=function(e,t){var r=HxOverrides.cca(e,t);if(!(r>8&&r<14)){return r==32}else{return true}};StringTools.ltrim=function(e){var t=e.length;var r=0;while(r<t&&StringTools.isSpace(e,r))++r;if(r>0){return HxOverrides.substr(e,r,t-r)}else{return e}};StringTools.rtrim=function(e){var t=e.length;var r=0;while(r<t&&StringTools.isSpace(e,t-r-1))++r;if(r>0){return HxOverrides.substr(e,0,t-r)}else{return e}};StringTools.trim=function(e){return StringTools.ltrim(StringTools.rtrim(e))};StringTools.lpad=function(e,t,r){if(t.length<=0){return e}var n="";r-=e.length;while(n.length<r)n+=t==null?"null":""+t;n+=e==null?"null":""+e;return n};StringTools.replace=function(e,t,r){return e.split(t).join(r)};var haxe_io_Output=function(){};t["haxe.io.Output"]=haxe_io_Output;haxe_io_Output.__name__="haxe.io.Output";haxe_io_Output.prototype={writeByte:function(e){throw new js__$Boot_HaxeError("Not implemented")},writeBytes:function(e,t,r){if(t<0||r<0||t+r>e.length){throw new js__$Boot_HaxeError(h.OutsideBounds)}var n=e.b;var i=r;while(i>0){this.writeByte(n[t]);++t;--i}return r},writeFullBytes:function(e,t,r){while(r>0){var n=this.writeBytes(e,t,r);t+=n;r-=n}},writeString:function(e,t){var r=haxe_io_Bytes.ofString(e,t);this.writeFullBytes(r,0,r.length)},__class__:haxe_io_Output};var _$Sys_FileOutput=function(e){this.fd=e};t["_Sys.FileOutput"]=_$Sys_FileOutput;_$Sys_FileOutput.__name__="_Sys.FileOutput";_$Sys_FileOutput.__super__=haxe_io_Output;_$Sys_FileOutput.prototype=$extend(haxe_io_Output.prototype,{writeByte:function(e){w.writeSync(this.fd,String.fromCodePoint(e))},writeBytes:function(e,t,r){var n=e.b;return w.writeSync(this.fd,k.from(n.buffer,n.byteOffset,e.length),t,r)},writeString:function(e,t){w.writeSync(this.fd,e)},__class__:_$Sys_FileOutput});var l=n["ValueType"]={__ename__:"ValueType",__constructs__:["TNull","TInt","TFloat","TBool","TObject","TFunction","TClass","TEnum","TUnknown"],TNull:{_hx_index:0,__enum__:"ValueType",toString:$estr},TInt:{_hx_index:1,__enum__:"ValueType",toString:$estr},TFloat:{_hx_index:2,__enum__:"ValueType",toString:$estr},TBool:{_hx_index:3,__enum__:"ValueType",toString:$estr},TObject:{_hx_index:4,__enum__:"ValueType",toString:$estr},TFunction:{_hx_index:5,__enum__:"ValueType",toString:$estr},TClass:(i=function(e){return{_hx_index:6,c:e,__enum__:"ValueType",toString:$estr}},i.__params__=["c"],i),TEnum:(i=function(e){return{_hx_index:7,e:e,__enum__:"ValueType",toString:$estr}},i.__params__=["e"],i),TUnknown:{_hx_index:8,__enum__:"ValueType",toString:$estr}};var Type=function(){};t["Type"]=Type;Type.__name__="Type";Type.createEnum=function(e,t,r){var n=Reflect.field(e,t);if(n==null){throw new js__$Boot_HaxeError("No such constructor "+t)}if(Reflect.isFunction(n)){if(r==null){throw new js__$Boot_HaxeError("Constructor "+t+" need parameters")}return n.apply(e,r)}if(r!=null&&r.length!=0){throw new js__$Boot_HaxeError("Constructor "+t+" does not need parameters")}return n};Type.typeof=function(e){switch(typeof e){case"boolean":return l.TBool;case"function":if(e.__name__||e.__ename__){return l.TObject}return l.TFunction;case"number":if(Math.ceil(e)==e%2147483648){return l.TInt}return l.TFloat;case"object":if(e==null){return l.TNull}var t=e.__enum__;if(t!=null){return l.TEnum(n[t])}var r=js_Boot.getClass(e);if(r!=null){return l.TClass(r)}return l.TObject;case"string":return l.TClass(String);case"undefined":return l.TNull;default:return l.TUnknown}};Type.enumParameters=function(e){var t=n[e.__enum__];var r=t.__constructs__[e._hx_index];var i=t[r].__params__;if(i!=null){var s=[];var a=0;while(a<i.length){var l=i[a];++a;s.push(e[l])}return s}else{return[]}};var o=n["haxe.StackItem"]={__ename__:"haxe.StackItem",__constructs__:["CFunction","Module","FilePos","Method","LocalFunction"],CFunction:{_hx_index:0,__enum__:"haxe.StackItem",toString:$estr},Module:(i=function(e){return{_hx_index:1,m:e,__enum__:"haxe.StackItem",toString:$estr}},i.__params__=["m"],i),FilePos:(i=function(e,t,r,n){return{_hx_index:2,s:e,file:t,line:r,column:n,__enum__:"haxe.StackItem",toString:$estr}},i.__params__=["s","file","line","column"],i),Method:(i=function(e,t){return{_hx_index:3,classname:e,method:t,__enum__:"haxe.StackItem",toString:$estr}},i.__params__=["classname","method"],i),LocalFunction:(i=function(e){return{_hx_index:4,v:e,__enum__:"haxe.StackItem",toString:$estr}},i.__params__=["v"],i)};var haxe_IMap=function(){};t["haxe.IMap"]=haxe_IMap;haxe_IMap.__name__="haxe.IMap";haxe_IMap.__isInterface__=true;haxe_IMap.prototype={__class__:haxe_IMap};var haxe_Http=function(e){this.params=[];this.headers={};this.url=W.fromString(e)};t["haxe.Http"]=haxe_Http;haxe_Http.__name__="haxe.Http";haxe_Http.prototype={setHeader:function(e,t){var r=this.headers[e];if(r==null){this.headers[e]=[t]}else{var n=r;n.push(t)}return this},setParameter:function(e,t){var r=this.params;r.push(ne.ofString(e)+"="+ne.ofString(t));return this},onData:function(e){},onError:function(e){},request:function(e){var t=this;if(this.rawPostData!=null){e=true}if(e==null){e=false}var r=this.params.join("&");var n=this.url.scheme;var i=te.get_name(this.url.host);var s=te.get_port(this.url.host);var a=this.url;var l;if(r==""){l=""}else if(e==null){var o=r;l=(this.url.query==null?"?":"&")+o}else if(e==true){l=""}else{var u=r;l=(this.url.query==null?"?":"&")+u}var c=this.rawPostData;var h;if(c==null){h=e?r:null}else{var d=c;h=d}(n==null?b.request:n=="https"?y.request:b.request)({hostname:i,port:s,protocol:this.url.scheme+":",method:e?"POST":"GET",path:(a.query==null?a.path:a.path+"?"+a.query)+l,headers:this.headers},(function(e){var r=[];e.on("end",(function(){var e=StringTools.replace(k.concat(r).toString(),"%F6","%6f");t.onData(e)}));e.on("data",$bind(r,$arrayPush));e.on("error",(function(e){t.onError(Std.string(e))}))})).on("error",(function(e){t.onError(Std.string(e))})).end(h)},__class__:haxe_Http};var haxe_Serializer=function(){this.buf=new StringBuf;this.cache=[];this.useCache=haxe_Serializer.USE_CACHE;this.useEnumIndex=haxe_Serializer.USE_ENUM_INDEX;this.shash=new haxe_ds_StringMap;this.scount=0};t["haxe.Serializer"]=haxe_Serializer;haxe_Serializer.__name__="haxe.Serializer";haxe_Serializer.prototype={toString:function(){return this.buf.b},serializeString:function(e){var t=this.shash;var r=fe[e]!=null?t.getReserved(e):t.h[e];if(r!=null){this.buf.b+="R";this.buf.b+=r==null?"null":""+r;return}var n=this.shash;var i=this.scount++;if(fe[e]!=null){n.setReserved(e,i)}else{n.h[e]=i}this.buf.b+="y";e=encodeURIComponent(e);this.buf.b+=Std.string(e.length);this.buf.b+=":";this.buf.b+=e==null?"null":""+e},serializeRef:function(e){var t=typeof e;var r=0;var n=this.cache.length;while(r<n){var i=r++;var s=this.cache[i];if(typeof s==t&&s==e){this.buf.b+="r";this.buf.b+=i==null?"null":""+i;return true}}this.cache.push(e);return false},serializeFields:function(e){var t=0;var r=Reflect.fields(e);while(t<r.length){var n=r[t];++t;this.serializeString(n);this.serialize(Reflect.field(e,n))}this.buf.b+="g"},serialize:function(e){var t=Type.typeof(e);switch(t._hx_index){case 0:this.buf.b+="n";break;case 1:var r=e;if(r==0){this.buf.b+="z";return}this.buf.b+="i";this.buf.b+=r==null?"null":""+r;break;case 2:var i=e;if(isNaN(i)){this.buf.b+="k"}else if(!isFinite(i)){this.buf.b+=i<0?"m":"p"}else{this.buf.b+="d";this.buf.b+=i==null?"null":""+i}break;case 3:this.buf.b+=e?"t":"f";break;case 4:if(js_Boot.__instanceof(e,ce)){var s=e.__name__;this.buf.b+="A";this.serializeString(s)}else if(js_Boot.__instanceof(e,he)){this.buf.b+="B";this.serializeString(e.__ename__)}else{if(this.useCache&&this.serializeRef(e)){return}this.buf.b+="o";this.serializeFields(e)}break;case 5:throw new js__$Boot_HaxeError("Cannot serialize function");case 6:var a=t.c;if(a==String){this.serializeString(e);return}if(this.useCache&&this.serializeRef(e)){return}switch(a){case Array:var l=0;this.buf.b+="a";var o=e["length"];var u=0;var c=o;while(u<c){var h=u++;if(e[h]==null){++l}else{if(l>0){if(l==1){this.buf.b+="n"}else{this.buf.b+="u";this.buf.b+=l==null?"null":""+l}l=0}this.serialize(e[h])}}if(l>0){if(l==1){this.buf.b+="n"}else{this.buf.b+="u";this.buf.b+=l==null?"null":""+l}}this.buf.b+="h";break;case Date:var d=e;this.buf.b+="v";this.buf.b+=Std.string(d.getTime());break;case haxe_ds_IntMap:this.buf.b+="q";var v=e;var m=v.keys();while(m.hasNext()){var p=m.next();this.buf.b+=":";this.buf.b+=p==null?"null":""+p;this.serialize(v.h[p])}this.buf.b+="h";break;case haxe_ds_List:this.buf.b+="l";var _=e;var g=_.h;while(g!=null){var w=g.item;g=g.next;var x=w;this.serialize(x)}this.buf.b+="h";break;case haxe_ds_ObjectMap:this.buf.b+="M";var b=e;var y=b.keys();while(y.hasNext()){var S=y.next();var N=Reflect.field(S,"__id__");Reflect.deleteField(S,"__id__");this.serialize(S);S["__id__"]=N;this.serialize(b.h[S.__id__])}this.buf.b+="h";break;case haxe_ds_StringMap:this.buf.b+="b";var E=e;var k=E.keys();while(k.hasNext()){var R=k.next();this.serializeString(R);this.serialize(fe[R]!=null?E.getReserved(R):E.h[R])}this.buf.b+="h";break;case haxe_io_Bytes:var O=e;this.buf.b+="s";this.buf.b+=Std.string(Math.ceil(O.length*8/6));this.buf.b+=":";var C=0;var I=O.length-2;var A=haxe_Serializer.BASE64_CODES;if(A==null){var F=new Array(haxe_Serializer.BASE64.length);A=F;var L=0;var D=haxe_Serializer.BASE64.length;while(L<D){var T=L++;A[T]=HxOverrides.cca(haxe_Serializer.BASE64,T)}haxe_Serializer.BASE64_CODES=A}while(C<I){var B=O.b[C++];var P=O.b[C++];var M=O.b[C++];this.buf.b+=String.fromCodePoint(A[B>>2]);this.buf.b+=String.fromCodePoint(A[(B<<4|P>>4)&63]);this.buf.b+=String.fromCodePoint(A[(P<<2|M>>6)&63]);this.buf.b+=String.fromCodePoint(A[M&63])}if(C==I){var z=O.b[C++];var U=O.b[C++];this.buf.b+=String.fromCodePoint(A[z>>2]);this.buf.b+=String.fromCodePoint(A[(z<<4|U>>4)&63]);this.buf.b+=String.fromCodePoint(A[U<<2&63])}else if(C==I+1){var H=O.b[C++];this.buf.b+=String.fromCodePoint(A[H>>2]);this.buf.b+=String.fromCodePoint(A[H<<4&63])}break;default:if(this.useCache){this.cache.pop()}if(e.hxSerialize!=null){this.buf.b+="C";this.serializeString(a.__name__);if(this.useCache){this.cache.push(e)}e.hxSerialize(this);this.buf.b+="g"}else{this.buf.b+="c";this.serializeString(a.__name__);if(this.useCache){this.cache.push(e)}this.serializeFields(e)}}break;case 7:var j=t.e;if(this.useCache){if(this.serializeRef(e)){return}this.cache.pop()}this.buf.b+=Std.string(this.useEnumIndex?"j":"w");this.serializeString(j.__ename__);if(this.useEnumIndex){this.buf.b+=":";this.buf.b+=Std.string(e._hx_index)}else{var W=e;this.serializeString(n[W.__enum__].__constructs__[W._hx_index])}this.buf.b+=":";var V=Type.enumParameters(e);this.buf.b+=Std.string(V.length);var G=0;while(G<V.length){var $=V[G];++G;this.serialize($)}if(this.useCache){this.cache.push(e)}break;default:throw new js__$Boot_HaxeError("Cannot serialize "+Std.string(e))}},__class__:haxe_Serializer};var haxe_Timer=function(e){var t=this;this.id=setInterval((function(){t.run()}),e)};t["haxe.Timer"]=haxe_Timer;haxe_Timer.__name__="haxe.Timer";haxe_Timer.delay=function(e,t){var r=new haxe_Timer(t);r.run=function(){r.stop();e()};return r};haxe_Timer.prototype={stop:function(){if(this.id==null){return}clearInterval(this.id);this.id=null},run:function(){},__class__:haxe_Timer};var haxe__$Unserializer_DefaultResolver=function(){};t["haxe._Unserializer.DefaultResolver"]=haxe__$Unserializer_DefaultResolver;haxe__$Unserializer_DefaultResolver.__name__="haxe._Unserializer.DefaultResolver";haxe__$Unserializer_DefaultResolver.prototype={resolveClass:function(e){return t[e]},resolveEnum:function(e){return n[e]},__class__:haxe__$Unserializer_DefaultResolver};var haxe_Unserializer=function(e){this.buf=e;this.length=e.length;this.pos=0;this.scache=[];this.cache=[];var t=haxe_Unserializer.DEFAULT_RESOLVER;if(t==null){t=new haxe__$Unserializer_DefaultResolver;haxe_Unserializer.DEFAULT_RESOLVER=t}this.resolver=t};t["haxe.Unserializer"]=haxe_Unserializer;haxe_Unserializer.__name__="haxe.Unserializer";haxe_Unserializer.initCodes=function(){var e=[];var t=0;var r=haxe_Unserializer.BASE64.length;while(t<r){var n=t++;e[haxe_Unserializer.BASE64.charCodeAt(n)]=n}return e};haxe_Unserializer.prototype={readDigits:function(){var e=0;var t=false;var r=this.pos;while(true){var n=this.buf.charCodeAt(this.pos);if(n!=n){break}if(n==45){if(this.pos!=r){break}t=true;this.pos++;continue}if(n<48||n>57){break}e=e*10+(n-48);this.pos++}if(t){e*=-1}return e},readFloat:function(){var e=this.pos;while(true){var t=this.buf.charCodeAt(this.pos);if(t!=t){break}if(t>=43&&t<58||t==101||t==69){this.pos++}else{break}}return parseFloat(HxOverrides.substr(this.buf,e,this.pos-e))},unserializeObject:function(e){while(true){if(this.pos>=this.length){throw new js__$Boot_HaxeError("Invalid object")}if(this.buf.charCodeAt(this.pos)==103){break}var t=this.unserialize();if(typeof t!="string"){throw new js__$Boot_HaxeError("Invalid object key")}var r=this.unserialize();e[t]=r}this.pos++},unserializeEnum:function(e,t){if(this.buf.charCodeAt(this.pos++)!=58){throw new js__$Boot_HaxeError("Invalid enum format")}var r=this.readDigits();if(r==0){return Type.createEnum(e,t)}var n=[];while(r-- >0)n.push(this.unserialize());return Type.createEnum(e,t,n)},unserialize:function(){switch(this.buf.charCodeAt(this.pos++)){case 65:var e=this.unserialize();var t=this.resolver.resolveClass(e);if(t==null){throw new js__$Boot_HaxeError("Class not found "+e)}return t;case 66:var r=this.unserialize();var n=this.resolver.resolveEnum(r);if(n==null){throw new js__$Boot_HaxeError("Enum not found "+r)}return n;case 67:var i=this.unserialize();var s=this.resolver.resolveClass(i);if(s==null){throw new js__$Boot_HaxeError("Class not found "+i)}var a=Object.create(s.prototype);this.cache.push(a);a.hxUnserialize(this);if(this.buf.charCodeAt(this.pos++)!=103){throw new js__$Boot_HaxeError("Invalid custom data")}return a;case 77:var l=new haxe_ds_ObjectMap;this.cache.push(l);var o=this.buf;while(this.buf.charCodeAt(this.pos)!=104){var u=this.unserialize();l.set(u,this.unserialize())}this.pos++;return l;case 82:var c=this.readDigits();if(c<0||c>=this.scache.length){throw new js__$Boot_HaxeError("Invalid string reference")}return this.scache[c];case 97:var h=this.buf;var d=[];this.cache.push(d);while(true){var v=this.buf.charCodeAt(this.pos);if(v==104){this.pos++;break}if(v==117){this.pos++;var m=this.readDigits();d[d.length+m-1]=null}else{d.push(this.unserialize())}}return d;case 98:var p=new haxe_ds_StringMap;this.cache.push(p);var _=this.buf;while(this.buf.charCodeAt(this.pos)!=104){var g=this.unserialize();var w=this.unserialize();if(fe[g]!=null){p.setReserved(g,w)}else{p.h[g]=w}}this.pos++;return p;case 99:var x=this.unserialize();var b=this.resolver.resolveClass(x);if(b==null){throw new js__$Boot_HaxeError("Class not found "+x)}var y=Object.create(b.prototype);this.cache.push(y);this.unserializeObject(y);return y;case 100:return this.readFloat();case 102:return false;case 105:return this.readDigits();case 106:var S=this.unserialize();var N=this.resolver.resolveEnum(S);if(N==null){throw new js__$Boot_HaxeError("Enum not found "+S)}this.pos++;var E=this.readDigits();var k=N.__constructs__.slice()[E];if(k==null){throw new js__$Boot_HaxeError("Unknown enum index "+S+"@"+E)}var R=this.unserializeEnum(N,k);this.cache.push(R);return R;case 107:return NaN;case 108:var O=new haxe_ds_List;this.cache.push(O);var C=this.buf;while(this.buf.charCodeAt(this.pos)!=104)O.add(this.unserialize());this.pos++;return O;case 109:return-Infinity;case 110:return null;case 111:var I={};this.cache.push(I);this.unserializeObject(I);return I;case 112:return Infinity;case 113:var A=new haxe_ds_IntMap;this.cache.push(A);var F=this.buf;var L=this.buf.charCodeAt(this.pos++);while(L==58){var D=this.readDigits();var T=this.unserialize();A.h[D]=T;L=this.buf.charCodeAt(this.pos++)}if(L!=104){throw new js__$Boot_HaxeError("Invalid IntMap format")}return A;case 114:var B=this.readDigits();if(B<0||B>=this.cache.length){throw new js__$Boot_HaxeError("Invalid reference")}return this.cache[B];case 115:var P=this.readDigits();var M=this.buf;if(this.buf.charCodeAt(this.pos++)!=58||this.length-this.pos<P){throw new js__$Boot_HaxeError("Invalid bytes length")}var z=haxe_Unserializer.CODES;if(z==null){z=haxe_Unserializer.initCodes();haxe_Unserializer.CODES=z}var U=this.pos;var H=P&3;var j=(P>>2)*3+(H>=2?H-1:0);var W=U+(P-H);var V=new haxe_io_Bytes(new ArrayBuffer(j));var G=0;while(U<W){var $=z[M.charCodeAt(U++)];var Y=z[M.charCodeAt(U++)];V.b[G++]=$<<2|Y>>4;var q=z[M.charCodeAt(U++)];V.b[G++]=Y<<4|q>>2;var Z=z[M.charCodeAt(U++)];V.b[G++]=q<<6|Z}if(H>=2){var X=z[M.charCodeAt(U++)];var K=z[M.charCodeAt(U++)];V.b[G++]=X<<2|K>>4;if(H==3){var J=z[M.charCodeAt(U++)];V.b[G++]=K<<4|J>>2}}this.pos+=P;this.cache.push(V);return V;case 116:return true;case 118:var Q;if(this.buf.charCodeAt(this.pos)>=48&&this.buf.charCodeAt(this.pos)<=57&&this.buf.charCodeAt(this.pos+1)>=48&&this.buf.charCodeAt(this.pos+1)<=57&&this.buf.charCodeAt(this.pos+2)>=48&&this.buf.charCodeAt(this.pos+2)<=57&&this.buf.charCodeAt(this.pos+3)>=48&&this.buf.charCodeAt(this.pos+3)<=57&&this.buf.charCodeAt(this.pos+4)==45){Q=HxOverrides.strDate(HxOverrides.substr(this.buf,this.pos,19));this.pos+=19}else{Q=new Date(this.readFloat())}this.cache.push(Q);return Q;case 119:var ee=this.unserialize();var te=this.resolver.resolveEnum(ee);if(te==null){throw new js__$Boot_HaxeError("Enum not found "+ee)}var re=this.unserializeEnum(te,this.unserialize());this.cache.push(re);return re;case 120:throw js__$Boot_HaxeError.wrap(this.unserialize());case 121:var ne=this.readDigits();if(this.buf.charCodeAt(this.pos++)!=58||this.length-this.pos<ne){throw new js__$Boot_HaxeError("Invalid string length")}var ie=HxOverrides.substr(this.buf,this.pos,ne);this.pos+=ne;ie=decodeURIComponent(ie.split("+").join(" "));this.scache.push(ie);return ie;case 122:return 0;default:}this.pos--;throw new js__$Boot_HaxeError("Invalid char "+this.buf.charAt(this.pos)+" at position "+this.pos)},__class__:haxe_Unserializer};var haxe_ds_BalancedTree=function(){};t["haxe.ds.BalancedTree"]=haxe_ds_BalancedTree;haxe_ds_BalancedTree.__name__="haxe.ds.BalancedTree";haxe_ds_BalancedTree.__interfaces__=[haxe_IMap];haxe_ds_BalancedTree.prototype={set:function(e,t){this.root=this.setLoop(e,t,this.root)},get:function(e){var t=this.root;while(t!=null){var r=this.compare(e,t.key);if(r==0){return t.value}if(r<0){t=t.left}else{t=t.right}}return null},keys:function(){var e=[];this.keysLoop(this.root,e);return HxOverrides.iter(e)},setLoop:function(e,t,r){if(r==null){return new haxe_ds_TreeNode(null,e,t,null)}var n=this.compare(e,r.key);if(n==0){return new haxe_ds_TreeNode(r.left,e,t,r.right,r==null?0:r._height)}else if(n<0){var i=this.setLoop(e,t,r.left);return this.balance(i,r.key,r.value,r.right)}else{var s=this.setLoop(e,t,r.right);return this.balance(r.left,r.key,r.value,s)}},keysLoop:function(e,t){if(e!=null){this.keysLoop(e.left,t);t.push(e.key);this.keysLoop(e.right,t)}},balance:function(e,t,r,n){var i=e==null?0:e._height;var s=n==null?0:n._height;if(i>s+2){var a=e.left;var l=e.right;if((a==null?0:a._height)>=(l==null?0:l._height)){return new haxe_ds_TreeNode(e.left,e.key,e.value,new haxe_ds_TreeNode(e.right,t,r,n))}else{return new haxe_ds_TreeNode(new haxe_ds_TreeNode(e.left,e.key,e.value,e.right.left),e.right.key,e.right.value,new haxe_ds_TreeNode(e.right.right,t,r,n))}}else if(s>i+2){var o=n.right;var u=n.left;if((o==null?0:o._height)>(u==null?0:u._height)){return new haxe_ds_TreeNode(new haxe_ds_TreeNode(e,t,r,n.left),n.key,n.value,n.right)}else{return new haxe_ds_TreeNode(new haxe_ds_TreeNode(e,t,r,n.left.left),n.left.key,n.left.value,new haxe_ds_TreeNode(n.left.right,n.key,n.value,n.right))}}else{return new haxe_ds_TreeNode(e,t,r,n,(i>s?i:s)+1)}},compare:function(e,t){return Reflect.compare(e,t)},__class__:haxe_ds_BalancedTree};var haxe_ds_TreeNode=function(e,t,r,n,i){if(i==null){i=-1}this.left=e;this.key=t;this.value=r;this.right=n;if(i==-1){var s;var a=this.left;var l=this.right;if((a==null?0:a._height)>(l==null?0:l._height)){var o=this.left;s=o==null?0:o._height}else{var u=this.right;s=u==null?0:u._height}this._height=s+1}else{this._height=i}};t["haxe.ds.TreeNode"]=haxe_ds_TreeNode;haxe_ds_TreeNode.__name__="haxe.ds.TreeNode";haxe_ds_TreeNode.prototype={__class__:haxe_ds_TreeNode};var haxe_ds_EnumValueMap=function(){haxe_ds_BalancedTree.call(this)};t["haxe.ds.EnumValueMap"]=haxe_ds_EnumValueMap;haxe_ds_EnumValueMap.__name__="haxe.ds.EnumValueMap";haxe_ds_EnumValueMap.__interfaces__=[haxe_IMap];haxe_ds_EnumValueMap.__super__=haxe_ds_BalancedTree;haxe_ds_EnumValueMap.prototype=$extend(haxe_ds_BalancedTree.prototype,{compare:function(e,t){var r=e._hx_index-t._hx_index;if(r!=0){return r}var n=Type.enumParameters(e);var i=Type.enumParameters(t);if(n.length==0&&i.length==0){return 0}return this.compareArgs(n,i)},compareArgs:function(e,t){var r=e.length-t.length;if(r!=0){return r}var n=0;var i=e.length;while(n<i){var s=n++;var a=this.compareArg(e[s],t[s]);if(a!=0){return a}}return 0},compareArg:function(e,t){if(Reflect.isEnumValue(e)&&Reflect.isEnumValue(t)){return this.compare(e,t)}else if(e instanceof Array&&t instanceof Array){return this.compareArgs(e,t)}else{return Reflect.compare(e,t)}},__class__:haxe_ds_EnumValueMap});var haxe_ds_IntMap=function(){this.h={}};t["haxe.ds.IntMap"]=haxe_ds_IntMap;haxe_ds_IntMap.__name__="haxe.ds.IntMap";haxe_ds_IntMap.__interfaces__=[haxe_IMap];haxe_ds_IntMap.prototype={get:function(e){return this.h[e]},keys:function(){var e=[];for(var t in this.h)this.h.hasOwnProperty(t)?e.push(t|0):null;return HxOverrides.iter(e)},__class__:haxe_ds_IntMap};var haxe_ds_List=function(){this.length=0};t["haxe.ds.List"]=haxe_ds_List;haxe_ds_List.__name__="haxe.ds.List";haxe_ds_List.prototype={add:function(e){var t=new haxe_ds__$List_ListNode(e,null);if(this.h==null){this.h=t}else{this.q.next=t}this.q=t;this.length++},iterator:function(){return new haxe_ds__$List_ListIterator(this.h)},__class__:haxe_ds_List};var haxe_ds__$List_ListNode=function(e,t){this.item=e;this.next=t};t["haxe.ds._List.ListNode"]=haxe_ds__$List_ListNode;haxe_ds__$List_ListNode.__name__="haxe.ds._List.ListNode";haxe_ds__$List_ListNode.prototype={__class__:haxe_ds__$List_ListNode};var haxe_ds__$List_ListIterator=function(e){this.head=e};t["haxe.ds._List.ListIterator"]=haxe_ds__$List_ListIterator;haxe_ds__$List_ListIterator.__name__="haxe.ds._List.ListIterator";haxe_ds__$List_ListIterator.prototype={hasNext:function(){return this.head!=null},next:function(){var e=this.head.item;this.head=this.head.next;return e},__class__:haxe_ds__$List_ListIterator};var haxe_ds_ObjectMap=function(){this.h={__keys__:{}}};t["haxe.ds.ObjectMap"]=haxe_ds_ObjectMap;haxe_ds_ObjectMap.__name__="haxe.ds.ObjectMap";haxe_ds_ObjectMap.__interfaces__=[haxe_IMap];haxe_ds_ObjectMap.prototype={set:function(t,r){var n=t.__id__;if(n==null){n=t.__id__=e.$haxeUID++}this.h[n]=r;this.h.__keys__[n]=t},get:function(e){return this.h[e.__id__]},keys:function(){var e=[];for(var t in this.h.__keys__){if(this.h.hasOwnProperty(t)){e.push(this.h.__keys__[t])}}return HxOverrides.iter(e)},__class__:haxe_ds_ObjectMap};var u=n["haxe.ds.Option"]={__ename__:"haxe.ds.Option",__constructs__:["Some","None"],Some:(i=function(e){return{_hx_index:0,v:e,__enum__:"haxe.ds.Option",toString:$estr}},i.__params__=["v"],i),None:{_hx_index:1,__enum__:"haxe.ds.Option",toString:$estr}};var haxe_ds_StringMap=function(){this.h={}};t["haxe.ds.StringMap"]=haxe_ds_StringMap;haxe_ds_StringMap.__name__="haxe.ds.StringMap";haxe_ds_StringMap.__interfaces__=[haxe_IMap];haxe_ds_StringMap.prototype={get:function(e){if(fe[e]!=null){return this.getReserved(e)}return this.h[e]},setReserved:function(e,t){if(this.rh==null){this.rh={}}this.rh["$"+e]=t},getReserved:function(e){if(this.rh==null){return null}else{return this.rh["$"+e]}},keys:function(){return HxOverrides.iter(this.arrayKeys())},arrayKeys:function(){var e=[];for(var t in this.h){if(this.h.hasOwnProperty(t)){e.push(t)}}if(this.rh!=null){for(var t in this.rh){if(t.charCodeAt(0)==36){e.push(t.substr(1))}}}return e},__class__:haxe_ds_StringMap};var haxe_io_Bytes=function(e){this.length=e.byteLength;this.b=new Uint8Array(e);this.b.bufferValue=e;e.hxBytes=this;e.bytes=this.b};t["haxe.io.Bytes"]=haxe_io_Bytes;haxe_io_Bytes.__name__="haxe.io.Bytes";haxe_io_Bytes.ofString=function(e,t){if(t==c.RawNative){var r=new Uint8Array(e.length<<1);var n=0;var i=e.length;while(n<i){var s=n++;var a=e.charCodeAt(s);r[s<<1]=a&255;r[s<<1|1]=a>>8}return new haxe_io_Bytes(r.buffer)}var l=[];var o=0;while(o<e.length){var u=e.charCodeAt(o++);if(55296<=u&&u<=56319){u=u-55232<<10|e.charCodeAt(o++)&1023}if(u<=127){l.push(u)}else if(u<=2047){l.push(192|u>>6);l.push(128|u&63)}else if(u<=65535){l.push(224|u>>12);l.push(128|u>>6&63);l.push(128|u&63)}else{l.push(240|u>>18);l.push(128|u>>12&63);l.push(128|u>>6&63);l.push(128|u&63)}}return new haxe_io_Bytes(new Uint8Array(l).buffer)};haxe_io_Bytes.prototype={sub:function(e,t){if(e<0||t<0||e+t>this.length){throw new js__$Boot_HaxeError(h.OutsideBounds)}return new haxe_io_Bytes(this.b.buffer.slice(e+this.b.byteOffset,e+this.b.byteOffset+t))},getString:function(e,t,r){if(e<0||t<0||e+t>this.length){throw new js__$Boot_HaxeError(h.OutsideBounds)}if(r==null){r=c.UTF8}var n="";var i=this.b;var s=e;var a=e+t;switch(r._hx_index){case 0:var l=e>0;while(s<a){var o=i[s++];if(o<128){if(o==0){break}n+=String.fromCodePoint(o)}else if(o<224){var u=(o&63)<<6|i[s++]&127;n+=String.fromCodePoint(u)}else if(o<240){var d=i[s++];var v=(o&31)<<12|(d&127)<<6|i[s++]&127;n+=String.fromCodePoint(v)}else{var m=i[s++];var p=i[s++];var _=(o&15)<<18|(m&127)<<12|(p&127)<<6|i[s++]&127;n+=String.fromCodePoint(_)}}break;case 1:while(s<a){var g=i[s++]|i[s++]<<8;n+=String.fromCodePoint(g)}break}return n},toString:function(){return this.getString(0,this.length)},__class__:haxe_io_Bytes};var c=n["haxe.io.Encoding"]={__ename__:"haxe.io.Encoding",__constructs__:["UTF8","RawNative"],UTF8:{_hx_index:0,__enum__:"haxe.io.Encoding",toString:$estr},RawNative:{_hx_index:1,__enum__:"haxe.io.Encoding",toString:$estr}};var h=n["haxe.io.Error"]={__ename__:"haxe.io.Error",__constructs__:["Blocked","Overflow","OutsideBounds","Custom"],Blocked:{_hx_index:0,__enum__:"haxe.io.Error",toString:$estr},Overflow:{_hx_index:1,__enum__:"haxe.io.Error",toString:$estr},OutsideBounds:{_hx_index:2,__enum__:"haxe.io.Error",toString:$estr},Custom:(i=function(e){return{_hx_index:3,e:e,__enum__:"haxe.io.Error",toString:$estr}},i.__params__=["e"],i)};var haxe_io_Path=function(e){switch(e){case".":case"..":this.dir=e;this.file="";return}var t=e.lastIndexOf("/");var r=e.lastIndexOf("\\");if(t<r){this.dir=HxOverrides.substr(e,0,r);e=HxOverrides.substr(e,r+1,null);this.backslash=true}else if(r<t){this.dir=HxOverrides.substr(e,0,t);e=HxOverrides.substr(e,t+1,null)}else{this.dir=null}var n=e.lastIndexOf(".");if(n!=-1){this.ext=HxOverrides.substr(e,n+1,null);this.file=HxOverrides.substr(e,0,n)}else{this.ext=null;this.file=e}};t["haxe.io.Path"]=haxe_io_Path;haxe_io_Path.__name__="haxe.io.Path";haxe_io_Path.withoutExtension=function(e){var t=new haxe_io_Path(e);t.ext=null;return t.toString()};haxe_io_Path.withoutDirectory=function(e){var t=new haxe_io_Path(e);t.dir=null;return t.toString()};haxe_io_Path.directory=function(e){var t=new haxe_io_Path(e);if(t.dir==null){return""}return t.dir};haxe_io_Path.extension=function(e){var t=new haxe_io_Path(e);if(t.ext==null){return""}return t.ext};haxe_io_Path.withExtension=function(e,t){var r=new haxe_io_Path(e);r.ext=t;return r.toString()};haxe_io_Path.join=function(e){var t=[];var r=0;var n=e;while(r<n.length){var i=n[r];++r;if(i!=null&&i!=""){t.push(i)}}var s=t;if(s.length==0){return""}var a=s[0];var l=1;var o=s.length;while(l<o){var u=l++;a=haxe_io_Path.addTrailingSlash(a);a+=s[u]}return haxe_io_Path.normalize(a)};haxe_io_Path.normalize=function(e){var t="/";e=e.split("\\").join(t);if(e==t){return t}var r=[];var n=0;var i=e.split(t);while(n<i.length){var s=i[n];++n;if(s==".."&&r.length>0&&r[r.length-1]!=".."){r.pop()}else if(s==""){if(r.length>0||HxOverrides.cca(e,0)==47){r.push(s)}}else if(s!="."){r.push(s)}}var a=r.join(t);var l="";var o=false;var u=false;var c=0;var h=a;while(c<h.length){var d=h;var v=c++;var m=d.charCodeAt(v);if(m>=55296&&m<=56319){m=m-55232<<10|d.charCodeAt(v+1)&1023}var p=m;if(p>=65536){++c}var _=p;switch(_){case 47:if(!o){u=true}else{var g=_;o=false;if(u){l+="/";u=false}l+=String.fromCodePoint(g)}break;case 58:l+=":";o=true;break;default:var w=_;o=false;if(u){l+="/";u=false}l+=String.fromCodePoint(w)}}return l};haxe_io_Path.addTrailingSlash=function(e){if(e.length==0){return"/"}var t=e.lastIndexOf("/");var r=e.lastIndexOf("\\");if(t<r){if(r!=e.length-1){return e+"\\"}else{return e}}else if(t!=e.length-1){return e+"/"}else{return e}};haxe_io_Path.removeTrailingSlashes=function(e){e:while(true){var t=HxOverrides.cca(e,e.length-1);if(t==null){break}else{switch(t){case 47:case 92:e=HxOverrides.substr(e,0,-1);break;default:break e}}}return e};haxe_io_Path.isAbsolute=function(e){if(StringTools.startsWith(e,"/")){return true}if(e.charAt(1)==":"){return true}if(StringTools.startsWith(e,"\\\\")){return true}return false};haxe_io_Path.prototype={toString:function(){return(this.dir==null?"":this.dir+(this.backslash?"\\":"/"))+this.file+(this.ext==null?"":"."+this.ext)},__class__:haxe_io_Path};var haxe_iterators_MapKeyValueIterator=function(e){this.map=e;this.keys=e.keys()};t["haxe.iterators.MapKeyValueIterator"]=haxe_iterators_MapKeyValueIterator;haxe_iterators_MapKeyValueIterator.__name__="haxe.iterators.MapKeyValueIterator";haxe_iterators_MapKeyValueIterator.prototype={hasNext:function(){return this.keys.hasNext()},next:function(){var e=this.keys.next();return{value:this.map.get(e),key:e}},__class__:haxe_iterators_MapKeyValueIterator};var haxe_remoting_AsyncConnection=function(){};t["haxe.remoting.AsyncConnection"]=haxe_remoting_AsyncConnection;haxe_remoting_AsyncConnection.__name__="haxe.remoting.AsyncConnection";haxe_remoting_AsyncConnection.__isInterface__=true;haxe_remoting_AsyncConnection.prototype={__class__:haxe_remoting_AsyncConnection};var haxe_remoting_HttpAsyncConnection=function(e,t){this.__data=e;this.__path=t};t["haxe.remoting.HttpAsyncConnection"]=haxe_remoting_HttpAsyncConnection;haxe_remoting_HttpAsyncConnection.__name__="haxe.remoting.HttpAsyncConnection";haxe_remoting_HttpAsyncConnection.__interfaces__=[haxe_remoting_AsyncConnection];haxe_remoting_HttpAsyncConnection.urlConnect=function(e){return new haxe_remoting_HttpAsyncConnection({url:e,error:function(e){throw js__$Boot_HaxeError.wrap(e)}},[])};haxe_remoting_HttpAsyncConnection.prototype={resolve:function(e){var t=new haxe_remoting_HttpAsyncConnection(this.__data,this.__path.slice());t.__path.push(e);return t},setErrorHandler:function(e){this.__data.error=e},call:function(e,t){var r=new haxe_Http(this.__data.url);var n=new haxe_Serializer;n.serialize(this.__path);n.serialize(e);r.setHeader("X-Haxe-Remoting","1");r.setParameter("__x",n.toString());var i=this.__data.error;r.onData=function(e){var r=true;var n;try{if(HxOverrides.substr(e,0,3)!="hxr"){throw new js__$Boot_HaxeError("Invalid response : '"+e+"'")}var s=new haxe_Unserializer(HxOverrides.substr(e,3,null));n=s.unserialize()}catch(e){n=null;r=false;i(e instanceof js__$Boot_HaxeError?e.val:e)}if(r&&t!=null){t(n)}};r.onError=i;r.request(true)},__class__:haxe_remoting_HttpAsyncConnection};var haxeshim_Args=function(e,t){this.cwd=e;this.args=t};t["haxeshim.Args"]=haxeshim_Args;haxeshim_Args.__name__="haxeshim.Args";haxeshim_Args.interpolate=function(e,t){if(e.indexOf("${")==-1){return x.Success(e)}var r="";var n=0;while(n<e.length){var i=e.indexOf("${",n);if(i==-1){var s=null;r+=s==null?HxOverrides.substr(e,n,null):HxOverrides.substr(e,n,s);break}else{var a=i;var l=a-n;r+=l==null?HxOverrides.substr(e,n,null):HxOverrides.substr(e,n,l);var o=a+2;var u;var c=e.indexOf("}",o);if(c==-1){return x.Failure("unclosed interpolation in "+e)}else{var h=c;u=h}var d=HxOverrides.substr(e,o,u-o);var v;var m=t(d);if(m==null){return x.Failure("unknown variable "+d)}else{var p=m;if(p=="$"+"{"+d+"}"){v=p}else{var _=haxeshim_Args.interpolate(p,t);if(_._hx_index==0){var g=_.data;v=g}else{var w=_;return w}}}r+=Std.string(v);n=u+1}}return x.Success(r)};haxeshim_Args.fromMultilineString=function(e,t,r,n){if(n==null){n=false}var i=[];var s=new haxeshim_Errors;var getVar1=function(e){if(e=="__dirname"){return haxe_io_Path.directory(t)}else{return r(e)}};var add=function(e,r){var add1=function(e){i.push({pos:p.File(t,r),val:e})};if(e.charAt(0)=="-"){add1(e)}else{var n=haxeshim_Args.interpolate(e,getVar1);switch(n._hx_index){case 0:var a=n.data;add1(a);break;case 1:var l=n.failure;s.fail(l,p.File(t,r));break}}};var a=e.split("\n");var l=StringTools.trim;var o=new Array(a.length);var u=0;var c=a.length;while(u<c){var h=u++;o[h]=l(a[h])}var d=o;var v=0;var m=d.length;while(v<m){var _=v++;var g=d[_];var w=function(e,t){return function(r){t[0](r,e[0])}}([_],[add]);var x=g.charAt(0);if(x!=null){switch(x){case"#":break;case"-":var b=g.indexOf(" ");if(b==-1){w(g)}else{var y=b;w(HxOverrides.substr(g,0,y));w(StringTools.trim(HxOverrides.substr(g,y,null)))}break;default:var S=StringTools.trim(g);if(S!=""){var N=S;if(n){w("-cp")}w(N)}}}}return s.produce(i)};haxeshim_Args.getNdll=function(e){if(StringTools.startsWith(e,"ndll:")){return u.Some(HxOverrides.substr(e,5,null))}else{return u.None}};haxeshim_Args.makeNdll=function(e){return"ndll:"+e};haxeshim_Args.split=function(e,t,r,n){var i=[];var s=0;var a=e.length;while(s<a){var l=s++;i.push({val:e[l],pos:p.Cmd(l)})}var o=i;var u=[];var c=[];var h=[];var d=new haxeshim_Errors;var resolvePath=function(e){if(haxe_io_Path.isAbsolute(e)){return e}else{return haxe_io_Path.join([t,e])}};var flush=function(){if(c.length>0){var e=u.concat(c);var r=new haxeshim_Args(t,e);c=[];h.push(r)}};while(true){var v=o.shift();if(v==null){flush();break}else{var m=[v];var _=function(e){return function(t){var r=o.shift();if(r==null){d.fail(""+e[0].val+" without argument",e[0].pos)}else{var n=r;t(n)}}}(m);var g=m[0].val;switch(g){case"--each":u=c;c=[];break;case"--next":flush();break;case"--run":case"-x":var w=[m[0]].concat(o);c=c.concat(w);o=[];flush();break;case"--cwd":case"-C":var x=o.shift();if(x==null){d.fail(""+m[0].val+" without argument",m[0].pos)}else{var b=x;t=resolvePath(b.val);if(!r.isDirectory(t)){d.fail("Cannot use "+t+" as working directory",b.pos);o=[]}}break;default:var y=g;if(haxe_io_Path.extension(y)=="hxml"){o=haxeshim_Args.readHxml(resolvePath(y),r,n,d,m[0].pos).concat(o)}else{var S=g;if(StringTools.startsWith(S,"${")){var N=haxeshim_Args.interpolate(S,n);switch(N._hx_index){case 0:var E=N.data;c.push({val:E,pos:m[0].pos});break;case 1:var k=N.failure;d.fail(k,m[0].pos);break}}else{c.push(m[0])}}}}}return d.produce(h)};haxeshim_Args.readHxml=function(e,t,r,n,i){var s=t.readFile(e);switch(s._hx_index){case 0:var a=s.data;return n.getResult(haxeshim_Args.fromMultilineString(a,e,r));case 1:var l=s.failure;n.fail(l,i);return[]}};haxeshim_Args.prototype={__class__:haxeshim_Args};var haxeshim_Attempt=function(){};t["haxeshim.Attempt"]=haxeshim_Attempt;haxeshim_Attempt.__name__="haxeshim.Attempt";haxeshim_Attempt.to=function(e,t,r){return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyFunc((function(){return tink_core_TypedError.catchExceptions(t,(function(t){return tink_core_TypedError.withData(null,"Failed to "+e,t,r)}),{fileName:"haxeshim/Attempt.hx",lineNumber:8,className:"haxeshim.Attempt",methodName:"to"})})))};var d=n["haxeshim.ServerKind"]={__ename__:"haxeshim.ServerKind",__constructs__:["Port","Stdio"],Port:(i=function(e){return{_hx_index:0,num:e,__enum__:"haxeshim.ServerKind",toString:$estr}},i.__params__=["num"],i),Stdio:{_hx_index:1,__enum__:"haxeshim.ServerKind",toString:$estr}};var v=n["haxeshim.StdioState"]={__ename__:"haxeshim.StdioState",__constructs__:["AwaitingHeader","AwaitingData"],AwaitingHeader:(i=function(e){return{_hx_index:0,buf:e,__enum__:"haxeshim.StdioState",toString:$estr}},i.__params__=["buf"],i),AwaitingData:(i=function(e,t){return{_hx_index:1,buf:e,total:t,__enum__:"haxeshim.StdioState",toString:$estr}},i.__params__=["buf","total"],i)};var haxeshim_CompilerServer=function(e,t,r){this.freePort=Y.async((function(e){var t=S.createServer();t.listen(0,(function(){var r=t.address().port;t.close((function(){e(x.Success(r))}))}))}),true);this.args=r;this.scope=t;switch(e._hx_index){case 0:var n=e.num;this.waitOnPort(n);break;case 1:this.stdio();break}};t["haxeshim.CompilerServer"]=haxeshim_CompilerServer;haxeshim_CompilerServer.__name__="haxeshim.CompilerServer";haxeshim_CompilerServer.prototype={handleIntSignals:function(){var cleanExit=function(){process.exit()};process.on("SIGINT",cleanExit);process.on("SIGTERM",cleanExit)},stdio:function(){var e=this;w.watch(this.scope.configFile,{persistent:false},(function(t,r){var n=10;var i=null;i=function(t){if(t==null){t=0}try{e.scope.reload()}catch(e){var r=e instanceof js__$Boot_HaxeError?e.val:e;if(t>=n){haxeshim_Logger.get().error("Reloading .haxerc after change detected failed "+n+" times!");process.exit(500)}else{var s=i;var a=t+1;haxe_Timer.delay((function(){s(a);return}),100)}}};i()}));var t=null;var quit=function(){if(t!=null){t.kill()}};process.on("exit",quit);this.handleIntSignals();process.stdin.on("end",quit);process.stdin.on("close",quit);var r=v.AwaitingHeader(k.alloc(0));var frame=function(e){var t=k.alloc(4+e.length);t.writeInt32LE(e.length,0);e.copy(t,4);return t};var processData=function(r){var n=k.alloc(0);var s=r.indexOf(1);var l;if(s==-1){l=r}else{var o=s;n=r.slice(o);l=r.slice(0,o)}var u=e.parseArgs(l);if(t==null||u.version!=e.lastVersion){if(t!=null){t.kill();t.stdout.unpipe(process.stdout);t.stderr.unpipe(process.stderr)}e.lastVersion=u.version;var c=e.scope.haxeInstallation;t=a.spawn(c.compiler,e.args.concat(["--wait","stdio"]),{cwd:e.scope.cwd,env:m.toVars(haxeshim_Exec.mergeEnv(c.env())),stdio:"pipe"});var h=t;t.on("exit",(function(e,r){if(t==h){t=null}}));t.stdout.pipe(process.stdout);t.stderr.pipe(process.stderr)}var d=(i=e.scope,$bind(i,i.resolve));var v=u.args;var p=tink_core_TypedError.catchExceptions((function(){return d(v)}),null,{fileName:"haxeshim/CompilerServer.hx",lineNumber:142,className:"haxeshim.CompilerServer",methodName:"stdio"});switch(p._hx_index){case 0:var _=p.data;var g=k.from(_.join("\n"));var w=t.stdin;var x=k.concat([g,n]);w.write(frame(x));break;case 1:var b=p.failure;haxeshim_Exec.die(b.code,b.message);break}};var reduce=function(){while(true){var e;switch(r._hx_index){case 0:var t=r.buf;e=t.length>=4?v.AwaitingData(t.slice(4),t.readInt32LE(0)):r;break;case 1:var n=r.total;var i=r.buf;if(i.length>=n){var s=i.slice(0,n);processData(s);e=v.AwaitingHeader(i.slice(n))}else{e=r}break;default:e=r}if(r==e){break}r=e}};process.stdin.on("data",(function(e){switch(r._hx_index){case 0:var t=r.buf;r=v.AwaitingHeader(k.concat([t,e]));break;case 1:var n=r.total;var i=r.buf;r=v.AwaitingData(k.concat([i,e]),n);break}reduce()}))},parseArgs:function(e){var t=e.toString().split("\n");var r;var n=t.indexOf("--haxe-version");if(n==-1){r=this.lastVersion==null?this.scope.haxeInstallation.version:this.lastVersion}else{var i=n;r=t.splice(i,2).pop()}return{version:r,args:t}},waitOnPort:function(e){var t=this;var quit=function(){if(t.waiting!=null){t.waiting.handle((function(e){if(e._hx_index==0){var t=e.data;t.kill()}}))}};process.on("exit",quit);this.handleIntSignals();var r=S.createServer((function(e){var r=[];e.on("data",(function(n){var i=n.indexOf(0);if(i==-1){r.push(n)}else{var s=i;var a=n.slice(0,s);r.push(a);var l=n.slice(s+1);e.unshift(l);var o=k.concat(r).toString().split("\n");r=[];var u;var c=o.indexOf("--haxe-version");if(c==-1){u=t.lastVersion==null?t.scope.haxeInstallation.version:t.lastVersion}else{var h=c;u=o.splice(h,2).pop()}t.connect(u).handle((function(t){switch(t._hx_index){case 0:var r=t.data;r.write(o.join("\n")+String.fromCodePoint(0));r.pipe(e,{end:true});break;case 1:var n=t.failure;e.end(n.message+"\n"+""+"\n","utf8");break}}))}}));e.on("error",(function(){}));e.on("end",(function(){}))}));r.listen(e)},disconnect:function(){if(this.waiting==null){return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success($.Noise)))}else{return q.next(this.waiting,(function(e){var t=e.kill().map(x.Success);return t.gather()}))}},connect:function(e){var t=this;if(e!=this.lastVersion||this.waiting==null){this.lastVersion=e;var r=this.waiting=q.next(this.disconnect(),(function(r){return q.next(t.freePort,Z.ofSafeSync((function(r){var n=t.scope.getInstallation(e);var i=haxeshim_Exec.async(n.compiler,t.scope.cwd,t.args.concat(["--wait",r==null?"null":""+r]),n.env());return{died:Y.async((function(e){var t=e;var nu1=function(){t($.Noise)};i.on("exit",nu1);var r=e;var nu2=function(){r($.Noise)};i.on("error",nu2);var n=e;var nu3=function(){n($.Noise)};i.on("disconnect",nu3)})),version:e,socket:function(){return Y.async((function(e){var t=10;var n=null;n=function(i){var s=S.createConnection(r,"127.0.0.1");s.on("error",(function(s){if(i>=t){var a=x.Failure(new tink_core_TypedError(null,"Failed to connect to 127.0.0.1:"+r+" after "+t+" attempts because "+s,{fileName:"haxeshim/CompilerServer.hx",lineNumber:291,className:"haxeshim.CompilerServer",methodName:"connect"}));e(a)}else{var l=n;var o=i+1;haxe_Timer.delay((function(){l(o);return}),100)}})).on("connect",(function(){e(x.Success(s))}))};n(1)}))},kill:function(){i.kill();return Y.async((function(e){var t=e;haxe_Timer.delay((function(){t($.Noise)}),500)}))}}})))}));this.waiting.handle((function(e){switch(e._hx_index){case 0:var n=e.data;n.died.handle(V.fromNiladic((function(){if(t.waiting==r){t.waiting=null}})));break;case 1:var i=e.failure;t.waiting=null;break}}))}return q.next(this.waiting,(function(e){return e.socket()}))},__class__:haxeshim_CompilerServer};var m={};t["haxeshim._Env.Env_Impl_"]=m;m.__name__="haxeshim._Env.Env_Impl_";m.ofVars=function(e){var t={};var r=t;var n=0;var i=Reflect.fields(e);while(n<i.length){var s=i[n];++n;r[haxeshim_Os.IS_WINDOWS?s.toUpperCase():s]=e[s]}var a=r;return a};m.ofMap=function(e){var t={};var r=t;var n=e.keys();while(n.hasNext()){var i=n.next();r[haxeshim_Os.IS_WINDOWS?i.toUpperCase():i]=fe[i]!=null?e.getReserved(i):e.h[i]}var s=r;return s};m.vars=function(e){return e};m.toVars=function(e){return Reflect.copy(e)};m.get=function(e,t){return e[haxeshim_Os.IS_WINDOWS?t.toUpperCase():t]};m.mergeInto=function(e,t){var r=m.vars(t);if(e==null){var n=r;var i=n;return i}else if(r==null){var s=e;var a=s;return a}else{var l=e;var o=r;var u={};var c=u;var h=o;var d=0;var v=Reflect.fields(h);while(d<v.length){var p=v[d];++d;c[p]=h[p]}var _=l;var g=0;var w=Reflect.fields(_);while(g<w.length){var x=w[g];++g;c[x]=_[x]}var b=c;return b}};var haxeshim_Errors=function(){this.errors=[]};t["haxeshim.Errors"]=haxeshim_Errors;haxeshim_Errors.__name__="haxeshim.Errors";haxeshim_Errors.getCode=function(e){var t=0;var r=e;while(t<r.length){var n=r[t];++t;var i=n.code;if(i!=null){var s=i;return s}}return 500};haxeshim_Errors.prototype={fail:function(e,t,r){this.errors.push({message:e,pos:t,code:r})},produce:function(e){if(this.errors.length==0){return x.Success(e)}else{return x.Failure({result:e,errors:this.errors})}},getResult:function(e){switch(e._hx_index){case 0:var t=e.data;return t;case 1:var r=e.failure;var n=0;var i=r.errors;while(n<i.length){var s=i[n];++n;this.errors.push(s)}return r.result}},__class__:haxeshim_Errors};var p=n["haxeshim.Pos"]={__ename__:"haxeshim.Pos",__constructs__:["File","Cmd","Custom"],File:(i=function(e,t){return{_hx_index:0,path:e,line:t,__enum__:"haxeshim.Pos",toString:$estr}},i.__params__=["path","line"],i),Cmd:(i=function(e){return{_hx_index:1,index:e,__enum__:"haxeshim.Pos",toString:$estr}},i.__params__=["index"],i),Custom:(i=function(e){return{_hx_index:2,source:e,__enum__:"haxeshim.Pos",toString:$estr}},i.__params__=["source"],i)};var haxeshim_PosTools=function(){};t["haxeshim.PosTools"]=haxeshim_PosTools;haxeshim_PosTools.__name__="haxeshim.PosTools";haxeshim_PosTools.toString=function(e){switch(e._hx_index){case 0:var t=e.line;var r=e.path;return""+r+":"+t;case 1:var n=e.index;return"CLI arg#"+n;case 2:var i=e.source;return i}};var haxeshim_Exec=function(){};t["haxeshim.Exec"]=haxeshim_Exec;haxeshim_Exec.__name__="haxeshim.Exec";haxeshim_Exec.die=function(e,t){if(t!=null){haxeshim_Logger.get().error(t)}process.exit(e);throw new js__$Boot_HaxeError("unreachable")};haxeshim_Exec.dieFromErrors=function(e){var t=null;var r=haxeshim_Logger.get();var n=0;var i=e;while(n<i.length){var s=i[n];++n;r.error(haxeshim_PosTools.toString(s.pos)+(": "+s.message))}process.exit(haxeshim_Errors.getCode(e));throw new js__$Boot_HaxeError("unreachable")};haxeshim_Exec.gracefully=function(e){try{return e()}catch(e){var t=e instanceof js__$Boot_HaxeError?e.val:e;if(t instanceof tink_core_TypedError){var r=t;return haxeshim_Exec.die(r.code,r.message)}else{return haxeshim_Exec.die(500,Std.string(t))}}};haxeshim_Exec.mergeEnv=function(e){return m.mergeInto(e,m.ofVars(process.env))};haxeshim_Exec.async=function(e,t,r,n){return a.spawn(e,r,{cwd:t,stdio:"inherit",env:m.toVars(haxeshim_Exec.mergeEnv(n))})};haxeshim_Exec.shell=function(e,t,r){try{return x.Success(a.execSync(e,{cwd:t,stdio:"inherit",env:m.toVars(haxeshim_Exec.mergeEnv(r))}))}catch(t){var n=t instanceof js__$Boot_HaxeError?t.val:t;return x.Failure(new tink_core_TypedError(n.status,"Failed to invoke `"+e+"` because "+Std.string(n),{fileName:"haxeshim/Exec.hx",lineNumber:47,className:"haxeshim.Exec",methodName:"shell"}))}};haxeshim_Exec.sync=function(e,t,r,n){var i=a.spawnSync(e,r,{cwd:t,stdio:"inherit",env:m.toVars(haxeshim_Exec.mergeEnv(n))});var s=i.stdout;var l=i.stderr;var o=i.status;var u=i.signal;var c=i.pid;var h=i.output;var d=i.error;if(d==null){var v=o;return x.Success(v)}else{var p=o;var _=d;return x.Failure(new tink_core_TypedError(p,"Failed to call "+e+" because "+Std.string(_),{fileName:"haxeshim/Exec.hx",lineNumber:54,className:"haxeshim.Exec",methodName:"sync"}))}};haxeshim_Exec.eval=function(e,t,r,n){var i=a.spawnSync(e,r,{cwd:t,env:m.toVars(haxeshim_Exec.mergeEnv(n))});var s=i;if(s.error==null){return x.Success({status:s.status,stdout:s.stdout.toString(),stderr:s.stderr.toString()})}else{var l=i.stdout;var o=i.stderr;var u=i.status;var c=i.signal;var h=i.pid;var d=i.output;var v=i.error;return x.Failure(new tink_core_TypedError(null,"Failed to call "+e+" because "+Std.string(v),{fileName:"haxeshim/Exec.hx",lineNumber:66,className:"haxeshim.Exec",methodName:"eval"}))}};var _={};t["haxeshim._Fs.Payload_Impl_"]=_;_.__name__="haxeshim._Fs.Payload_Impl_";_.ofString=function(e){return haxe_io_Bytes.ofString(e)};var haxeshim_Fs=function(){};t["haxeshim.Fs"]=haxeshim_Fs;haxeshim_Fs.__name__="haxeshim.Fs";haxeshim_Fs.get=function(e,t){var r=e;return haxeshim_Attempt.to("get content of "+e,(function(){return w.readFileSync(r,{encoding:"utf8"})}),t)};haxeshim_Fs.save=function(e,t,r){return q.noise(q.next(haxeshim_Fs.ensureDir(e),(function(n){var i=e;var f=function(e){var t=e.b;var r=k.from(t.buffer,t.byteOffset,e.length);w.writeFileSync(i,r)};var s=t;var tmp=function(){f(s)};return haxeshim_Attempt.to("save to "+e,tmp,r)})))};haxeshim_Fs.exists=function(e){var t=e;return haxeshim_Attempt.to("check the existence of "+e,(function(){return sys_FileSystem.exists(t)}),{fileName:"haxeshim/Fs.hx",lineNumber:26,className:"haxeshim.Fs",methodName:"exists"})};haxeshim_Fs.ensureDir=function(e){var t=StringTools.endsWith(e,"/")||StringTools.endsWith(e,"\\");if(t){e=haxe_io_Path.removeTrailingSlashes(e)}var r=haxe_io_Path.directory(e);if(haxe_io_Path.removeTrailingSlashes(r)==e){return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success($.Noise)))}else{return q.next(q.next(haxeshim_Fs.exists(r),(function(e){if(e){return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success($.Noise)))}else{return haxeshim_Fs.ensureDir(haxe_io_Path.addTrailingSlash(r))}})),(function(r){if(t){return q.next(haxeshim_Fs.exists(e),(function(t){return haxeshim_Attempt.to("create directory "+e,(function(){if(!t){sys_FileSystem.createDirectory(e)}return $.Noise}),{fileName:"haxeshim/Fs.hx",lineNumber:49,className:"haxeshim.Fs",methodName:"ensureDir"})}))}else{return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success($.Noise)))}}))}};haxeshim_Fs.isDirectory=function(e){var t=e;return haxeshim_Attempt.to("check if "+e+" is a directory",(function(){return sys_FileSystem.isDirectory(t)}),{fileName:"haxeshim/Fs.hx",lineNumber:60,className:"haxeshim.Fs",methodName:"isDirectory"})};haxeshim_Fs.move=function(e,t){return q.noise(q.next(haxeshim_Fs.ensureDir(t),(function(r){var n=e;var f=function(e){w.renameSync(n,e)};var i=t;var tmp=function(){f(i)};return haxeshim_Attempt.to("move "+e+" to "+t,tmp,{fileName:"haxeshim/Fs.hx",lineNumber:67,className:"haxeshim.Fs",methodName:"move"})})))};haxeshim_Fs.copy=function(e,t,r,n){var i=null;i=function(e,t,s){if(r==null||r(e)){return q.next(haxeshim_Fs.isDirectory(e),(function(r){if(r){return q.next(haxeshim_Fs.ensureDir(haxe_io_Path.addTrailingSlash(t)),(function(r){var n=[];var s=0;var a=w.readdirSync(e);while(s<a.length){var l=a[s];++s;n.push(i(""+e+"/"+l,""+t+"/"+l,false))}return q.noise(q.inParallel(n))}))}else{return q.next(q.next(s?haxeshim_Fs.ensureDir(t):q.NOISE,(function(r){if(n==null||n({src:e,dest:t})){return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success(false)))}else{return haxeshim_Fs.exists(t)}})),(function(r){if(r){return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success($.Noise)))}else{var n=e;var i=t;var copy1=function(){sys_io_File.copy(n,i)};return q.noise(haxeshim_Attempt.to("copy "+e+" to "+t,copy1,{fileName:"haxeshim/Fs.hx",lineNumber:92,className:"haxeshim.Fs",methodName:"copy"}))}}))}}))}else{return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success($.Noise)))}};return i(e,t,true)};haxeshim_Fs.ls=function(e,t){var r=[];var n=0;var i=w.readdirSync(e);while(n<i.length){var s=i[n];++n;var a=""+e+"/"+s;var l;if(t==null||t(a)){l=a}else{continue}r.push(l)}return r};haxeshim_Fs.delete=function(e){return haxeshim_Attempt.to("delete "+e,(function(){if(e!=null&&sys_FileSystem.exists(e)){if(sys_FileSystem.isDirectory(e)){var t=0;var r=w.readdirSync(e);while(t<r.length){var n=r[t];++t;haxeshim_Fs.delete(""+e+"/"+n)}if(sys_FileSystem.exists(e)){var i=0;var s=w.readdirSync(e);while(i<s.length){var a=s[i];++i;var l=e+"/"+a;if(sys_FileSystem.isDirectory(l)){if(sys_FileSystem.exists(l)){var o=0;var u=w.readdirSync(l);while(o<u.length){var c=u[o];++o;var h=l+"/"+c;if(sys_FileSystem.isDirectory(h)){sys_FileSystem.deleteDirectory(h)}else{w.unlinkSync(h)}}w.rmdirSync(l)}}else{w.unlinkSync(l)}}w.rmdirSync(e)}}else{w.unlinkSync(e)}}return}),{fileName:"haxeshim/Fs.hx",lineNumber:107,className:"haxeshim.Fs",methodName:"delete"})};haxeshim_Fs.peel=function(e,t){var r=0;var n=0;var i=t;while(n<i){var s=n++;var a=e.indexOf("/",r);if(a==-1){return u.None}else{var l=a;r=l+1}}return u.Some(HxOverrides.substr(e,r,null))};haxeshim_Fs.findNearest=function(e,t){while(true)if(sys_FileSystem.exists(""+t+"/"+e)){return u.Some(""+t+"/"+e)}else{var r=haxe_io_Path.directory(t);var n=r;if(t==n){return u.None}else{var i=r;t=i}}};var haxeshim_HaxeCli=function(e){this.scope=e};t["haxeshim.HaxeCli"]=haxeshim_HaxeCli;haxeshim_HaxeCli.__name__="haxeshim.HaxeCli";haxeshim_HaxeCli.prototype={installLibs:function(e){return this.scope.withLogger(haxeshim_Logger.get(e),(i=this.scope,$bind(i,i.installLibs))).handle((function(e){if(e._hx_index==1){var t=e.failure;haxeshim_Logger.get().error(t.message);process.exit(t.code)}}))},dispatch:function(e){var getScope=function(){var e={cwd:null};return haxeshim_Exec.gracefully((function(){return haxeshim_Scope.seek(e)}))};var t;var r;t=e.indexOf("--wait");var n=t;if(n>=0&&n<e.length-1){var i;var s=e.splice(n,2).pop();var a;if(s==null){a=Std.parseInt(s);var l=a;i=d.Port(l)}else if(s=="stdio"){i=d.Stdio}else{a=Std.parseInt(s);var o=a;i=d.Port(o)}new haxeshim_CompilerServer(i,getScope(),e)}else{r=e.slice(0,2);if(r.length==2){if(r[0]=="--run"){var u=r[1];if(u.indexOf("-")!=-1&&u.toLowerCase()==u){var c=e.slice(2);var h=getScope();switch(u){case"install-libs":var v;switch(c.length){case 0:v=false;break;case 1:v=c[0]=="--silent"?true:haxeshim_Exec.die(422,"unexpected arguments "+Std.string(c));break;default:v=haxeshim_Exec.die(422,"unexpected arguments "+Std.string(c))}this.installLibs(v);break;case"resolve-args":var m=$bind(h,h.resolve);var p=c;var _=haxeshim_Exec.gracefully((function(){return m(p)})).join("\n");process.stdout.write(Std.string(_));process.stdout.write("\n");process.exit(0);break;case"show-version":if(c.length>0){haxeshim_Exec.die(422,"too many arguments")}var g;var w=haxeshim_Exec.eval(h.haxeInstallation.compiler,h.cwd,["-version"]);switch(w._hx_index){case 0:var x=w.data;g=StringTools.trim(x.stdout.toString()+x.stderr.toString());break;case 1:var b=w.failure;g=haxeshim_Exec.die(b.code,b.message);break}process.stdout.write(Std.string("-D haxe-ver="+g));process.stdout.write("\n");process.stdout.write(Std.string("-cp "+h.haxeInstallation.stdLib));process.stdout.write("\n");break;default:var y=u;haxeshim_Exec.die(404,"Unknown extension "+y)}}else{var S=e;var N=getScope();var E=S.indexOf("--haxe-version");if(S.indexOf("--connect")==-1){var k=E==-1}else if(E==-1){S.push("--haxe-version");S.push(N.haxeInstallation.version)}var R=N.haxeInstallation.compiler;var O=R;if(sys_FileSystem.exists(O)){var get=function(e){switch(e._hx_index){case 0:var t=e.data;return t;case 1:var r=e.failure;var n=r.result;var i=r.errors;return haxeshim_Exec.dieFromErrors(i)}};var callHaxe=function(e,t){var r=N.haxeInstallation.env();var n=haxeshim_Exec.sync(O,t,e,r);switch(n._hx_index){case 0:var i=n.data;if(i!=0){var s=i;haxeshim_Exec.die(s)}break;case 1:var a=n.failure;haxeshim_Exec.die(a.code,a.message);break}};if(S.length==0){callHaxe(S,N.cwd)}else{var C=0;var I=get(N.getBuilds(S));while(C<I.length){var A=I[C];++C;var F=get(A);get(F.checkClassPaths());var L=[];var D=0;var T=F.args;while(D<T.length){var B=T[D];++D;L.push(B.val)}callHaxe(L,F.cwd)}}}else{var P=R;haxeshim_Exec.die(404,'haxe compiler not found at the expected location "'+P+'"')}}}else{var M=e;var z=getScope();var U=M.indexOf("--haxe-version");if(M.indexOf("--connect")==-1){var H=U==-1}else if(U==-1){M.push("--haxe-version");M.push(z.haxeInstallation.version)}var j=z.haxeInstallation.compiler;var W=j;if(sys_FileSystem.exists(W)){var get1=function(e){switch(e._hx_index){case 0:var t=e.data;return t;case 1:var r=e.failure;var n=r.result;var i=r.errors;return haxeshim_Exec.dieFromErrors(i)}};var callHaxe1=function(e,t){var r=z.haxeInstallation.env();var n=haxeshim_Exec.sync(W,t,e,r);switch(n._hx_index){case 0:var i=n.data;if(i!=0){var s=i;haxeshim_Exec.die(s)}break;case 1:var a=n.failure;haxeshim_Exec.die(a.code,a.message);break}};if(M.length==0){callHaxe1(M,z.cwd)}else{var V=0;var G=get1(z.getBuilds(M));while(V<G.length){var $=G[V];++V;var Y=get1($);get1(Y.checkClassPaths());var q=[];var Z=0;var X=Y.args;while(Z<X.length){var K=X[Z];++Z;q.push(K.val)}callHaxe1(q,Y.cwd)}}}else{var J=j;haxeshim_Exec.die(404,'haxe compiler not found at the expected location "'+J+'"')}}}else{var Q=e;var ee=getScope();var te=Q.indexOf("--haxe-version");if(Q.indexOf("--connect")==-1){var re=te==-1}else if(te==-1){Q.push("--haxe-version");Q.push(ee.haxeInstallation.version)}var ne=ee.haxeInstallation.compiler;var ie=ne;if(sys_FileSystem.exists(ie)){var get2=function(e){switch(e._hx_index){case 0:var t=e.data;return t;case 1:var r=e.failure;var n=r.result;var i=r.errors;return haxeshim_Exec.dieFromErrors(i)}};var callHaxe2=function(e,t){var r=ee.haxeInstallation.env();var n=haxeshim_Exec.sync(ie,t,e,r);switch(n._hx_index){case 0:var i=n.data;if(i!=0){var s=i;haxeshim_Exec.die(s)}break;case 1:var a=n.failure;haxeshim_Exec.die(a.code,a.message);break}};if(Q.length==0){callHaxe2(Q,ee.cwd)}else{var se=0;var ae=get2(ee.getBuilds(Q));while(se<ae.length){var le=ae[se];++se;var oe=get2(le);get2(oe.checkClassPaths());var ue=[];var ce=0;var he=oe.args;while(ce<he.length){var fe=he[ce];++ce;ue.push(fe.val)}callHaxe2(ue,oe.cwd)}}}else{var de=ne;haxeshim_Exec.die(404,'haxe compiler not found at the expected location "'+de+'"')}}}},__class__:haxeshim_HaxeCli};var haxeshim_Os=function(){};t["haxeshim.Os"]=haxeshim_Os;haxeshim_Os.__name__="haxeshim.Os";haxeshim_Os.slashes=function(e){if(haxeshim_Os.IS_WINDOWS){return StringTools.replace(e,"/","\\")}else{return e}};var haxeshim_HaxeInstallation=function(e,t,r){this.path=e;this.version=t;this.compiler=""+e+"/haxe"+haxeshim_HaxeInstallation.EXT;this.haxelib=""+e+"/haxelib"+haxeshim_HaxeInstallation.EXT;this.stdLib=""+e+"/std";this.haxelibRepo=r};t["haxeshim.HaxeInstallation"]=haxeshim_HaxeInstallation;haxeshim_HaxeInstallation.__name__="haxeshim.HaxeInstallation";haxeshim_HaxeInstallation.prototype={env:function(){var e=m.ofVars({HAXE_STD_PATH:this.stdLib,HAXEPATH:this.path,HAXELIB_PATH:this.haxelibRepo,HAXE_VERSION:this.version});return m.mergeInto(e,haxeshim_Neko.ENV)},__class__:haxeshim_HaxeInstallation};var haxeshim_HaxelibCli=function(e){haxeshim_Neko.setEnv();this.scope=e;this.installation=e.haxeInstallation};t["haxeshim.HaxelibCli"]=haxeshim_HaxelibCli;haxeshim_HaxelibCli.__name__="haxeshim.HaxelibCli";haxeshim_HaxelibCli.exit=function(e){switch(e._hx_index){case 0:var t=e.data;process.exit(0);break;case 1:var r=e.failure;haxeshim_Exec.die(r.code,r.message);break}};haxeshim_HaxelibCli.exitWithCode=function(e){switch(e._hx_index){case 0:var t=e.data;process.exit(t);break;case 1:var r=e.failure;haxeshim_Exec.die(r.code,r.message);break}};haxeshim_HaxelibCli.prototype={callHaxelib:function(e){haxeshim_HaxelibCli.exitWithCode(haxeshim_Exec.sync(this.installation.haxelib,process.cwd(),e,this.installation.env()))},run:function(e){var t=this;this.scope.getLibCommand(e).handle((function(r){switch(r._hx_index){case 0:var n=r.data;haxeshim_HaxelibCli.exit(n());break;case 1:var i=r.failure;var s=["run"].concat(e);t.callHaxelib(s);break}}))},__class__:haxeshim_HaxelibCli};var haxeshim_Logger=function(){};t["haxeshim.Logger"]=haxeshim_Logger;haxeshim_Logger.__name__="haxeshim.Logger";haxeshim_Logger.get=function(e){if(e==null){e=false}if(e){if(haxeshim_Logger.SILENT==null){haxeshim_Logger.SILENT=new haxeshim_Logger}return haxeshim_Logger.SILENT}else{if(haxeshim_Logger.DEFAULT==null){haxeshim_Logger.DEFAULT=new haxeshim__$Logger_SysLogger}return haxeshim_Logger.DEFAULT}};haxeshim_Logger.prototype={error:function(e){},warning:function(e){},info:function(e){},success:function(e){},progress:function(e){},__class__:haxeshim_Logger};var haxeshim__$Logger_SysLogger=function(){haxeshim_Logger.call(this)};t["haxeshim._Logger.SysLogger"]=haxeshim__$Logger_SysLogger;haxeshim__$Logger_SysLogger.__name__="haxeshim._Logger.SysLogger";haxeshim__$Logger_SysLogger.__super__=haxeshim_Logger;haxeshim__$Logger_SysLogger.prototype=$extend(haxeshim_Logger.prototype,{log:function(e,t){this.progress("");var r=haxeshim__$Logger_SysLogger.out;var n;switch(e._hx_index){case 0:n=[s.Red];break;case 1:n=[s.Yellow];break;case 2:n=[s.DefaultForeground];break;case 3:n=[s.Green];break}r.writeString(ANSI.aset(n)+t+ANSI.aset([s.Off])+"\n")},error:function(e){this.log(g.Error,e)},warning:function(e){this.log(g.Warning,e)},info:function(e){this.log(g.Info,e)},success:function(e){this.log(g.Success,e)},progress:function(e){if(haxeshim__$Logger_SysLogger.isTTY){if(e.length>80){e=HxOverrides.substr(e,0,77)+"..."}haxeshim__$Logger_SysLogger.out.writeString((ANSI.strip||ANSI.stripIfUnavailable&&!ANSI.available?"":"[2K")+(ANSI.strip||ANSI.stripIfUnavailable&&!ANSI.available?"":"["+1+"G")+e)}},__class__:haxeshim__$Logger_SysLogger});var g=n["haxeshim._Logger.Level"]={__ename__:"haxeshim._Logger.Level",__constructs__:["Error","Warning","Info","Success"],Error:{_hx_index:0,__enum__:"haxeshim._Logger.Level",toString:$estr},Warning:{_hx_index:1,__enum__:"haxeshim._Logger.Level",toString:$estr},Info:{_hx_index:2,__enum__:"haxeshim._Logger.Level",toString:$estr},Success:{_hx_index:3,__enum__:"haxeshim._Logger.Level",toString:$estr}};var tink_core__$Lazy_LazyObject=function(){};t["tink.core._Lazy.LazyObject"]=tink_core__$Lazy_LazyObject;tink_core__$Lazy_LazyObject.__name__="tink.core._Lazy.LazyObject";tink_core__$Lazy_LazyObject.__isInterface__=true;tink_core__$Lazy_LazyObject.prototype={__class__:tink_core__$Lazy_LazyObject};var tink_core__$Lazy_LazyConst=function(e){this.value=e};t["tink.core._Lazy.LazyConst"]=tink_core__$Lazy_LazyConst;tink_core__$Lazy_LazyConst.__name__="tink.core._Lazy.LazyConst";tink_core__$Lazy_LazyConst.__interfaces__=[tink_core__$Lazy_LazyObject];tink_core__$Lazy_LazyConst.prototype={get:function(){return this.value},map:function(e){var t=this;return new tink_core__$Lazy_LazyFunc((function(){return e(t.value)}))},__class__:tink_core__$Lazy_LazyConst};var sys_FileSystem=function(){};t["sys.FileSystem"]=sys_FileSystem;sys_FileSystem.__name__="sys.FileSystem";sys_FileSystem.exists=function(e){try{w.accessSync(e);return true}catch(e){var t=e instanceof js__$Boot_HaxeError?e.val:e;return false}};sys_FileSystem.isDirectory=function(e){try{return w.statSync(e).isDirectory()}catch(e){var t=e instanceof js__$Boot_HaxeError?e.val:e;return false}};sys_FileSystem.createDirectory=function(e){try{w.mkdirSync(e)}catch(i){var t=i instanceof js__$Boot_HaxeError?i.val:i;if(t.code=="ENOENT"){sys_FileSystem.createDirectory(N.dirname(e));w.mkdirSync(e)}else{var r;try{r=w.statSync(e)}catch(e){var n=e instanceof js__$Boot_HaxeError?e.val:e;throw t}if(!r.isDirectory()){throw t}}}};sys_FileSystem.deleteDirectory=function(e){if(sys_FileSystem.exists(e)){var t=0;var r=w.readdirSync(e);while(t<r.length){var n=r[t];++t;var i=e+"/"+n;if(sys_FileSystem.isDirectory(i)){sys_FileSystem.deleteDirectory(i)}else{w.unlinkSync(i)}}w.rmdirSync(e)}};var w=r(7147);var x=n["tink.core.Outcome"]={__ename__:"tink.core.Outcome",__constructs__:["Success","Failure"],Success:(i=function(e){return{_hx_index:0,data:e,__enum__:"tink.core.Outcome",toString:$estr}},i.__params__=["data"],i),Failure:(i=function(e){return{_hx_index:1,failure:e,__enum__:"tink.core.Outcome",toString:$estr}},i.__params__=["failure"],i)};var haxeshim_Scope=function(e,t,r,n){this.logger=haxeshim_Logger.get(false);this.haxeshimRoot=e;this.isGlobal=t;this.scopeDir=r;this.scopeLibDir=""+r+"/haxe_libraries";this.cwd=n;this.configFile=""+r+"/"+haxeshim_Scope.CONFIG_FILE;this.versionDir=""+e+"/versions";this.haxelibRepo=""+e+"/haxelib";var i=process.env["HAXE_LIBCACHE"];var s=process.env["HAXESHIM_LIBCACHE"];var a;if(s==null){if(i==null){a=""+e+"/haxe_libraries"}else{var l=i;a=l}}else{var o=s;a=o}this.libCache=a};t["haxeshim.Scope"]=haxeshim_Scope;haxeshim_Scope.__name__="haxeshim.Scope";haxeshim_Scope.create=function(e,t){return haxeshim_Fs.save(""+e+"/"+haxeshim_Scope.CONFIG_FILE,_.ofString(JSON.stringify(t,null,"  ")),{fileName:"haxeshim/Scope.hx",lineNumber:194,className:"haxeshim.Scope",methodName:"create"})};haxeshim_Scope.exists=function(e){return sys_FileSystem.exists(""+e+"/"+haxeshim_Scope.CONFIG_FILE)};haxeshim_Scope.seek=function(e){if(e==null){e={}}var t;var r=e.cwd;if(r==null){t=process.cwd()}else{var n=r;t=n}var i;var s=e.startLookingIn;if(s==null){i=t}else{var a=s;i=a}var l;var o=e.haxeshimRoot;if(o==null){l=haxeshim_Scope.DEFAULT_ROOT}else{var u=o;l=u}var f=function(e,t,r,n){return new haxeshim_Scope(e,t,r,n)};var c=l;var h=t;var make=function(e,t){return f(c,e,t,h)};var d;var v=haxeshim_Fs.findNearest(haxeshim_Scope.CONFIG_FILE,N.resolve(i));switch(v._hx_index){case 0:var m=v.v;d=make(false,haxe_io_Path.directory(m));break;case 1:d=make(true,l);break}d.reload();return d};haxeshim_Scope.env=function(e){var t=process.env[e];if(t==null){return u.None}else if(t==""){return u.None}else{var r=t;return u.Some(r)}};haxeshim_Scope.prototype={withLogger:function(e,t){var r=this;var n=this.logger;this.logger=e;return tink_core_TypedError.tryFinally(t,(function(){return r.logger=n}))},installLibs:function(){var e=this;return haxeshim_Attempt.to("install libraries",(function(){var t=e.getInstallationInstructions();var r=0;var n=t.missing;if(n.length!=0){var i=n;r=404;var s=0;while(s<i.length){var a=i[s];++s;e.logger.error(""+a.lib+" has no install instruction for missing classpath "+a.cp+"\n")}}var l=t.instructions.install.length+t.instructions.postInstall.length;var o=0;var u=0;var c=t.instructions.install;var h=0;while(h<c.length){var d=c[h];++h;e.logger.progress("["+ ++o+"/"+l+"] "+d);var v=haxeshim_Exec.shell(d,process.cwd());if(v._hx_index==1){var m=v.failure;r=m.code}else{++u}}var p=t.instructions.postInstall;var _=0;while(_<p.length){var g=p[_];++_;e.logger.progress("["+ ++o+"/"+l+"] "+g);var w=haxeshim_Exec.shell(g,process.cwd());if(w._hx_index==1){var x=w.failure;r=x.code}else{++u}}var b=l==1?"library":"libraries";if(r!=0){throw new js__$Boot_HaxeError(new tink_core_TypedError(r,"Failed to install "+(l-u)+"/"+l+" "+b+".",{fileName:"haxeshim/Scope.hx",lineNumber:117,className:"haxeshim.Scope",methodName:"installLibs"}))}else if(l>0){e.logger.success("Installed "+l+" "+b+".")}return $.Noise}),{fileName:"haxeshim/Scope.hx",lineNumber:83,className:"haxeshim.Scope",methodName:"installLibs"})},reload:function(){var e;try{e=w.readFileSync(this.configFile,{encoding:"utf8"})}catch(e){throw new js__$Boot_HaxeError(this.isGlobal?"Global config file "+this.configFile+" does not exist or cannot be opened":"Unable to open file "+this.configFile+" because "+Std.string(e instanceof js__$Boot_HaxeError?e.val:e))}var t;try{t=JSON.parse(e)}catch(t){var r=t instanceof js__$Boot_HaxeError?t.val:t;new _$Sys_FileOutput(2).writeString("Invalid JSON in file "+this.configFile+":\n\n"+e+"\n\n");throw js__$Boot_HaxeError.wrap(r)}this.setConfig(t)},setConfig:function(e){if(e.version==null){throw new js__$Boot_HaxeError("No version set in "+this.configFile)}if(e.resolveLibs==null){e.resolveLibs=this.isGlobal?"mixed":"scoped"}var t=e.resolveLibs;switch(t){case"haxelib":case"mixed":case"scoped":break;default:var r=t;throw new js__$Boot_HaxeError("invalid value "+r+" for `resolveLibs` in "+this.configFile)}this.config=e;this.haxeInstallation=this.getInstallation(e.version)},getVar:function(e){var t=process.env[e];if(t==null){return this.getDefault(e)}else if(t==""){return this.getDefault(e)}else{var r=t;return r}},getDefault:function(e){switch(e){case"CWD":return this.cwd;case"HAXESHIM_LIBCACHE":case"HAXE_LIBCACHE":return this.libCache;case"SCOPE_DIR":return this.scopeDir;default:return null}},delete:function(){w.unlinkSync(this.configFile)},reconfigure:function(e){var t=this;return q.next(haxeshim_Fs.save(this.configFile,_.ofString(JSON.stringify(e,null,"  ")),{fileName:"haxeshim/Scope.hx",lineNumber:201,className:"haxeshim.Scope",methodName:"reconfigure"}),(function(r){t.setConfig(e);return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success(r)))}))},path:function(e){if(haxe_io_Path.isAbsolute(e)){return u.Some(e)}else if(StringTools.startsWith(e,"./")||StringTools.startsWith(e,"../")){return u.Some(""+this.cwd+"/"+e)}else{return u.None}},getInstallation:function(e){var t=this.path(e);switch(t._hx_index){case 0:var r=t.v;return new haxeshim_HaxeInstallation(r,e,this.haxelibRepo);case 1:return new haxeshim_HaxeInstallation(""+this.versionDir+"/"+e,e,this.haxelibRepo)}},resolveThroughHaxelib:function(e){var t=this.haxeInstallation.haxelib;var r=this.cwd;var n=[];var i=0;while(i<e.length){var s=e[i];++i;n.push(s.val)}var a=haxeshim_Exec.eval(t,r,["path"].concat(n),this.haxeInstallation.env());switch(a._hx_index){case 0:var l=a.data;var o;var u=l.stderr;if(l.status==0){var c=l.stdout;return tink_core_OutcomeTools.map(haxeshim_Args.fromMultilineString(c,"haxelib path",$bind(this,this.getVar),true),(function(e){var t=0;var r=e.length;while(t<r){var n=t++;if(e[n].val=="-L"){var set=function(t,r){var n=e[t].pos;var i=r(e[t].val);e[t]={pos:n,val:i}};set(n,(function(e){return"-lib"}));set(n+1,(function(e){return"ndll:"+e}))}}return e}))}else{o=new tink_core_TypedError(l.status,l.stdout+l.stderr,{fileName:"haxeshim/Scope.hx",lineNumber:248,className:"haxeshim.Scope",methodName:"resolveThroughHaxelib"});var h=o;var d=new haxeshim_Errors;d.fail(h.message,p.Custom("haxelib path"),h.code);return d.produce([])}break;case 1:var v=a.failure;var m=new haxeshim_Errors;m.fail(v.message,p.Custom("haxelib path"),v.code);return m.produce([])}},interpolate:function(e,t){var r=this;var n;if(t==null){n=$bind(this,this.getVar)}else{var i=t;n=function(e){var t=i(e);if(t==null){return r.getVar(e)}else{var n=t;return n}}}return tink_core_OutcomeTools.sure(haxeshim_Args.interpolate(e,n))},parseDirectives:function(e){var t=new haxe_ds_StringMap;var r=0;var n=e.split("\n");var i=StringTools.trim;var s=new Array(n.length);var a=0;var l=n.length;while(a<l){var o=a++;s[o]=i(n[o])}var u=s;while(r<u.length){var c=u[r];++r;if(StringTools.startsWith(c,"#")){var h=StringTools.ltrim(HxOverrides.substr(c,1,null));if(StringTools.startsWith(h,"@")){var d=h.indexOf(":");if(d!=-1){var v=d;var m=h.substring(1,v);var p;var _=fe[m]!=null?t.getReserved(m):t.h[m];if(_==null){var g=[];if(fe[m]!=null){t.setReserved(m,g)}else{t.h[m]=g}p=g}else{var w=_;p=w}p.push(this.interpolate(StringTools.ltrim(HxOverrides.substr(h,v+1,null))))}}}}return t},libHxml:function(e){return""+this.scopeLibDir+"/"+e+".hxml"},getDirectives:function(e){return q.next(haxeshim_Fs.get(this.libHxml(e),{fileName:"haxeshim/Scope.hx",lineNumber:286,className:"haxeshim.Scope",methodName:"getDirectives"}),Z.ofSafeSync($bind(this,this.parseDirectives)))},getLibCommand:function(e){var t=this;var r=[];var n=0;while(n<e.length){var i=e[n];++n;r.push(this.interpolate(i))}e=r;var s=e.shift();return q.next(this.getDirectives(s),(function(r){var n=fe["run"]!=null?r.getReserved("run"):r.h["run"];if(n==null){return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Failure(new tink_core_TypedError(null,"no @run directive found for library "+s,{fileName:"haxeshim/Scope.hx",lineNumber:295,className:"haxeshim.Scope",methodName:"getLibCommand"}))))}else{switch(n.length){case 0:return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Failure(new tink_core_TypedError(null,"no @run directive found for library "+s,{fileName:"haxeshim/Scope.hx",lineNumber:295,className:"haxeshim.Scope",methodName:"getLibCommand"}))));case 1:var i=n[0];var a=[t.interpolate(i)];var l=haxeshim_Os.IS_WINDOWS?function(e){return haxe_SysTools.quoteWinArg(e,true)}:haxe_SysTools.quoteUnixArg;var o=new Array(e.length);var u=0;var c=e.length;while(u<c){var h=u++;o[h]=l(e[h])}var d=a.concat(o).join(" ");var v=process.cwd();var m=t.haxeInstallation.env();return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success((function(){return haxeshim_Exec.shell(d,v,m)}))));default:return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Failure(new tink_core_TypedError(null,"more than one @run directive for library "+s,{fileName:"haxeshim/Scope.hx",lineNumber:300,className:"haxeshim.Scope",methodName:"getLibCommand"}))))}}}))},getInstallationInstructions:function(){var e=[];var t={install:[],postInstall:[]};if(sys_FileSystem.exists(this.scopeLibDir)){var r=0;var n=w.readdirSync(this.scopeLibDir);while(r<n.length){var i=n[r];++r;var s=""+this.scopeLibDir+"/"+i;if(!sys_FileSystem.isDirectory(s)&&StringTools.endsWith(s,".hxml")){var a=w.readFileSync(s,{encoding:"utf8"});var l;var o=haxeshim_Args.fromMultilineString(a,s,$bind(this,this.getVar));switch(o._hx_index){case 0:var u=o.data;var c=[];var h=0;while(h<u.length){var d=u[h];++h;c.push(d.val)}l=c;break;case 1:var v=o.failure;var m=v.errors;var p=v.result;var _=[];var g=0;while(g<p.length){var x=p[g];++g;_.push(x.val)}l=_;break}var b=0;var y=l.length;while(b<y)switch(l[b++]){case"--class-path":case"-cp":case"-p":var S=l[b++];if(!sys_FileSystem.exists(S)){var N=this.parseDirectives(a);var E=fe["install"]!=null?N.getReserved("install"):N.h["install"];if(E==null){e.push({lib:i,cp:S})}else if(E.length==0){e.push({lib:i,cp:S})}else{var k=E;var R=0;while(R<k.length){var O=k[R];++R;t.install.push(O)}var C=fe["post-install"]!=null?N.getReserved("post-install"):N.h["post-install"];if(C!=null){var I=C;var A=0;while(A<I.length){var F=I[A];++A;t.postInstall.push(F)}}}b=y}break;default:}}}}return{missing:e,instructions:t}},resolveArgs:function(e){var t=this.cwd;var resolvePath=function(e){if(haxe_io_Path.isAbsolute(e)){return e}else{return haxe_io_Path.join([t,e])}};t=resolvePath(e.cwd);var r=[];var n=[];var i=new haxeshim_Errors;var s=[];var a=[];var l=[];var o=0;e:while(o<e.args.length){var u=e.args[o++];switch(u.val){case"--run":l=e.args.slice(o-1);break e;case"--connect":case"--display":case"--server-connect":case"--server-listen":a.push(u);var c=e.args[o++];if(c==null){i.fail(""+u.val+" requires argument",u.pos)}else{var h=c;a.push(h)}break;case"--wait":a.push(u);break;default:s.push(u)}}var d=new haxe_ds_StringMap;e:while(s.length>0){var v=[s.shift()];var m=function(e){return function(t){i.fail(t,e[0].pos)}}(v);var p=v[0].val;switch(p){case"--connect":case"--cwd":case"--each":case"--next":case"--run":case"--wait":case"-C":var _=p;if(StringTools.endsWith(_,".hxml")){s=haxeshim_Args.readHxml(resolvePath(_),haxeshim_Scope.fs,$bind(this,this.getVar),i,v[0].pos).concat(s)}else{var g=p;m(""+g+" not allowed here");break e}break;case"--lib":case"-L":case"-lib":var w=s.shift();var x;if(w==null){m("-lib requires argument")}else{x=haxeshim_Args.getNdll(w.val);if(x._hx_index==0){var b=x.v;var y=w;r.push(v[0]);r.push(y)}else{var S=w;var N=S.val;if(!(fe[N]!=null?d.getReserved(N):d.h[N])){var E=S.val;if(fe[E]!=null){d.setReserved(E,true)}else{d.h[E]=true}var k=this.config.resolveLibs;var R;if(k=="haxelib"){n.push(S)}else{R=k=="mixed";var O=R;var C=this.libHxml(S.val);var I=haxeshim_Scope.fs.readFile(C);switch(I._hx_index){case 0:var A=I.data;var F=haxeshim_Args.fromMultilineString(A,C,$bind(this,this.getVar));s=i.getResult(F).concat(s);break;case 1:var L=I.failure;if(sys_FileSystem.exists(C)){m(L)}else if(O){n.push(S)}else{m("-lib "+S.val+" is missing "+C)}break}}}}}break;default:var D=p;if(StringTools.endsWith(D,".hxml")){s=haxeshim_Args.readHxml(resolvePath(D),haxeshim_Scope.fs,$bind(this,this.getVar),i,v[0].pos).concat(s)}else{r.push(v[0])}}}var T=a.concat(r);var B=this.resolveThroughHaxelib(n);r=T.concat(i.getResult(B)).concat(l);return i.produce(new haxeshim_ResolvedArgs(t,r))},getBuilds:function(e){var t=new haxeshim_Errors;var r=[];var n=0;var i=t.getResult(haxeshim_Args.split(e,this.cwd,haxeshim_Scope.fs,$bind(this,this.getVar)));while(n<i.length){var s=i[n];++n;if(s.args.length>0){r.push(this.resolveArgs(s))}}return t.produce(r)},resolve:function(e){var t=[];var r=new haxeshim_Errors;var n=0;var i=r.getResult(haxeshim_Args.split(e,this.cwd,haxeshim_Scope.fs,$bind(this,this.getVar)));while(n<i.length){var s=i[n];++n;if(s.args.length>0){if(t.length!=0){t.push("--next")}if(s.cwd!=this.cwd){t.push("--cwd");t.push(s.cwd)}var a=0;var l=r.getResult(this.resolveArgs(s)).args;while(a<l.length){var o=l[a];++a;t.push(o.val)}}}var u=r.produce(42);if(u._hx_index==1){var c;c=u.failure.errors[0];var h=c;process.stdout.write(Std.string(h.message));process.stdout.write("\n");var d;var v=h.code;if(v==null){d=500}else{var m=v;d=m}process.exit(d)}return t},__class__:haxeshim_Scope};var haxeshim_Neko=function(){};t["haxeshim.Neko"]=haxeshim_Neko;haxeshim_Neko.__name__="haxeshim.Neko";haxeshim_Neko.setEnv=function(){if(haxeshim_Neko.isset){if(haxeshim_Os.IS_WINDOWS){var e=0;var t=haxeshim_Neko.ENV;var r=t==null?[]:Reflect.fields(t);while(e<r.length){var n=r[e];++e;var i=m.get(haxeshim_Neko.ENV,n);process.env[n]=i}}haxeshim_Neko.isset=false}};var haxeshim_ResolvedArgs=function(e,t){haxeshim_Args.call(this,e,t)};t["haxeshim.ResolvedArgs"]=haxeshim_ResolvedArgs;haxeshim_ResolvedArgs.__name__="haxeshim.ResolvedArgs";haxeshim_ResolvedArgs.__super__=haxeshim_Args;haxeshim_ResolvedArgs.prototype=$extend(haxeshim_Args.prototype,{resolve:function(e){if(haxe_io_Path.isAbsolute(e)){return e}else{return haxe_io_Path.join([this.cwd,e])}},checkClassPaths:function(){var e=new haxeshim_Errors;var t=0;var r=this.args.length;while(t<r){var n=t++;switch(this.args[n].val){case"--class-path":case"-cp":case"-p":if(n+1<this.args.length){var i=this.args[n+1];try{w.readdirSync(this.resolve(i.val))}catch(t){var s=t instanceof js__$Boot_HaxeError?t.val:t;e.fail("classpath "+i.val+" is not a directory or cannot be read from",i.pos)}}break;default:}}return e.produce($.Noise)},__class__:haxeshim_ResolvedArgs});var js__$Boot_HaxeError=function(e){Error.call(this);this.val=e;if(Error.captureStackTrace){Error.captureStackTrace(this,js__$Boot_HaxeError)}};t["js._Boot.HaxeError"]=js__$Boot_HaxeError;js__$Boot_HaxeError.__name__="js._Boot.HaxeError";js__$Boot_HaxeError.wrap=function(e){if(e instanceof Error){return e}else{return new js__$Boot_HaxeError(e)}};js__$Boot_HaxeError.__super__=Error;js__$Boot_HaxeError.prototype=$extend(Error.prototype,{__class__:js__$Boot_HaxeError});var js_lib__$ArrayBuffer_ArrayBufferCompat=function(){};t["js.lib._ArrayBuffer.ArrayBufferCompat"]=js_lib__$ArrayBuffer_ArrayBufferCompat;js_lib__$ArrayBuffer_ArrayBufferCompat.__name__="js.lib._ArrayBuffer.ArrayBufferCompat";js_lib__$ArrayBuffer_ArrayBufferCompat.sliceImpl=function(e,t){var r=new Uint8Array(this,e,t==null?null:t-e);var n=new Uint8Array(r.byteLength);n.set(r);return n.buffer};var b=r(3685);var y=r(5687);var S=r(1808);var N=r(1017);var E=r(7310);var k=r(4300).Buffer;var js_node_buffer__$Buffer_Helper=function(){};t["js.node.buffer._Buffer.Helper"]=js_node_buffer__$Buffer_Helper;js_node_buffer__$Buffer_Helper.__name__="js.node.buffer._Buffer.Helper";js_node_buffer__$Buffer_Helper.bytesOfBuffer=function(e){var t=Object.create(haxe_io_Bytes.prototype);t.length=e.byteLength;t.b=e;e.bufferValue=e;e.hxBytes=t;e.bytes=e;return t};var R=r(2781).PassThrough;var lix_cli_Cli=function(){};t["lix.cli.Cli"]=lix_cli_Cli;lix_cli_Cli.__name__="lix.cli.Cli";lix_cli_Cli.main=function(){var e=lix_cli_HaxeCmd.ensureScope();var t=process.argv.slice(2);lix_cli_Command.attempt(e,V.fromNiladic((function(){lix_cli_Cli.dispatch(t)})))};lix_cli_Cli.dispatch=function(e){var t="haxe";var r="lix";var n="lix - Libraries for Haxe";var i="git+https://github.com/lix-pm/lix.git";var s="git";var a="https://github.com/lix-pm/lix#readme";var l={"@vercel/ncc":"^0.38.1",yauzl:"github:lix-pm/yauzl",tar:"^6.0.1","graceful-fs":"^4.1.15"};var o="bin";var c="15.12.2";var h="back2dos";var d="node bin/postinstall.js";var v="ncc";var m="haxe --run Build";var p="MIT";var g="https://github.com/lix-pm/lix/issues";var b="bin/haxeshim.js";var y="bin/lix.js";var S="bin/haxelibshim.js";var N="bin/nekoshim.js";var E=c;var k=HxOverrides.remove(e,"--silent");var R=HxOverrides.remove(e,"--force");var I=HxOverrides.remove(e,"--global")||HxOverrides.remove(e,"-g");var A=HxOverrides.remove(e,"--flat");var F=haxeshim_Scope.seek({cwd:I?haxeshim_Scope.DEFAULT_ROOT:null});var L=O.ofString("+tink install github:haxetink/tink_${0}");var D=O.ofString("+coco install github:MVCoconut/coconut.${0}");e=lix_cli_Command.expand(e,[L,D,O.ofString("+lib install haxelib:${0}")]);var grab=function(t){var r=e.indexOf(t);if(r==-1){return null}else{var n=r;return e.splice(n,2)[1]}};var T=new lix_client_sources_GitLab(grab("--gl-private-token"));var B=grab("--gh-credentials");var P;var M;if(B==null){M=null}else{P=B.split(":");if(P.length==2){var H=P[1];var j=P[0];var V=""+j+":"+H;M=V}else{var G=B;M=haxeshim_Exec.die(422,"`--gh-credentials "+G+"` should be `--gh-credentials <user>:<token>`")}}var Z=new lix_client_sources_GitHub(M);var X=te._new(grab("--haxelib-url"));var K=new lix_client_sources_Web([$bind(T,T.intercept),$bind(Z,Z.intercept)]);var J=[K,new lix_client_sources_Haxelib(X),Z,T,new lix_client_sources_Git(F)];var Q=new haxe_ds_StringMap;var ee=0;while(ee<J.length){var re=J[ee];++ee;var ne=0;var ie=re.schemes();while(ne<ie.length){var se=ie[ne];++ne;if(fe[se]!=null){Q.setReserved(se,re)}else{Q.h[se]=re}}}var ae=Q;var resolve=function(e){var t=e.scheme;var r=fe[t]!=null?ae.getReserved(t):ae.h[t];if(r==null){return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Failure(new tink_core_TypedError(null,"Unknown scheme in url "+W.toString(e),{fileName:"src/lix/cli/Cli.hx",lineNumber:52,className:"lix.cli.Cli",methodName:"dispatch"}))))}else{var n=r;return n.processUrl(e)}};var le=haxeshim_Logger.get(k);var oe=new lix_client_haxe_Switcher(F,le);var ue=new lix_client_Libraries(F,resolve,(function(e){return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Failure(new tink_core_TypedError(501,"not implemented",{fileName:"src/lix/cli/Cli.hx",lineNumber:63,className:"lix.cli.Cli",methodName:"dispatch"}))))}),le,R);var ce="lix - Libraries for Haxe (v"+E+")";var he=new lix_cli_Command(C.ofString("install"),"<url> [as <lib[#ver]>]","install lib from specified url",(function(e){if(F.isGlobal&&!I){return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Failure(new tink_core_TypedError(null,"Current scope is global. Please use --global if you intend to install globally, or create a local scope with `lix scope create`.",{fileName:"src/lix/cli/Cli.hx",lineNumber:73,className:"lix.cli.Cli",methodName:"dispatch"}))))}else{switch(e.length){case 0:return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Failure(new tink_core_TypedError(null,"Missing url",{fileName:"src/lix/cli/Cli.hx",lineNumber:84,className:"lix.cli.Cli",methodName:"dispatch"}))));case 1:var t=e[0];var r=t;if(W.fromString(r).scheme==null){return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Failure(new tink_core_TypedError(null,"Did you mean `lix install haxelib:"+r+"`?",{fileName:"src/lix/cli/Cli.hx",lineNumber:81,className:"lix.cli.Cli",methodName:"dispatch"}))))}else{var n=t;return ue.installUrl(W.fromString(n),null,{flat:A})}break;case 2:var i=e[0];if(i=="haxe"){var s=e[1];return oe.install(s,{force:R})}else{var a=i;if(W.fromString(a).scheme==null){return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Failure(new tink_core_TypedError(null,"Did you mean `lix install haxelib:"+a+"`?",{fileName:"src/lix/cli/Cli.hx",lineNumber:81,className:"lix.cli.Cli",methodName:"dispatch"}))))}else{var l=e;return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Failure(new tink_core_TypedError(null,"too many arguments",{fileName:"src/lix/cli/Cli.hx",lineNumber:85,className:"lix.cli.Cli",methodName:"dispatch"}))))}}break;case 3:if(e[1]=="as"){var o=e[2];var u=e[0];var c=W.fromString(u);var h=lix_client_LibVersion.parse(o);return ue.installUrl(c,h,{flat:A})}else{var d=e;return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Failure(new tink_core_TypedError(null,"too many arguments",{fileName:"src/lix/cli/Cli.hx",lineNumber:85,className:"lix.cli.Cli",methodName:"dispatch"}))))}break;default:var v=e;return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Failure(new tink_core_TypedError(null,"too many arguments",{fileName:"src/lix/cli/Cli.hx",lineNumber:85,className:"lix.cli.Cli",methodName:"dispatch"}))))}}}));var de=new lix_cli_Command(C.ofString("install haxe"),"<version>|<alias>","install specified haxe version",null);var ve=new lix_cli_Command(C.ofString("use"),"haxe <version>|<alias>","use specified haxe version",(function(e){if(e.length==2){if(e[0]=="haxe"){var t=e[1];return q.next(oe.resolveInstalled(U.ofString(t)),$bind(oe,oe.switchTo))}else{return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Failure(new tink_core_TypedError(null,"invalid arguments",{fileName:"src/lix/cli/Cli.hx",lineNumber:91,className:"lix.cli.Cli",methodName:"dispatch"}))))}}else{return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Failure(new tink_core_TypedError(null,"invalid arguments",{fileName:"src/lix/cli/Cli.hx",lineNumber:91,className:"lix.cli.Cli",methodName:"dispatch"}))))}}));var me=new lix_cli_Command(C.ofString("dev"),"<lib> <path>","use dev version of library",(function(e){if(e.length==2){var t=e[1];var r=e[0];return ue.dev(r,t)}else{return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Failure(new tink_core_TypedError(null,"invalid arguments",{fileName:"src/lix/cli/Cli.hx",lineNumber:95,className:"lix.cli.Cli",methodName:"dispatch"}))))}}));var pe=new lix_cli_Command(C.ofString("download haxe"),"<version>|<alias>","download specified haxe version",null);var _e=new lix_cli_Command(C.ofString("scope"),"[create|delete]","creates or deletes the current scope or\ninspects it if no argument is supplied",(function(e){switch(e.length){case 0:le.info((F.isGlobal?"[global]":"[local]")+(" "+F.scopeDir));return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success($.Noise)));case 1:switch(e[0]){case"create":return q.next(haxeshim_Scope.create(F.cwd,{version:F.config.version,resolveLibs:F.isGlobal?"scoped":F.config.resolveLibs}),(function(e){le.success("created scope in "+F.cwd);return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success($.Noise)))}));case"delete":if(F.isGlobal){return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Failure(new tink_core_TypedError(null,"Cannot delete global scope",{fileName:"src/lix/cli/Cli.hx",lineNumber:110,className:"lix.cli.Cli",methodName:"dispatch"}))))}else{F.delete();le.success("deleted scope in "+F.scopeDir);return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success($.Noise)))}break;default:var t=e;return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Failure(new tink_core_TypedError(null,"Invalid arguments",{fileName:"src/lix/cli/Cli.hx",lineNumber:122,className:"lix.cli.Cli",methodName:"dispatch"}))))}break;default:var r=e;return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Failure(new tink_core_TypedError(null,"Invalid arguments",{fileName:"src/lix/cli/Cli.hx",lineNumber:122,className:"lix.cli.Cli",methodName:"dispatch"}))))}}));var ge=new lix_cli_Command(C.ofString("haxe-versions"),"","lists currently downloaded versions",(function(e){if(e.length==0){return q.next(oe.officialInstalled(z.IncludePrereleases),(function(e){return q.next(oe.nightliesInstalled(),(function(t){var highlight=function(e){if(e==F.config.version){return" -> "+e}else{return"    "+e}};process.stdout.write("");process.stdout.write("\n");process.stdout.write("Official releases:");process.stdout.write("\n");process.stdout.write("");process.stdout.write("\n");var r=$getIterator(e);while(r.hasNext()){var n=r.next();var i=highlight(n);process.stdout.write(Std.string(i));process.stdout.write("\n")}if($getIterator(t).hasNext()){process.stdout.write("");process.stdout.write("\n");process.stdout.write("Nightly builds:");process.stdout.write("\n");process.stdout.write("");process.stdout.write("\n");var s=$getIterator(t);while(s.hasNext()){var a=s.next();var l=highlight(a.hash)+DateTools.format(a.published,"  (%Y-%m-%d %H:%M)");process.stdout.write(Std.string(l));process.stdout.write("\n")}}process.stdout.write("");process.stdout.write("\n");return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success($.Noise)))}))}))}else{return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Failure(new tink_core_TypedError(null,"command `list` does expect arguments",{fileName:"src/lix/cli/Cli.hx",lineNumber:159,className:"lix.cli.Cli",methodName:"dispatch"}))))}}));var we=new lix_cli_Command(C.ofString("download"),"[<url[#lib[#ver]]>]","download lib from url if specified,\notherwise download missing libs",(function(e){switch(e.length){case 0:return q.next(lix_client_haxe_Switcher.ensureNeko(le),(function(e){var t=oe.resolveOnline(U.ofString(F.config.version));var r=$bind(oe,oe.download);var n={force:false};return q.next(q.next(t,(function(e){return r(e,n)})),(function(e){new haxeshim_HaxeCli(F).installLibs(k);return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success($.Noise)))}))}));case 1:var t=W.fromString(e[0]);return q.noise(ue.downloadUrl(t));case 2:if(e[0]=="haxe"){var r=e[1];return q.noise(oe.resolveAndDownload(r,{force:R}))}else{var n=e;return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Failure(new tink_core_TypedError(null,"too many arguments",{fileName:"src/lix/cli/Cli.hx",lineNumber:205,className:"lix.cli.Cli",methodName:"dispatch"}))))}break;case 3:var i=e[2];var s=e[0];switch(e[1]){case"as":var a=i;var l=s;var o=StringTools.replace(a,"#","/");var u=F.libCache+("/"+o);var shorten=function(e){if(e.length>40){return HxOverrides.substr(e,0,37)+"..."}else{return e}};if(sys_FileSystem.exists(u)){return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Failure(new tink_core_TypedError(null,"`download <url> as <ver>` is no longer supported",{fileName:"src/lix/cli/Cli.hx",lineNumber:175,className:"lix.cli.Cli",methodName:"dispatch"}))))}else{var c=new Array(e.length);var h=0;var d=e.length;while(h<d){var v=h++;c[v]=shorten(e[v])}var m="Warning: Processing obsolete `download "+c.join(" ")+"`.\n        Please reinstall library in a timely manner!\n\n";le.warning(m);return q.noise(q.next(q.next(ue.downloadUrl(W.fromString(l),{into:o}),(function(e){var t=e;return Y._tryMap(haxeshim_Fs.ensureDir(u),(function(e){return t}))})),(function(e){w.renameSync(lix_client_DownloadedArchive.getAbsRoot(e.storageRoot,e.relRoot),u);return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success(e)))})))}break;case"into":var p=i;var _=s;return q.noise(ue.downloadUrl(W.fromString(_),{into:p}));default:var g=e;return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Failure(new tink_core_TypedError(null,"too many arguments",{fileName:"src/lix/cli/Cli.hx",lineNumber:205,className:"lix.cli.Cli",methodName:"dispatch"}))))}break;default:var b=e;return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Failure(new tink_core_TypedError(null,"too many arguments",{fileName:"src/lix/cli/Cli.hx",lineNumber:205,className:"lix.cli.Cli",methodName:"dispatch"}))))}}));var xe=new lix_cli_Command(C.ofString("run"),"lib ...args","run a library",(function(e){if(e.length==0){return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Failure(new tink_core_TypedError(null,"no library specified",{fileName:"src/lix/cli/Cli.hx",lineNumber:209,className:"lix.cli.Cli",methodName:"dispatch"}))))}else{var t=e;return q.noise(q.next(F.getLibCommand(t),(function(e){return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(e()))})))}}));var be=new lix_cli_Command(["--version","-v"],"","print version",(function(e){if(e.length>0){return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Failure(new tink_core_TypedError(null,"too many arguments",{fileName:"src/lix/cli/Cli.hx",lineNumber:215,className:"lix.cli.Cli",methodName:"dispatch"}))))}else{process.stdout.write(Std.string(E));process.stdout.write("\n");return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success($.Noise)))}}));lix_cli_Command.dispatch(e,ce,[he,de,ve,me,pe,_e,ge,we,xe,be,new lix_cli_Command(C.ofString("run-haxelib"),"path ...args","invoke a haxelib at a given path following haxelib's conventions",(function(e){if(e.length==0){return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Failure(new tink_core_TypedError(null,"no path supplied",{fileName:"src/lix/cli/Cli.hx",lineNumber:223,className:"lix.cli.Cli",methodName:"dispatch"}))))}else{new haxeshim_HaxelibCli(F).run(e.slice(1));return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success($.Noise)))}}))],[],(function(e){var t=e[0];var r;if(t==null){return u.None}else{switch(t){case"--library":case"--run":case"-L":case"-lib":return u.Some((function(){new haxeshim_HaxeCli(F).dispatch(e);return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success($.Noise)))}));default:r=StringTools.endsWith(t,".hxml");if(r==true){return u.Some((function(){new haxeshim_HaxeCli(F).dispatch(e);return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success($.Noise)))}))}else{var n=t;if(sys_FileSystem.exists(F.libHxml(n))){return u.Some((function(){new haxeshim_HaxelibCli(F).run(e);return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success($.Noise)))}))}else{var i=t;if(lix_cli_Cli.isClassName(i)){return u.Some((function(){var absolute=function(e){return haxe_io_Path.join([F.scopeDir,e])};var f1=function(e){var t=haxe_io_Path.withoutDirectory(haxe_io_Path.removeTrailingSlashes(F.scopeDir));var r={};return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst({classPath:"",name:t,dependencies:r}))};var t=q.next(haxeshim_Fs.get(absolute("haxelib.json"),{fileName:"src/lix/cli/Cli.hx",lineNumber:247,className:"lix.cli.Cli",methodName:"dispatch"}),(function(e){var t=e;return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(tink_core_TypedError.catchExceptions((function(){return JSON.parse(t)}),null,{fileName:"src/lix/cli/Cli.hx",lineNumber:248,className:"lix.cli.Cli",methodName:"dispatch"})))})).flatMap((function(e){switch(e._hx_index){case 0:var t=e.data;return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(t));case 1:var r=e.failure;return f1(r)}}));return Y.next(t.gather(),(function(t){var r=StringTools.replace(i,".","/")+".hx";var n=[{file:r,args:["-cp",absolute("")]},{file:"scripts/"+r,args:["-cp",absolute("scripts")]}];var s=t.classPath;if(s!=null){if(s!=""){var a=s;var l=""+a+"/"+r;var o;if(sys_FileSystem.exists(F.libHxml(t.name))){o=["-lib",t.name]}else{var u=[];var c=t.dependencies;if(c!=null){var h=c;var d=h;var v=d;var m=Reflect.fields(d);var p=0;while(p<m.length){var g=m[p++];var w={value:v[g],key:g};var b=w.key;var y=w.value;u.push("-lib");u.push(b)}}o=u.concat(["-cp",absolute(a)])}n.push({file:l,args:o})}}var S=0;while(S<n.length){var N=[n[S]];++S;var E=haxe_io_Path.join([F.scopeDir,N[0].file]);if(sys_FileSystem.exists(E)!=false){var k=[E];return q.next(haxeshim_Fs.get(k[0],{fileName:"src/lix/cli/Cli.hx",lineNumber:290,className:"lix.cli.Cli",methodName:"dispatch"}),function(t,r){return function(n){var s=[];var a=n.split("\n");var l=0;if(StringTools.startsWith(a[0],"#!")){++l}while(true){var o=StringTools.trim(a[l++]);if(o!=""){var u=o;if(StringTools.startsWith(u,"//!")){var c=0;var h=HxOverrides.substr(u,3,null).split(" ");while(c<h.length){var d=h[c];++c;var v=StringTools.trim(d);if(v!=""){var m=v;s.push(m)}}}else{break}}}s=s.concat(r[0].args);var p=e.slice(1);var g=F.getBuilds(s);switch(g._hx_index){case 0:var w=g.data;if(w.length==1){var b=w[0];switch(b._hx_index){case 0:var y=b.data;var S=y.checkClassPaths();if(S._hx_index==1){var N=S.failure;var E=N.result;var k=N.errors;var R=k[0];return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Failure(new tink_core_TypedError(R.code,haxeshim_PosTools.toString(R.pos)+": "+R.message,{fileName:"src/lix/cli/Cli.hx",lineNumber:320,className:"lix.cli.Cli",methodName:"dispatch"}))))}else{var O=y.args;var C=y.cwd;var I=[];var A=0;var L=O;while(A<L.length){var D=L[A];++A;I.push(D.val)}var T=I;var B=null;var P=0;var M=T.length-1;e:while(P<M){var z=P++;switch(T[z]){case"--define":case"-D":var U=T[z+1];var H;if(U=="hxnodejs"){var j=T.indexOf("-js");if(j==-1){var W=haxe_io_Path.withExtension(haxe_io_Path.withoutExtension(t[0]),"js");T=T.concat(["-js",W]);B=W}else{var V=j;B=T[V+1]}break e}else{H=StringTools.startsWith(U,"hxnodejs=");if(H==true){var G=T.indexOf("-js");if(G==-1){var Y=haxe_io_Path.withExtension(haxe_io_Path.withoutExtension(t[0]),"js");T=T.concat(["-js",Y]);B=Y}else{var Z=G;B=T[Z+1]}break e}}break;default:}}T=T.concat(B==null?["--run",i].concat(p):["-main",i]);var X=F.haxeInstallation.compiler;var K=F.haxeInstallation.env();var J=haxeshim_Exec.sync(X,C,T,K);switch(J._hx_index){case 0:var Q=J.data;if(Q==0){if(B==null){return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success($.Noise)))}else{return q.next(q.next(haxeshim_Fs.get(B,{fileName:"src/lix/cli/Cli.hx",lineNumber:354,className:"lix.cli.Cli",methodName:"dispatch"}),function(){return function(e){var t=['try { require("fs").unlinkSync(__filename); } catch (e) {}',e].join("\n");return haxeshim_Fs.save(B,_.ofString(t),{fileName:"src/lix/cli/Cli.hx",lineNumber:356,className:"lix.cli.Cli",methodName:"dispatch"})}}()),function(){return function(e){var t=[B].concat(p);var r=haxeshim_Exec.sync("node",C,t);switch(r._hx_index){case 0:var n=r.data;if(n==0){return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success($.Noise)))}else{var i=n;return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Failure(new tink_core_TypedError(i,"node exited with code "+i,{fileName:"src/lix/cli/Cli.hx",lineNumber:364,className:"lix.cli.Cli",methodName:"dispatch"}))))}break;case 1:var s=r.failure;return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Failure(s)))}}}())}}else{var ee=Q;return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Failure(new tink_core_TypedError(ee,"haxe exited with code "+ee,{fileName:"src/lix/cli/Cli.hx",lineNumber:369,className:"lix.cli.Cli",methodName:"dispatch"}))))}break;case 1:var te=J.failure;return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Failure(te)))}}break;case 1:var re=b.failure;var ne=re.result;var ie=re.errors;var se=ie[0];return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Failure(new tink_core_TypedError(se.code,haxeshim_PosTools.toString(se.pos)+": "+se.message,{fileName:"src/lix/cli/Cli.hx",lineNumber:320,className:"lix.cli.Cli",methodName:"dispatch"}))))}}else{return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Failure(new tink_core_TypedError(null,"multiple builds defined",{fileName:"src/lix/cli/Cli.hx",lineNumber:373,className:"lix.cli.Cli",methodName:"dispatch"}))))}break;case 1:var ae=g.failure;var le=ae.result;var oe=ae.errors;var ue=oe[0];return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Failure(new tink_core_TypedError(ue.code,haxeshim_PosTools.toString(ue.pos)+": "+ue.message,{fileName:"src/lix/cli/Cli.hx",lineNumber:320,className:"lix.cli.Cli",methodName:"dispatch"}))))}}}(k,N))}}return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Failure(new tink_core_TypedError(404,"Class not found: "+i,{fileName:"src/lix/cli/Cli.hx",lineNumber:380,className:"lix.cli.Cli",methodName:"dispatch"}))))}))}))}else{return u.None}}}}}})).handle(lix_cli_Command.reportOutcome)};lix_cli_Cli.isClassName=function(e){var t=HxOverrides.cca(e.split(".").pop(),0);if(t>=65){return t<=90}else{return false}};var O={};t["lix.cli._Command.CommandExpander_Impl_"]=O;O.__name__="lix.cli._Command.CommandExpander_Impl_";O.ofString=function(e){var t=e.indexOf(" ");if(t==-1){throw new js__$Boot_HaxeError('invalid expander syntax in "'+e+'"')}else{var r=t;return O.make(HxOverrides.substr(e,0,r),HxOverrides.substr(e,r+1,null))}};O.make=function(e,t){var r=new EReg("\\$\\{([0-9]+)\\}","g");var n=[];var i=-1;r.map(t,(function(e){n.pop();var t=e.matchedLeft();var r=e.matchedRight();n.push((function(e){return t}));var s=Std.parseInt(e.matched(1));if(s>i){i=s}n.push((function(e){return e[s]}));n.push((function(e){return r}));return""}));var apply=function(e){var t=[];var r=0;var i=[];var s=0;while(s<n.length){var a=n[s];++s;i.push(a(e))}var l=i.join("").split(" ");while(r<l.length){var o=l[r];++r;var u=StringTools.trim(o);var c;if(u==""){continue}else{var h=u;c=h}t.push(c)}return t};return function(t){var r=0;var n=t.length;while(r<n){var s=r++;if(t[s]==e){var a=t.slice(0,s);var l=t.slice(s+1,s+i+2);return u.Some(a.concat(apply(l)).concat(t.slice(s+i+2)))}}return u.None}};var C={};t["lix.cli._Command.CommandName_Impl_"]=C;C.__name__="lix.cli._Command.CommandName_Impl_";C.ofString=function(e){return[e]};C.toString=function(e){if(e.length==1){var t=e[0];return t}else{var r=e;return r.join(" / ")}};C.eq=function(e,t){return e.indexOf(t)!=-1};var lix_cli_Command=function(e,t,r,n){this.name=e;this.args=t;this.doc=r;this.exec=n};t["lix.cli.Command"]=lix_cli_Command;lix_cli_Command.__name__="lix.cli.Command";lix_cli_Command.attempt=function(e,t){var r=X.ofSync(lix_cli_Command.reportError);var n=e.flatMap((function(e){switch(e._hx_index){case 0:var t=e.data;return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(t));case 1:var n=e.failure;return r(n)}}));n.gather().handle(t)};lix_cli_Command.reportError=function(e){haxeshim_Logger.get().error(e.message);process.exit(e.code);return null};lix_cli_Command.reportOutcome=function(e){if(e._hx_index==1){var t=e.failure;lix_cli_Command.reportError(t)}};lix_cli_Command.expand=function(e,t){var r=true;while(r){r=false;var n=0;while(n<t.length){var i=t[n];++n;var s=i(e);if(s._hx_index==0){var a=s.v;e=a;r=true}}}return e};lix_cli_Command.dispatch=function(e,t,r,n,i){var s=e.shift();if(s==null){process.stdout.write(Std.string(t));process.stdout.write("\n");process.stdout.write("");process.stdout.write("\n");var a=0;var l=0;while(l<r.length){var o=r[l];++l;var u=0;var c=0;var h=o.args.split("\n");while(c<h.length){var d=h[c];++c;if(d.length>u){u=d.length}}var v=u;var m=C.toString(o.name).length+v;if(m>a){a=m}}a+=7;var pad=function(e){return StringTools.lpad(e," ",a)};process.stdout.write("  Supported commands:");process.stdout.write("\n");process.stdout.write("");process.stdout.write("\n");var p=0;while(p<r.length){var _=r[p];++p;var g=_.args.split("\n");var w="  "+C.toString(_.name);var b=g[0];var y;if(b==null){y=""}else if(b==""){y=""}else{var S=b;y=" "+S}g[0]=w+y+" : ";var N=1;var E=g.length;while(N<E){var k=N++;g[k]+="   "}var R=_.doc.split("\n");while(g.length<R.length)g.push("");while(g.length>R.length)R.push("");var O=0;var I=g.length;while(O<I){var A=O++;var F=pad(g[A]);process.stdout.write(Std.string(F+R[A]));process.stdout.write("\n")}}var L=0;while(L<n.length){var D=n[L];++L;process.stdout.write("");process.stdout.write("\n");process.stdout.write(Std.string("  "+D.name));process.stdout.write("\n");process.stdout.write("");process.stdout.write("\n");var T=0;var B=D.value;while(T<B.length){var P=B[T];++T;var M=pad(""+P.name+" : ")+P.value;process.stdout.write(Std.string(M));process.stdout.write("\n")}}process.stdout.write("");process.stdout.write("\n");return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success($.Noise)))}else{switch(s){case"--help":case"-help":case"/?":case"?":case"help":process.stdout.write(Std.string(t));process.stdout.write("\n");process.stdout.write("");process.stdout.write("\n");var z=0;var U=0;while(U<r.length){var H=r[U];++U;var j=0;var W=0;var V=H.args.split("\n");while(W<V.length){var G=V[W];++W;if(G.length>j){j=G.length}}var Y=j;var q=C.toString(H.name).length+Y;if(q>z){z=q}}z+=7;var pad1=function(e){return StringTools.lpad(e," ",z)};process.stdout.write("  Supported commands:");process.stdout.write("\n");process.stdout.write("");process.stdout.write("\n");var Z=0;while(Z<r.length){var X=r[Z];++Z;var K=X.args.split("\n");var J="  "+C.toString(X.name);var Q=K[0];var ee;if(Q==null){ee=""}else if(Q==""){ee=""}else{var te=Q;ee=" "+te}K[0]=J+ee+" : ";var re=1;var ne=K.length;while(re<ne){var ie=re++;K[ie]+="   "}var se=X.doc.split("\n");while(K.length<se.length)K.push("");while(K.length>se.length)se.push("");var ae=0;var le=K.length;while(ae<le){var oe=ae++;var ue=pad1(K[oe]);process.stdout.write(Std.string(ue+se[oe]));process.stdout.write("\n")}}var ce=0;while(ce<n.length){var he=n[ce];++ce;process.stdout.write("");process.stdout.write("\n");process.stdout.write(Std.string("  "+he.name));process.stdout.write("\n");process.stdout.write("");process.stdout.write("\n");var fe=0;var de=he.value;while(fe<de.length){var ve=de[fe];++fe;var me=pad1(""+ve.name+" : ")+ve.value;process.stdout.write(Std.string(me));process.stdout.write("\n")}}process.stdout.write("");process.stdout.write("\n");return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success($.Noise)));default:var pe=s;var _e=0;while(_e<r.length){var ge=r[_e];++_e;if(C.eq(ge.name,pe)){return ge.exec(e)}}if(i!=null){e.unshift(pe);var we=i(e);if(we._hx_index==0){var xe=we.v;return xe()}}return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Failure(new tink_core_TypedError(404,"Unknown command "+pe+". Try `lix help`.",{fileName:"src/lix/cli/Command.hx",lineNumber:201,className:"lix.cli.Command",methodName:"dispatch"}))))}}};lix_cli_Command.prototype={__class__:lix_cli_Command};var lix_cli_HaxeCmd=function(){};t["lix.cli.HaxeCmd"]=lix_cli_HaxeCmd;lix_cli_HaxeCmd.__name__="lix.cli.HaxeCmd";lix_cli_HaxeCmd.ensureScope=function(){if(haxeshim_Scope.exists(haxeshim_Scope.DEFAULT_ROOT)){return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success($.Noise)))}else{return haxeshim_Scope.create(haxeshim_Scope.DEFAULT_ROOT,{version:"stable",resolveLibs:"mixed"})}};var I=n["lix.client.ArchiveKind"]={__ename__:"lix.client.ArchiveKind",__constructs__:["Zip","Tar","Custom"],Zip:{_hx_index:0,__enum__:"lix.client.ArchiveKind",toString:$estr},Tar:{_hx_index:1,__enum__:"lix.client.ArchiveKind",toString:$estr},Custom:(i=function(e){return{_hx_index:2,load:e,__enum__:"lix.client.ArchiveKind",toString:$estr}},i.__params__=["load"],i)};var A=n["lix.client.ArchiveDestination"]={__ename__:"lix.client.ArchiveDestination",__constructs__:["Fixed","Computed"],Fixed:(i=function(e){return{_hx_index:0,path:e,__enum__:"lix.client.ArchiveDestination",toString:$estr}},i.__params__=["path"],i),Computed:(i=function(e){return{_hx_index:1,f:e,__enum__:"lix.client.ArchiveDestination",toString:$estr}},i.__params__=["f"],i)};var F=n["lix.client.ArchiveDependency"]={__ename__:"lix.client.ArchiveDependency",__constructs__:["FromUrl","FromHxml"],FromUrl:(i=function(e){return{_hx_index:0,u:e,__enum__:"lix.client.ArchiveDependency",toString:$estr}},i.__params__=["u"],i),FromHxml:(i=function(e){return{_hx_index:1,path:e,__enum__:"lix.client.ArchiveDependency",toString:$estr}},i.__params__=["path"],i)};var lix_client_ArchiveInfos=function(e,t,r,n,i,s,a,l,o){this.name=e;this.version=t;this.classPath=r;this.hasNdll=n;this.runAs=i;this.dependencies=s;this.haxeshimDependencies=a;this.postDownload=l;this.postInstall=o};t["lix.client.ArchiveInfos"]=lix_client_ArchiveInfos;lix_client_ArchiveInfos.__name__="lix.client.ArchiveInfos";lix_client_ArchiveInfos.prototype={__class__:lix_client_ArchiveInfos};var L={};t["lix.client._Archives.HaxeshimDependencies_Impl_"]=L;L.__name__="lix.client._Archives.HaxeshimDependencies_Impl_";L.keyValueIterator=function(e){if(e==null){return HxOverrides.iter([])}else{var t=e;return new haxe_iterators_MapKeyValueIterator(t)}};var D={};t["lix.client._Archives.ArchiveDependencies_Impl_"]=D;D.__name__="lix.client._Archives.ArchiveDependencies_Impl_";D.ofHaxeshim=function(e){var t=[];var r=L.keyValueIterator(e);while(r.hasNext()){var n=r.next();var i=n.key;var s=n.value;t.push(new tink_core_NamedWith(i,F.FromHxml(s)))}var a=t;a.sort((function(e,t){return Reflect.compare(e.name,t.name)}));return a};D.ofMap=function(e){var t=[];var r=new haxe_iterators_MapKeyValueIterator(e);while(r.hasNext()){var n=r.next();var i=n.key;var s=n.value;t.push(new tink_core_NamedWith(i,s))}var a=t;a.sort((function(e,t){return Reflect.compare(e.name,t.name)}));return a};var lix_client_DownloadedArchive=function(e,t,r,n){this.alreadyDownloaded=true;this.storageRoot=t;this.relRoot=e;this.job=r;this.infos=n};t["lix.client.DownloadedArchive"]=lix_client_DownloadedArchive;lix_client_DownloadedArchive.__name__="lix.client.DownloadedArchive";lix_client_DownloadedArchive.getAbsRoot=function(e,t){return haxe_io_Path.removeTrailingSlashes(""+e+"/"+t)};lix_client_DownloadedArchive.escape=function(e){if(e==null){return null}var t=0;var r=lix_client_DownloadedArchive.RESERVED.length;while(t<r){var n=t++;e=StringTools.replace(e,lix_client_DownloadedArchive.RESERVED.charAt(n),"_")}return e};lix_client_DownloadedArchive.path=function(e){var t=lix_client_DownloadedArchive.escape;var r=new Array(e.length);var n=0;var i=e.length;while(n<i){var s=n++;r[s]=t(e[s])}return r.join("/")};lix_client_DownloadedArchive.fresh=function(e,t,r,n){var i=""+e+"/"+lix_client_DownloadedArchive.seekRoot(e);return q.next(lix_client_DownloadedArchive.readInfos(i,n.lib),(function(s){var a;if(r==null){var l=n.dest;var o;switch(l._hx_index){case 0:var u=l.path;o=u;break;case 1:var c=l.f;o=c(s);break}a=lix_client_DownloadedArchive.path(o)}else{a=r}var h=new lix_client_DownloadedArchive(a,t,n,s);h.alreadyDownloaded=false;var d=lix_client_DownloadedArchive.getAbsRoot(h.storageRoot,h.relRoot);if(s.haxeshimDependencies!=null){var v=haxe_io_Path.removeTrailingSlashes(i).length;var m=s.name;var p=s.version;var _=s.classPath;var g=s.hasNdll;var w=s.runAs;var b=s.dependencies;var y=new haxe_ds_StringMap;var S=L.keyValueIterator(s.haxeshimDependencies);while(S.hasNext()){var N=S.next();var E=N.key;var k=N.value;var R=d+HxOverrides.substr(k,v,null);if(fe[E]!=null){y.setReserved(E,R)}else{y.h[E]=R}}var O=new lix_client_ArchiveInfos(m,p,_,g,w,b,y,s.postDownload,s.postInstall);h.infos=O}var C=null;var I=lix_client_DownloadedArchive.getAbsRoot(h.storageRoot,h.relRoot);var A=q.next(q.next(q.next(q.next(haxeshim_Fs.exists(I),(function(e){if(e){C=""+I+"-archived@"+(new Date).getTime();return haxeshim_Fs.move(I,C)}else{return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success($.Noise)))}})),(function(e){var t=lix_client_DownloadedArchive.getAbsRoot(h.storageRoot,h.relRoot);return haxeshim_Fs.move(i,t)})),(function(e){return haxeshim_Fs.delete(C)})),(function(t){return haxeshim_Fs.delete(e)}));var F=h;return Y._tryMap(A,(function(e){return F}))}))};lix_client_DownloadedArchive.existent=function(e,t,r){return q.next(lix_client_DownloadedArchive.readInfos(lix_client_DownloadedArchive.getAbsRoot(t,e),r.lib),(function(n){return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success(new lix_client_DownloadedArchive(e,t,r,n))))}))};lix_client_DownloadedArchive.seekRoot=function(e){var t=w.readdirSync(e);if(t.length==1){var r=t[0];if(sys_FileSystem.isDirectory(""+e+"/"+r)){return""+r+"/"+lix_client_DownloadedArchive.seekRoot(""+e+"/"+r)}else{return""}}else{return""}};lix_client_DownloadedArchive.readInfos=function(e,t){var r=w.readdirSync(e);var guessClassPath=function(){if(r.indexOf("src")!=-1){return"src"}else if(r.indexOf("Sources")!=-1){return"Sources"}else if(r.indexOf("hx")!=-1){return"hx"}else{return""}};if(t==null){t=lix_client_LibVersion.UNDEFINED}var n;if(r.indexOf(".haxerc")!=-1&&r.indexOf("haxe_libraries")!=-1){var i=""+e+"/haxe_libraries";var s=new haxe_ds_StringMap;var a=0;var l=w.readdirSync(i);while(a<l.length){var o=l[a];++a;if(haxe_io_Path.extension(o)=="hxml"){var c=haxe_io_Path.withoutExtension(o);var h=""+i+"/"+o;if(fe[c]!=null){s.setReserved(c,h)}else{s.h[c]=h}}}n=s}else{n=null}var d=r.indexOf("ndll")!=-1;var v;if(r.indexOf("haxelib.json")!=-1){var m=JSON.parse(w.readFileSync(""+e+"/haxelib.json",{encoding:"utf8"}));var p=m.name;var _=m.version;var g;var b=m.classPath;if(b==null){g=""}else{var y=b;g=y}var S=m.dependencies;var N;if(S==null){N=D.ofHaxeshim(new haxe_ds_StringMap)}else{var E=S;var k=new haxe_ds_StringMap;var R=E;var O=R;var C=Reflect.fields(R);var I=0;while(I<C.length){var A=C[I++];var L={value:O[A],key:A};var T=L.key;var B=L.value;var P;var M;var z;switch(B){case"":case"*":z=W.fromString("haxelib:"+T);break;default:P=W.fromString(B).scheme;if(P==null){var U=B;z=W.fromString("haxelib:"+T+"#"+U)}else{M=W.fromString(B);var H=M.query==null?M.path:M.path+"?"+M.query;var j=M.scheme;var V=M.query;var G=M.payload;var $=M.path;var Y=M.hosts;var q=M.host;var Z=M.hash;var X=M.auth;if(j==null){var K=B;z=W.fromString(K)}else if(j=="git"){if(V==null){var J=W.fromString(G);var Q=J.query==null?J.path:J.path+"?"+J.query;var ee=J.scheme;var re=J.query;var ne=J.payload;var ie=J.path;var se=J.hosts;var ae=J.host;var le=J.hash;var oe=J.auth;if(ae==null){var ue=B;z=W.fromString(ue)}else{var ce=te.get_port(ae);var he=te.get_name(ae);if(he==null){var de=B;z=W.fromString(de)}else{switch(he){case"github.com":case"gitlab.com":if(ee==null){var ve=B;z=W.fromString(ve)}else if(ee=="https"){var me=J;z=me}else{var pe=B;z=W.fromString(pe)}break;default:var _e=B;z=W.fromString(_e)}}}}else{var ge=W.fromString(G);var we=ge.query==null?ge.path:ge.path+"?"+ge.query;var xe=ge.scheme;var be=ge.query;var ye=ge.payload;var Se=ge.path;var Ne=ge.hosts;var Ee=ge.host;var ke=ge.hash;var Re=ge.auth;if(Ee==null){var Oe=B;z=W.fromString(Oe)}else{var Ce=te.get_port(Ee);var Ie=te.get_name(Ee);if(Ie==null){var Ae=B;z=W.fromString(Ae)}else{switch(Ie){case"github.com":case"gitlab.com":if(xe==null){var Fe=B;z=W.fromString(Fe)}else if(xe=="https"){var Le=ge;z=Le}else{var De=B;z=W.fromString(De)}break;default:var Te=B;z=W.fromString(Te)}}}}}else{var Be=B;z=W.fromString(Be)}}}var Pe=F.FromUrl(z);if(fe[T]!=null){k.setReserved(T,Pe)}else{k.h[T]=Pe}}N=D.ofMap(k)}v=new lix_client_ArchiveInfos(p,_,g,d,(function(e){if(sys_FileSystem.exists(""+e.libRoot+"/run.n")||m.main!=null){return u.Some("haxelib run-dir "+m.name+' "$'+'{DOWNLOAD_LOCATION}"')}else{return u.None}}),N,n,m.postDownload,m.postInstall)}else if(r.indexOf("package.json")!=-1){var Me=JSON.parse(w.readFileSync(""+e+"/package.json",{encoding:"utf8"}));v=new lix_client_ArchiveInfos(Me.name,Me.version,guessClassPath(),d,(function(e){return u.None}),D.ofHaxeshim(n),null,null,null)}else{var ze=t.name;var Ue=new tink_core__$Lazy_LazyConst("untitled");var He;if(ze._hx_index==0){var je=ze.v;He=je}else{He=Ue.get()}var We=t.version;var Ve=new tink_core__$Lazy_LazyConst("0.0.0");var Ge;if(We._hx_index==0){var $e=We.v;Ge=$e}else{Ge=Ve.get()}v=new lix_client_ArchiveInfos(He,Ge,guessClassPath(),d,(function(e){return u.None}),D.ofHaxeshim(n),null,null,null)}return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success(v)))};lix_client_DownloadedArchive.prototype={__class__:lix_client_DownloadedArchive};var T=r(8781);var lix_client_Download=function(){};t["lix.client.Download"]=lix_client_Download;lix_client_Download.__name__="lix.client.Download";lix_client_Download.text=function(e){return q.next(lix_client_Download.bytes(e),(function(e){return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success(e.toString())))}))};lix_client_Download.bytes=function(e){return lix_client_Download.download(e,(function(e,t,r){lix_client_Download.buffered(t).handle(r)}))};lix_client_Download.buffered=function(e){return Y.async((function(t){var r=[];e.on("data",$bind(r,$arrayPush));e.on("end",(function(){var e=x.Success(js_node_buffer__$Buffer_Helper.bytesOfBuffer(k.concat(r)));t(e)}))}))};lix_client_Download.archive=function(e,t,r,n){var i=lix_client_Download.withLogger(n,(function(n,i,s){if(i.headers["content-type"]=="application/zip"||StringTools.endsWith(e,".zip")||StringTools.endsWith(n,".zip")){lix_client_Download.unzip(e,r,t,i,s)}else{lix_client_Download.untar(e,r,t,i,s)}}));return lix_client_Download.download(e,i)};lix_client_Download.unzip=function(e,t,n,i,s){q.next(lix_client_Download.buffered(i),(function(i){return Y.async((function(a){var l=i.length-4;while(l-- >0)if(i.b[l]==80&&i.b[l+1]==75&&i.b[l+2]==5&&i.b[l+3]==6){i.b[l+20]=0;i.b[l+21]=0;i=i.sub(0,l+22);break}if(l==0){var o=x.Failure(new tink_core_TypedError(422,"Unzip failed to find central directory in "+e,{fileName:"src/lix/client/Download.hx",lineNumber:70,className:"lix.client.Download",methodName:"unzip"}));a(o);return}var u=i.b;T.fromBuffer(k.from(u.buffer,u.byteOffset,i.length),(function(i,l){var o=-1;var done=function(){o+=1;s.onProgress(o,l.entryCount,false);if(o==l.entryCount){var e=a;var r=x.Success(t);haxe_Timer.delay((function(){e(r)}),100)}};if(i!=null){var u=x.Failure(new tink_core_TypedError(422,"Failed to unzip "+e+" because "+Std.string(i),{fileName:"src/lix/client/Download.hx",lineNumber:83,className:"lix.client.Download",methodName:"unzip"}));a(u)}l.on("entry",(function(e){var i=haxeshim_Fs.peel(lix_client_Download.stripLeadingSlashes(e.fileName),n);switch(i._hx_index){case 0:var s=i.v;var a=""+t+"/"+s;if(StringTools.endsWith(a,"/")){done()}else{haxeshim_Fs.ensureDir(a).eager();l.openReadStream(e,(function(e,t){var n=r(7758).createWriteStream(a);t.pipe(n,{end:true});n.on("close",done)}))}break;case 1:break}}));l.on("end",(function(){l.close();done()}))}))}))})).handle($bind(s,s.done))};lix_client_Download.stripLeadingSlashes=function(e){if(e.charAt(0)=="/"){return lix_client_Download.stripLeadingSlashes(HxOverrides.substr(e,1,null))}else{return e}};lix_client_Download.untar=function(e,t,n,i,s){return Y.async((function(e){var a=0;var l=0;var o=[];var update=function(){s.onProgress(l,a+1,true)};var u=1;var done=function(r){if(r==null){r=0}l+=r;update();haxe_Timer.delay((function(){if((u-=1)<=0){s.onProgress(a,a,true);var r=[];var n=0;while(n<o.length){var i=[o[n]];++n;r.push(Y.async(function(e){return function(t){w.unlink(e[0].to,function(e){return function(r){w.symlink(e[0].from,e[0].to,function(){return function(e){var r=e==null?x.Success($.Noise):x.Failure(new tink_core_TypedError(null,e.message,{fileName:"src/lix/client/Download.hx",lineNumber:142,className:"lix.client.Download",methodName:"untar"}));t(r)}}())}}(e))}}(i)))}q.next(q.inParallel(r),(function(e){return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success(t)))})).handle(e)}}),100)};var c=null;var fail=function(t){c=new tink_core_TypedError(null,t,{fileName:"src/lix/client/Download.hx",lineNumber:154,className:"lix.client.Download",methodName:"untar"});e(x.Failure(c))};lix_client_uncompress_Tar.parse(i,(function(i){if(c!=null){return}a+=i.size;update();var skip=function(){i.on("data",(function(){}))};var s=haxeshim_Fs.peel(lix_client_Download.stripLeadingSlashes(i.path),n);switch(s._hx_index){case 0:var l=s.v;var h=""+t+"/"+l;if(StringTools.endsWith(h,"/")){skip()}else{haxeshim_Fs.ensureDir(h).handle((function(t){if(t._hx_index==1){var n=t.failure;c=n;e(x.Failure(c))}else if(i.type=="SymbolicLink"){skip();o.push({from:i.linkpath,to:h})}else{u+=1;var s=new R;var a=r(7758).createWriteStream(h,{mode:i.mode});i.pipe(s,{end:true});s.pipe(a,{end:true});var l=done;var d=i.size;a.on("close",(function(){l(d)}))}}))}break;case 1:skip();break}})).handle((function(t){if(t._hx_index==1){var r=t.failure;e(x.Failure(r))}else{done()}}))})).handle($bind(s,s.done))};lix_client_Download.tar=function(e,t,r,n){var i=r;var s=t;return lix_client_Download.download(e,lix_client_Download.withLogger(n,(function(e,t,r){return lix_client_Download.untar(e,i,s,t,r)})))};lix_client_Download.zip=function(e,t,r,n){var i=r;var s=t;return lix_client_Download.download(e,lix_client_Download.withLogger(n,(function(e,t,r){lix_client_Download.unzip(e,i,s,t,r)})))};lix_client_Download.withLogger=function(e,t){return function(r,n,i){var s=Std.parseInt(n.headers["content-length"]);var a=0;var l=0;var o=1;var u=null;var progress=function(t){if(t==u){return}u=t;e.progress(t)};var pct=function(e){e=Math.min(1,Math.max(0,e));var t=Std.string(Math.round(1e3*e)/10);var r;if(t.indexOf(".")==-1){var n=t;r=""+n+".0"}else{var i=t;r=i}return StringTools.lpad(r," ",5)+"%"};var c=new Date(0).getTime();var update=function(){if(!(l==o||l/o>=1)){var e=(new Date).getTime();if(e>c+137){c=e;var t=[];if(a<s){t.push("Downloaded: "+pct(a/s))}if(l>0){t.push("Saved: "+pct(l/o))}var r="   "+t.join("   ");progress(r)}}};n.on("data",(function(e){a+=e.length;update()}));var h=0;t(r,n,{onProgress:function(e,t,r){l=e;o=t;if(r){var n=a/s;var i=l/o;var u=n*i;if(u<h){u=h}h=u;l=Math.round(u*1e3);o=1e3}update()},done:function(t){e.success("-> Done!");i(t)}})}};lix_client_Download.download=function(e,t){return Y.async((function(r){var n=E.parse(e);n.agent=false;if(n.headers==null){n.headers={}}n.headers["user-agent"]=lix_client_Download.USER_AGENT;var fail=function(t){var n=x.Failure(tink_core_TypedError.withData(null,"Failed to download "+e+" because "+t.message,t,{fileName:"src/lix/client/Download.hx",lineNumber:293,className:"lix.client.Download",methodName:"download"}));r(n)};var i=StringTools.startsWith(e,"https:")?y.get(n):b.get(n);i.setTimeout(3e4);i.on("error",fail);i.on("response",(function(i){if(i.statusCode>=400){var s=x.Failure(tink_core_TypedError.withData(i.statusCode,i.statusMessage,i,{fileName:"src/lix/client/Download.hx",lineNumber:304,className:"lix.client.Download",methodName:"download"}));r(s)}else{var a=i.headers["location"];if(a==null){i.on("error",fail);t(e,i,(function(e){switch(e._hx_index){case 0:var t=e.data;r(x.Success(t));break;case 1:var n=e.failure;r(x.Failure(n));break}}))}else{var l=a;var o=E.parse(l);var u=o.slashes;var c=o.search;var h=o.query;var d=o.port;var v=o.pathname;var m=o.path;var p=o.href;var _=o.hostname;var g=o.host;var w=o.hash;var b=o.auth;lix_client_Download.download(o.protocol==null?n.protocol+"//"+n.host+l:l,t).handle(r)}}}))}))};var lix_client_LibVersion=function(e,t){this.name=e;this.version=t};t["lix.client.LibVersion"]=lix_client_LibVersion;lix_client_LibVersion.__name__="lix.client.LibVersion";lix_client_LibVersion.parse=function(e){if(e==null){return null}else{var t=e.indexOf("#");if(t==-1){return new lix_client_LibVersion(u.Some(e),u.None)}else{var r=t;return new lix_client_LibVersion(u.Some(e.substring(0,r)),u.Some(e.substring(r+1)))}}};lix_client_LibVersion.prototype={__class__:lix_client_LibVersion};var lix_client_Libraries=function(e,t,r,n,i){this.scope=e;this.urlToJob=t;this.resolver=r;this.logger=n;this.force=i};t["lix.client.Libraries"]=lix_client_Libraries;lix_client_Libraries.__name__="lix.client.Libraries";lix_client_Libraries.prototype={downloadUrl:function(e,t){return this.downloadArchive(this.urlToJob(e),t)},downloadArchive:function(e,t){var r=this;if(t==null){t={}}var n=t.into==null?null:t.into;return q.next(e,(function(e){var t=null;if(n==null){var i=e.dest;switch(i._hx_index){case 0:var s=i.path;n=lix_client_DownloadedArchive.path(s);break;case 1:var a=i.f;t=""+r.scope.libCache+"/.cache/libNames/"+lix_client_DownloadedArchive.escape(W.toString(e.normalized));if(sys_FileSystem.exists(t)){n=w.readFileSync(t,{encoding:"utf8"})}break}}var l=n!=null&&sys_FileSystem.exists(""+r.scope.libCache+"/"+n);if(l&&!r.force){r.logger.success("already downloaded: "+W.toString(e.normalized));return lix_client_DownloadedArchive.existent(n,r.scope.libCache,e)}else{r.logger.info(""+(l?"forcedly redownloading":"downloading")+" "+W.toString(e.normalized));var o=""+r.scope.haxeshimRoot+"/downloads/download@"+Math.floor((new Date).getTime())+"_"+process.pid;var u=e.kind;var c;if(u==null){c=lix_client_Download.archive(W.toString(e.url),0,o,r.logger)}else{switch(u._hx_index){case 0:c=lix_client_Download.zip(W.toString(e.url),0,o,r.logger);break;case 1:c=lix_client_Download.tar(W.toString(e.url),0,o,r.logger);break;case 2:var h=u.load;c=h({dest:o,logger:r.logger,source:e.normalized,scope:r.scope});break}}return q.next(q.next(c,(function(t){return lix_client_DownloadedArchive.fresh(t,r.scope.libCache,n,e)})),(function(e){if(t!=null){var r=e;return Y._tryMap(haxeshim_Fs.save(t,_.ofString(e.relRoot),{fileName:"src/lix/client/Libraries.hx",lineNumber:58,className:"lix.client.Libraries",methodName:"downloadArchive"}),(function(e){return r}))}else{return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success(e)))}}))}}))},installUrl:function(e,t,r){return this.installArchive(this.urlToJob(e),t,r)},installFromLibHxml:function(e,t){var r=this;var n=this.scope.libHxml(e);return q.next(q.next(q.next(q.next(q.next(q.next(haxeshim_Fs.copy(t,""+this.scope.scopeLibDir+"/"+e+".hxml"),(function(t){return r.scope.getDirectives(e)})),(function(e){var n=fe["install"]!=null?e.getReserved("install"):e.h["install"];if(n==null){return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Failure(new tink_core_TypedError(null,"No install directive in "+t,{fileName:"src/lix/client/Libraries.hx",lineNumber:74,className:"lix.client.Libraries",methodName:"installFromLibHxml"}))))}else if(n.length==0){return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Failure(new tink_core_TypedError(null,"No install directive in "+t,{fileName:"src/lix/client/Libraries.hx",lineNumber:74,className:"lix.client.Libraries",methodName:"installFromLibHxml"}))))}else{var i=n;var s=[];var a=0;while(a<i.length){var l=[i[a]];++a;s.push(q.next(q.NOISE,function(e){return function(t){r.logger.info(e[0]);return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(haxeshim_Exec.shell(e[0],r.scope.scopeDir)))}}(l)))}return q.inSequence(s)}})),(function(e){return haxeshim_Fs.get(t,{fileName:"src/lix/client/Libraries.hx",lineNumber:83,className:"lix.client.Libraries",methodName:"installFromLibHxml"})})),(function(e){return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success(haxeshim_Args.fromMultilineString(e,n,(i=r.scope,$bind(i,i.getVar))))))})),(function(e){switch(e._hx_index){case 0:var t=e.data;var r=[];var n=0;while(n<t.length){var i=t[n];++n;r.push(i.val)}return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success(r)));case 1:var s=e.failure.errors[0];return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Failure(new tink_core_TypedError(s.code,s.message,{fileName:"src/lix/client/Libraries.hx",lineNumber:87,className:"lix.client.Libraries",methodName:"installFromLibHxml"}))))}})),(function(e){var t=[];var r=e;var n=0;var i=r.length;while(n<i){var s=n++;var a=r[s];if(a=="-lib"&&haxeshim_Args.getNdll(e[s+1])==u.None){t.push(e[s+1])}}return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success(t)))}))},dev:function(e,t){var r=this;var n=haxe_io_Path.isAbsolute(t);var i=n?t:haxe_io_Path.join([this.scope.scopeDir,t]);var s=n?t:"$"+"{SCOPE_DIR}/"+t;var a=i;var l=tink_core_TypedError.catchExceptions((function(){return w.readdirSync(a)}),null,{fileName:"src/lix/client/Libraries.hx",lineNumber:105,className:"lix.client.Libraries",methodName:"dev"});if(l._hx_index==0){var o=l.data;if(o.indexOf("haxelib.json")!=-1){var u=""+i+"/haxelib.json";return q.next(q.next(haxeshim_Fs.get(u,{fileName:"src/lix/client/Libraries.hx",lineNumber:109,className:"lix.client.Libraries",methodName:"dev"}),(function(e){try{return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success(JSON.parse(e))))}catch(e){var t=e instanceof js__$Boot_HaxeError?e.val:e;return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Failure(new tink_core_TypedError(null,"cannot parse "+u,{fileName:"src/lix/client/Libraries.hx",lineNumber:112,className:"lix.client.Libraries",methodName:"dev"}))))}})),(function(n){var i=[];if(n.dependencies!=null){var a=n.dependencies;var l=HxOverrides.iter(Reflect.fields(a));while(l.hasNext()){var u=l.next();var c=a[u];i.push("-lib "+u)}}var h=n.classPath;var d;if(h==null){d=t}else{var v=h;d=""+s+"/"+v}i.push("-cp "+d);var m=n.version;var p;if(m==null){p="dev"}else{var g=m;p=g}i.push("-D "+e+"="+p);var w=i.length;if(o.indexOf("extraParams.hxml")!=-1){i.push(""+s+"/extraParams.hxml")}i.push('--macro Sys.println("haxe_libraries/'+e+".hxml:"+w+": [Warning] Using dev version of library "+e+'")');return haxeshim_Fs.save(r.scope.libHxml(e),_.ofString(i.join("\n")),{fileName:"src/lix/client/Libraries.hx",lineNumber:136,className:"lix.client.Libraries",methodName:"dev"})}))}else{return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Failure(new tink_core_TypedError(null,""+i+" does not contain haxelib.json",{fileName:"src/lix/client/Libraries.hx",lineNumber:140,className:"lix.client.Libraries",methodName:"dev"}))))}}else{return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Failure(new tink_core_TypedError(null,""+i+" is not a readable directory",{fileName:"src/lix/client/Libraries.hx",lineNumber:142,className:"lix.client.Libraries",methodName:"dev"}))))}},installArchive:function(e,t,r){var n=this;if(r==null){r={}}if(r.alreadyInstalled==null){r.alreadyInstalled=new haxe_ds_StringMap}if(r.flat==null){r.flat=false}return q.next(this.downloadArchive(e),(function(e){var i;var s=""+lix_client_DownloadedArchive.getAbsRoot(e.storageRoot,e.relRoot)+"/extraParams.hxml";i=sys_FileSystem.exists(s)?w.readFileSync(s,{encoding:"utf8"}):null;if(t==null){t=new lix_client_LibVersion(u.None,u.None)}var a=e.infos;var l=t.name;var o=new tink_core__$Lazy_LazyConst(a.name);var c;if(l._hx_index==0){var h=l.v;c=h}else{c=o.get()}var d=t.version;var v=new tink_core__$Lazy_LazyConst(a.version);var m;if(d._hx_index==0){var p=d.v;m=p}else{m=v.get()}if(c==null){return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Failure(new tink_core_TypedError(null,"Could not determine library name for "+W.toString(e.job.normalized),{fileName:"src/lix/client/Libraries.hx",lineNumber:172,className:"lix.client.Libraries",methodName:"installArchive"}))))}var g=n.scope.libHxml(c);var b="$"+"{"+"HAXE_LIBCACHE"+"}/"+e.relRoot;var interpolate=function(e){return n.scope.interpolate(e,(function(e){if(e=="DOWNLOAD_LOCATION"){return b}else{return null}}))};var exec=function(e,t,r){if(t!=null){t=interpolate(t);if(r==null){r=n.scope.cwd}n.logger.info("Running "+e+" hook:");n.logger.info("> "+t);return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(tink_core_OutcomeTools.map(haxeshim_Exec.shell(t,n.scope.interpolate(r),n.scope.haxeInstallation.env()),(function(e){return $.Noise}))))}else{return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success($.Noise)))}};var saveHxml=function(t){var s=["# @"+"install"+': lix --silent download "'+W.toString(e.job.normalized)+'" into '+e.relRoot];var l=a.postDownload;if(l!=null){var o=l;s.push("# @"+"post-install"+": cd "+b+" && "+interpolate(o))}var u=a.runAs({libRoot:n.scope.interpolate(b)});switch(u._hx_index){case 0:var h=u.v;s.push("# @run: "+tink_core_OutcomeTools.sure(haxeshim_Args.interpolate(h,(function(e){if(e=="DOWNLOAD_LOCATION"){return b}else{var t=e;return"$"+"{"+t+"}"}}))));break;case 1:break}var lines=function(e){var t=[];var r=0;while(r<e.length){var n=e[r];++r;if(n!=null){t.push(n)}}return t.join("\n")};var d=[];var v=0;var p=a.dependencies;while(v<p.length){var w=p[v];++v;d.push("-lib "+w.name)}var y=s.concat(d);var S="-cp "+b+"/"+a.classPath;var N="-D "+c+"="+m;var E=a.hasNdll?"-lib "+haxeshim_Args.makeNdll(""+b+"/ndll/"):null;var k=lines(y.concat([S,N,i,E]));return q.next(haxeshim_Fs.save(g,_.ofString(k),{fileName:"src/lix/client/Libraries.hx",lineNumber:227,className:"lix.client.Libraries",methodName:"installArchive"}),(function(e){var n=r.alreadyInstalled;if(fe[c]!=null){n.setReserved(c,true)}else{n.h[c]=true}return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success(t)))}))};var installDependencies=function(){if(r.flat){return q.NOISE}else{var e=[];var t=HxOverrides.iter(a.dependencies);while(t.hasNext()){var i=t.next();var s=[i.value];var l=[i.name];e.push(Y.async(function(e,t){return function(i){var s;if(sys_FileSystem.exists(""+n.scope.scopeLibDir+"/"+e[0]+".hxml")){var l=r.alreadyInstalled;s=fe[e[0]]!=null?l.getReserved(e[0]):l.h[e[0]]}else{s=false}if(s){i(x.Success($.Noise))}else{var o=a.haxeshimDependencies;var c;if(o==null){c=null}else{var h=o;c=fe[e[0]]!=null?h.getReserved(e[0]):h.h[e[0]]}switch(t[0]._hx_index){case 0:if(c==null){var d=t[0].u;q.next(n.installUrl(d,new lix_client_LibVersion(u.Some(e[0]),u.None),r),function(e){return function(t){var n=r.alreadyInstalled;if(fe[e[0]]!=null){n.setReserved(e[0],true)}else{n.h[e[0]]=true}return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success(t)))}}(e)).handle(i)}else{var v=c;var m=null;m=function(){return function(e,t){var i=r.alreadyInstalled;if(fe[e]!=null?i.getReserved(e):i.h[e]){return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success($.Noise)))}else{return q.noise(q.next(n.installFromLibHxml(e,t),function(){return function(t){var n=r.alreadyInstalled;if(fe[e]!=null){n.setReserved(e,true)}else{n.h[e]=true}var i=[];var s=0;while(s<t.length){var l=t[s];++s;var o=a.haxeshimDependencies;var u;if(o==null){u=null}else{var c=o;u=fe[l]!=null?c.getReserved(l):c.h[l]}i.push(m(l,u))}return q.inSequence(i)}}()))}}}();m(e[0],v).handle(i)}break;case 1:var p=t[0].path;var _=null;_=function(){return function(e,t){var i=r.alreadyInstalled;if(fe[e]!=null?i.getReserved(e):i.h[e]){return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success($.Noise)))}else{return q.noise(q.next(n.installFromLibHxml(e,t),function(){return function(t){var n=r.alreadyInstalled;if(fe[e]!=null){n.setReserved(e,true)}else{n.h[e]=true}var i=[];var s=0;while(s<t.length){var l=t[s];++s;var o=a.haxeshimDependencies;var u;if(o==null){u=null}else{var c=o;u=fe[l]!=null?c.getReserved(l):c.h[l]}i.push(_(l,u))}return q.inSequence(i)}}()))}}}();_(e[0],p).handle(i);break}}}}(l,s),true))}return Y.next(Y.ofMany(e),(function(e){var t=[];var r=HxOverrides.iter(e);while(r.hasNext()){var n=r.next();if(n._hx_index==1){var i=n.failure;t.push(i)}}var s=t;if(s.length==0){return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success($.Noise)))}else{var a=s;var l="Failed to install dependencies of "+c+" :\n  ";var o=new Array(a.length);var u=0;var h=a.length;while(u<h){var d=u++;o[d]=a[d].message}return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Failure(tink_core_TypedError.withData(null,l+o.join("\n  "),a,{fileName:"src/lix/client/Libraries.hx",lineNumber:284,className:"lix.client.Libraries",methodName:"installArchive"}))))}}))}};return q.next(q.next(q.next(q.next(q.next(saveHxml(),(function(e){n.logger.success("-> mounted as "+c+"#"+m);return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success($.Noise)))})),(function(e){return installDependencies()})),(function(t){if(!e.alreadyDownloaded){return exec("post download",a.postDownload,b)}else{return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success($.Noise)))}})),saveHxml),(function(e){return exec("post install",a.postInstall)}))}))},__class__:lix_client_Libraries};var B={};t["lix.client.haxe._Official.Official_Impl_"]=B;B.__name__="lix.client.haxe._Official.Official_Impl_";B.get_isPrerelease=function(e){return e.indexOf("-")!=-1};B.isNumber=function(e){return new EReg("^[0-9]*$","").match(e)};B.fragment=function(e,t){if(B.isNumber(e)&&B.isNumber(t)){return Std.parseInt(e)-Std.parseInt(t)}else{return Reflect.compare(e,t)}};B.compare=function(e,t){var r=e.split("-");var n=t.split("-");var i=0;while(i<r.length&&i<n.length){var s=r[i].split(".");var a=n[i++].split(".");var l=0;while(l<s.length&&l<a.length){var o=B.fragment(s[l],a[l]);if(o==0){++l}else{var u=o;return-u}}var c=s.length-a.length;if(c!=0){var h=c;return-h}}return(r.length-n.length)*(i==1?1:-1)};var P=n["lix.client.haxe.ResolvedUserVersionData"]={__ename__:"lix.client.haxe.ResolvedUserVersionData",__constructs__:["RNightly","ROfficial","RCustom"],RNightly:(i=function(e){return{_hx_index:0,nightly:e,__enum__:"lix.client.haxe.ResolvedUserVersionData",toString:$estr}},i.__params__=["nightly"],i),ROfficial:(i=function(e){return{_hx_index:1,version:e,__enum__:"lix.client.haxe.ResolvedUserVersionData",toString:$estr}},i.__params__=["version"],i),RCustom:(i=function(e){return{_hx_index:2,path:e,__enum__:"lix.client.haxe.ResolvedUserVersionData",toString:$estr}},i.__params__=["path"],i)};var M={};t["lix.client.haxe._ResolvedVersion.ResolvedVersion_Impl_"]=M;M.__name__="lix.client.haxe._ResolvedVersion.ResolvedVersion_Impl_";M.get_id=function(e){switch(e._hx_index){case 0:var t=e.nightly;var r=t.published;var n=t.file;var i=t.development;var s=t.hash;return s;case 1:var a=e.version;return a;case 2:var l=e.path;return l}};M.toString=function(e){return U.toString(U.ofResolved(e))};var z=n["lix.client.haxe.PickOfficial"]={__ename__:"lix.client.haxe.PickOfficial",__constructs__:["StableOnly","IncludePrereleases"],StableOnly:{_hx_index:0,__enum__:"lix.client.haxe.PickOfficial",toString:$estr},IncludePrereleases:{_hx_index:1,__enum__:"lix.client.haxe.PickOfficial",toString:$estr}};var lix_client_haxe_Switcher=function(e,t){this.scope=e;this.logger=t;haxeshim_Fs.ensureDir(haxe_io_Path.addTrailingSlash(e.versionDir)).eager();haxeshim_Fs.ensureDir(haxe_io_Path.addTrailingSlash(e.haxelibRepo)).eager();haxeshim_Fs.ensureDir(this.downloads=e.haxeshimRoot+"/downloads/").eager()};t["lix.client.haxe.Switcher"]=lix_client_haxe_Switcher;lix_client_haxe_Switcher.__name__="lix.client.haxe.Switcher";lix_client_haxe_Switcher.linkToNightly=function(e,t,r){if(r==null){var n=lix_client_haxe_Switcher.PLATFORM=="windows"&&t.getTime()>14944608e5?"zip":"tar.gz";r=DateTools.format(t,"haxe_%Y-%m-%d_development_"+e+"."+n)}return DateTools.format(t,""+lix_client_haxe_Switcher.NIGHTLIES+"/"+lix_client_haxe_Switcher.PLATFORM+"/"+r)};lix_client_haxe_Switcher.sortedOfficial=function(e,t){if(e==z.StableOnly){var r=[];var n=0;while(n<t.length){var i=t[n];++n;if(!B.get_isPrerelease(i)){r.push(i)}}t=r}t.sort(B.compare);return t};lix_client_haxe_Switcher.officialOnline=function(e){return q.next(lix_client_Download.text("https://haxe.org/website-content/downloads/versions.json"),(function(t){var r=JSON.parse(t).versions.map((function(e){return e.version}));return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success(lix_client_haxe_Switcher.sortedOfficial(e,r))))}))};lix_client_haxe_Switcher.sortedNightlies=function(e){e.sort((function(e,t){return Reflect.compare(t.published.getTime(),e.published.getTime())}));return e};lix_client_haxe_Switcher.nightliesOnline=function(){return q.next(lix_client_Download.text(""+lix_client_haxe_Switcher.NIGHTLIES+"/"+lix_client_haxe_Switcher.PLATFORM+"/"),Z.ofSafeSync((function(e){var t=e.split("------------------\n").pop().split("\n");var r=[];var parseDate=function(e){try{return u.Some(HxOverrides.strDate(e))}catch(e){var t=e instanceof js__$Boot_HaxeError?e.val:e;return u.None}};var n=0;while(n<t.length){var i=t[n];++n;var s=StringTools.trim(i).split('<a href="');if(s.length==2){var a=s[1];var l=parseDate(s[0].split("  ")[0]);if(l._hx_index==0){var o;o=a.split('"')[0];var c=o;var h=l.v;var d=c.split(".")[0].split("_").pop();if(d==null){var v=d;r.push({hash:v,file:c,development:c.indexOf("_development_")!=-1,published:h})}else if(d!="latest"){var m=d;r.push({hash:m,file:c,development:c.indexOf("_development_")!=-1,published:h})}}}}return lix_client_haxe_Switcher.sortedNightlies(r)})))};lix_client_haxe_Switcher.attempt=function(e,t){try{return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success(t.get())))}catch(t){return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Failure(new tink_core_TypedError(null,"Failed to "+e+" because "+Std.string(t instanceof js__$Boot_HaxeError?t.val:t),{fileName:"src/lix/client/haxe/Switcher.hx",lineNumber:107,className:"lix.client.haxe.Switcher",methodName:"attempt"}))))}};lix_client_haxe_Switcher.pickFirst=function(e,t,r){if(r==null){return lix_client_haxe_Switcher.pickFirst(e,t,(function(e){return true}))}else{return function(n){var i=$getIterator(n);while(i.hasNext()){var s=i.next();if(r(s)){return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success(t(s))))}}return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Failure(new tink_core_TypedError(404,"No "+e+" build found",{fileName:"src/lix/client/haxe/Switcher.hx",lineNumber:141,className:"lix.client.haxe.Switcher",methodName:"pickFirst"}))))}}};lix_client_haxe_Switcher.ensureNeko=function(e){var t=haxeshim_Neko.PATH;if(sys_FileSystem.exists(t)){return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success(t)))}else{e.info("Neko seems to be missing. Attempting download ...");var getUrl=function(e){return"https://github.com/HaxeFoundation/neko/releases/download/v2-4-0/neko-2.4.0-"+e};var r;var n=process.arch;switch(Sys.systemName()){case"Mac":var i=getUrl("osx-universal.tar.gz");r=function(e,t,r){return lix_client_Download.tar(i,e,t,r)};break;case"Windows":var s=getUrl("win.zip");r=function(e,t,r){return lix_client_Download.zip(s,e,t,r)};break;default:if(n=="arm64"){var a=getUrl("linux-arm64.tar.gz");r=function(e,t,r){return lix_client_Download.tar(a,e,t,r)}}else{var l=getUrl("linux64.tar.gz");r=function(e,t,r){return lix_client_Download.tar(l,e,t,r)}}}return q.next(r(1,t,e),(function(t){e.success("done");return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success(t)))}))}};lix_client_haxe_Switcher.prototype={officialInstalled:function(e){var t=[];var r=0;var n=w.readdirSync(this.scope.versionDir);while(r<n.length){var i=n[r];++r;if(!U.isHash(i)&&sys_FileSystem.isDirectory(this.versionDir(i))){t.push(i)}}return lix_client_haxe_Switcher.attempt("Get installed Haxe versions",new tink_core__$Lazy_LazyConst(lix_client_haxe_Switcher.sortedOfficial(e,t)))},nightliesInstalled:function(){var e=[];var t=0;var r=U.isHash;var n=[];var i=0;var s=w.readdirSync(this.scope.versionDir);while(i<s.length){var a=s[i];++i;if(r(a)){n.push(a)}}var l=n;while(t<l.length){var o=l[t];++t;e.push({hash:o,published:HxOverrides.strDate(JSON.parse(w.readFileSync(""+this.versionDir(o)+"/"+lix_client_haxe_Switcher.VERSION_INFO,{encoding:"utf8"})).published)})}return lix_client_haxe_Switcher.attempt("get installed Haxe versions",new tink_core__$Lazy_LazyConst(lix_client_haxe_Switcher.sortedNightlies(e)))},switchTo:function(e){if(M.get_id(e)==this.scope.config.version){return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success($.Noise)))}else{return this.scope.reconfigure({version:M.get_id(e),resolveLibs:this.scope.config.resolveLibs})}},resolveInstalled:function(e){return this.resolve(e,$bind(this,this.officialInstalled),$bind(this,this.nightliesInstalled))},resolveOnline:function(e){return this.resolve(e,lix_client_haxe_Switcher.officialOnline,lix_client_haxe_Switcher.nightliesOnline)},resolve:function(e,t,r){switch(e._hx_index){case 0:return q.next(r(),lix_client_haxe_Switcher.pickFirst("nightly",P.RNightly,(function(e){return e.development!=false})));case 1:return q.next(t(z.IncludePrereleases),lix_client_haxe_Switcher.pickFirst("official",P.ROfficial));case 2:return q.next(t(z.StableOnly),lix_client_haxe_Switcher.pickFirst("stable",P.ROfficial));case 3:var n=e.hash;return q.ofSpecific(q.next(r(),(function(e){var t=$getIterator(e);while(t.hasNext()){var r=t.next();if(r.hash==n){return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success(P.RNightly(r))))}}return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Failure(new tink_core_TypedError(404,"Unable to resolve nightly version "+n+" locally, install it first with `lix install haxe "+n+"`",{fileName:"src/lix/client/haxe/Switcher.hx",lineNumber:166,className:"lix.client.haxe.Switcher",methodName:"resolve"}))))})));case 4:var i=e.version;return q.ofSpecific(q.next(t(z.IncludePrereleases),(function(e){if(Lambda.has(e,i)){return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success(P.ROfficial(i))))}else{return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Failure(new tink_core_TypedError(404,"Unable to resolve version "+i+" locally, install it first with `lix install haxe "+i+"`",{fileName:"src/lix/client/haxe/Switcher.hx",lineNumber:174,className:"lix.client.haxe.Switcher",methodName:"resolve"}))))}})));case 5:var s=e.path;return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success(P.RCustom(s))))}},versionDir:function(e){return this.scope.getInstallation(e).path},isDownloaded:function(e){return sys_FileSystem.exists(this.versionDir(M.get_id(e)))},linkToOfficial:function(e){var t="https://haxe.org/website-content/downloads/"+e+"/downloads/haxe-"+e+"-";var r;switch(Sys.systemName()){case"Mac":r="osx.tar.gz";break;case"Windows":var n="";r="win"+n+".zip";break;default:r=e<"3"?"linux.tar.gz":"linux64.tar.gz"}return t+r},replace:function(e,t,r,n){var i=t;while(true){var s=haxeshim_Fs.ls(t);if(s.length==1){var a=s[0];t=a}else{break}}if(n!=null){n(t)}if(sys_FileSystem.exists(e)){var l=""+this.downloads+"/"+r+"@"+Math.floor(w.statSync(e).ctime.getTime());w.renameSync(e,l);w.renameSync(t,e)}else{w.renameSync(t,e)}if(sys_FileSystem.exists(i)){haxeshim_Fs.delete(i)}},install:function(e,t){return q.next(this.resolveAndDownload(e,t),$bind(this,this.switchTo))},resolveAndDownload:function(e,t){var r=this;var n;var i=U.ofString(e);if(i._hx_index==4){var s=i.version;n=this.resolveInstalled(U.ofString(e))}else{n=new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Failure(new tink_core_TypedError(null,""+e+" needs to be resolved online",{fileName:"src/lix/client/haxe/Switcher.hx",lineNumber:251,className:"lix.client.haxe.Switcher",methodName:"resolveAndDownload"}))))}var f=function(t){r.logger.info('Looking up Haxe version "'+e+'" online');return q.next(r.resolveOnline(U.ofString(e)),(function(e){r.logger.info("  Resolved to "+M.toString(e)+". Downloading ...");return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success(e)))}))};var a=n.flatMap((function(e){switch(e._hx_index){case 0:var t=e.data;return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(e));case 1:var r=e.failure;return f(r)}}));return q.next(a.gather(),(function(e){return q.next(r.download(e,t),(function(t){r.logger.success(!t?"  ... already downloaded!":"  ... download complete!");return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success(e)))}))}))},download:function(e,t){var r=this;var getDownloadDir=function(e){return""+r.downloads+"/"+e+"@"+Math.floor((new Date).getTime())+"_"+process.pid};if(this.isDownloaded(e)==true){if(t.force!=true){return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success(false)))}else{switch(e._hx_index){case 0:var n=e.nightly;var i=n.development;var s=n.published;var a=n.hash;var l=n.file;var o=lix_client_haxe_Switcher.linkToNightly(a,s,l);var u=getDownloadDir(a);r.logger.info("Downloading Haxe: "+M.toString(e));return q.next(lix_client_Download.archive(o,0,u,r.logger),(function(e){var t=r.versionDir(a);r.replace(t,e,a,(function(e){w.writeFileSync(""+e+"/"+lix_client_haxe_Switcher.VERSION_INFO,JSON.stringify({published:HxOverrides.dateStr(s)}))}));return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success(true)))}));case 1:var c=e.version;var h=this.linkToOfficial(c);var d=getDownloadDir(c);r.logger.info("Downloading Haxe: "+M.toString(e));return q.next(lix_client_Download.archive(h,0,d,r.logger),(function(e){var t=r.versionDir(c);r.replace(t,e,c);return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success(true)))}));case 2:var v=e.path;return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Failure(new tink_core_TypedError(null,"Cannot download custom version",{fileName:"src/lix/client/haxe/Switcher.hx",lineNumber:290,className:"lix.client.haxe.Switcher",methodName:"download"}))))}}}else{switch(e._hx_index){case 0:var m=e.nightly;var p=m.development;var _=m.published;var g=m.hash;var b=m.file;var y=lix_client_haxe_Switcher.linkToNightly(g,_,b);var S=getDownloadDir(g);r.logger.info("Downloading Haxe: "+M.toString(e));return q.next(lix_client_Download.archive(y,0,S,r.logger),(function(e){var t=r.versionDir(g);r.replace(t,e,g,(function(e){w.writeFileSync(""+e+"/"+lix_client_haxe_Switcher.VERSION_INFO,JSON.stringify({published:HxOverrides.dateStr(_)}))}));return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success(true)))}));case 1:var N=e.version;var E=this.linkToOfficial(N);var k=getDownloadDir(N);r.logger.info("Downloading Haxe: "+M.toString(e));return q.next(lix_client_Download.archive(E,0,k,r.logger),(function(e){var t=r.versionDir(N);r.replace(t,e,N);return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success(true)))}));case 2:var R=e.path;return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Failure(new tink_core_TypedError(null,"Cannot download custom version",{fileName:"src/lix/client/haxe/Switcher.hx",lineNumber:290,className:"lix.client.haxe.Switcher",methodName:"download"}))))}}},__class__:lix_client_haxe_Switcher};var U={};t["lix.client.haxe._UserVersion.UserVersion_Impl_"]=U;U.__name__="lix.client.haxe._UserVersion.UserVersion_Impl_";U.ofResolved=function(e){switch(e._hx_index){case 0:var t=e.nightly;var r=t.published;var n=t.file;var i=t.development;var s=t.hash;return H.UNightly(s);case 1:var a=e.version;return H.UOfficial(a);case 2:var l=e.path;return H.UCustom(l)}};U.isHash=function(e){var t=0;var r=e.length;while(t<r){var n=t++;var i=U.hex;var s=e.charCodeAt(n);if(!i.h[s]){return false}}return true};U.toString=function(e){switch(e._hx_index){case 0:return"latest nightly build";case 1:return"latest official";case 2:return"latest stable release";case 3:var t=e.hash;return"nightly build "+t;case 4:var r=e.version;return"official release "+r;case 5:var n=e.path;return"custom version at `"+n+"`"}};U.isPath=function(e){if(!haxe_io_Path.isAbsolute(e)){return e.charAt(0)=="."}else{return true}};U.ofString=function(e){if(e==null){return null}else{var t;var r;if(e==null){t=U.isHash(e);if(t==true){return H.UNightly(e)}else{r=U.isPath(e);if(r==true){return H.UCustom(e)}else{return H.UOfficial(e)}}}else{switch(e){case"auto":return null;case"latest":return H.ULatest;case"edge":case"nightly":return H.UEdge;case"stable":return H.UStable;default:t=U.isHash(e);if(t==true){return H.UNightly(e)}else{r=U.isPath(e);if(r==true){return H.UCustom(e)}else{return H.UOfficial(e)}}}}}};var H=n["lix.client.haxe.UserVersionData"]={__ename__:"lix.client.haxe.UserVersionData",__constructs__:["UEdge","ULatest","UStable","UNightly","UOfficial","UCustom"],UEdge:{_hx_index:0,__enum__:"lix.client.haxe.UserVersionData",toString:$estr},ULatest:{_hx_index:1,__enum__:"lix.client.haxe.UserVersionData",toString:$estr},UStable:{_hx_index:2,__enum__:"lix.client.haxe.UserVersionData",toString:$estr},UNightly:(i=function(e){return{_hx_index:3,hash:e,__enum__:"lix.client.haxe.UserVersionData",toString:$estr}},i.__params__=["hash"],i),UOfficial:(i=function(e){return{_hx_index:4,version:e,__enum__:"lix.client.haxe.UserVersionData",toString:$estr}},i.__params__=["version"],i),UCustom:(i=function(e){return{_hx_index:5,path:e,__enum__:"lix.client.haxe.UserVersionData",toString:$estr}},i.__params__=["path"],i)};var lix_client_sources_Git=function(e){this.scope=e};t["lix.client.sources.Git"]=lix_client_sources_Git;lix_client_sources_Git.__name__="lix.client.sources.Git";lix_client_sources_Git.strip=function(e){if(StringTools.endsWith(e,".git")){return haxe_io_Path.withoutExtension(e)}else{return e}};lix_client_sources_Git.eval=function(e,t,r,n){var i=a.spawnSync(e,r,{cwd:t,stdio:["inherit","pipe","inherit"],env:m.toVars(haxeshim_Exec.mergeEnv(n))});var s=i;if(s.error==null){return x.Success({status:s.status,stdout:s.stdout.toString()})}else{var l=i.stdout;var o=i.stderr;var u=i.status;var c=i.signal;var h=i.pid;var d=i.output;var v=i.error;return x.Failure(new tink_core_TypedError(null,"Failed to call "+e+" because "+Std.string(v),{fileName:"src/lix/client/sources/Git.hx",lineNumber:25,className:"lix.client.sources.Git",methodName:"eval"}))}};lix_client_sources_Git.cli=function(e){haxeshim_Fs.ensureDir(haxe_io_Path.addTrailingSlash(e)).eager();return{call:function(t){return q.next(new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(haxeshim_Exec.sync("git",e,t))),(function(e){if(e==0){return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success($.Noise)))}else{return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Failure(new tink_core_TypedError(e,"git "+t[0]+" failed",{fileName:"src/lix/client/sources/Git.hx",lineNumber:33,className:"lix.client.sources.Git",methodName:"cli"}))))}}))},eval:function(t){return q.next(new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(lix_client_sources_Git.eval("git",e,t))),(function(e){var r=e.stdout;if(e.status==0){return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success(e.stdout.toString())))}else{return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Failure(new tink_core_TypedError(e.status,"git "+t[0]+" failed",{fileName:"src/lix/client/sources/Git.hx",lineNumber:40,className:"lix.client.sources.Git",methodName:"cli"}))))}}))}}};lix_client_sources_Git.prototype={schemes:function(){return["git"]},processUrl:function(e){var t=this;var r=W.fromString(e.payload);var n=W.resolve(r,W.fromString(""));var i;var s=r.hash;if(s==null){i="HEAD"}else if(s==""){i="HEAD"}else{var a=s;i=a}var l=lix_client_sources_Git.cli(".");var o=i.length!=40?q.next(l.eval(["ls-remote",W.toString(n),i]),(function(e){var t=StringTools.trim(e);if(t==""){return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Failure(new tink_core_TypedError(null,"Cannot resolve version "+i,{fileName:"src/lix/client/sources/Git.hx",lineNumber:63,className:"lix.client.sources.Git",methodName:"processUrl"}))))}else{var r=t;return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success(HxOverrides.substr(r,0,40))))}})):new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success(i)));return q.next(o,Z.ofSafeSync((function(i){var s=W.fromString(e.scheme+":"+W.toString(W.resolve(r,W.fromString("#"+i))));var a=A.Computed((function(e){return[e.name,e.version,"git",i]}));var l=new lix_client_LibVersion(u.None,u.None);var o=I.Custom((function(e){var r=haxe_io_Path.join([t.scope.libCache,".gitrepos",lix_client_DownloadedArchive.escape(W.toString(n))]);var s=lix_client_sources_Git.cli(r);var a=s;var l=sys_FileSystem.exists(""+r+"/.git")?["fetch"]:["clone",W.toString(n),"."];return q.next(q.next(q.next(q.next(a.call(l),(function(e){return s.call(["-c","advice.detachedHead=false","checkout",i])})),(function(e){return s.call(["submodule","update","--init","--recursive"])})),(function(t){return haxeshim_Fs.copy(r,e.dest,(function(e){return e!=""+r+"/.git"}))})),(function(t){return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success(e.dest)))}))}));return{url:e,normalized:s,dest:a,lib:l,kind:o}})))},__class__:lix_client_sources_Git};var lix_client_sources_GitHub=function(e){this.credentials=e};t["lix.client.sources.GitHub"]=lix_client_sources_GitHub;lix_client_sources_GitHub.__name__="lix.client.sources.GitHub";lix_client_sources_GitHub.isArchive=function(e){var t=re.parts(e);if(t.length==4){var r=t[3];var n=t[1];var i=t[0];if(ne.stringly(t[2])=="archive"){return true}else{return false}}else{return false}};lix_client_sources_GitHub.prototype={intercept:function(e){var t=e.query==null?e.path:e.path+"?"+e.query;var r=e.scheme;var n=e.query;var i=e.payload;var s=e.path;var a=e.hosts;var l=e.host;var o=e.hash;var c=e.auth;if(l==null){return u.None}else{var h=te.get_port(l);var d=te.get_name(l);if(d==null){return u.None}else if(d=="github.com"){if(r==null){return u.None}else if(r=="https"){if(n==null){if(lix_client_sources_GitHub.isArchive(s)==false){return u.Some(this.processUrl(e))}else{return u.None}}else if(lix_client_sources_GitHub.isArchive(s)==false){return u.Some(this.processUrl(e))}else{return u.None}}else{return u.None}}else{return u.None}}},schemes:function(){return["github","gh"]},grabCommit:function(e,t,r){if(this.credentials==null&&(r==""||!U.isHash(r))){return q.next(q.mapError(lix_client_Download.bytes("https://github.com/"+e+"/"+t+".git/info/refs?service=git-upload-pack"),(function(r){if(r.code==401){return new tink_core_TypedError(r.code,r.message+(' - Possible typo in "'+e+"/"+t+'"'),{fileName:"src/lix/client/sources/GitHub.hx",lineNumber:35,className:"lix.client.sources.GitHub",methodName:"grabCommit"})}else{return r}})),(function(n){if(r==""){return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success(HxOverrides.substr(n.toString().split(" HEAD")[0],-40,null))))}var i="";var s=n.b.bufferValue;var a=0;var l=n.length;while(a<l){var o=a++;var u=s.bytes[o];if(u!=0){var c=u;i+=String.fromCodePoint(c)}}var h=0;var d=i.split("\n");while(h<d.length){var v=d[h];++h;var m=v.split(" ");if(m.length==2){var p;var _=m[1];p=HxOverrides.substr(m[0],-40,null);var g=p;if(g.length==40&&StringTools.endsWith(_,"/"+r)){return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success(g)))}}}return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Failure(new tink_core_TypedError(null,"Failed to lookup sha for github:"+e+"/"+t+Std.string(n),{fileName:"src/lix/client/sources/GitHub.hx",lineNumber:60,className:"lix.client.sources.GitHub",methodName:"grabCommit"}))))}))}else{var n=this.credentials;return q.next(lix_client_Download.text("https://"+(n==null?"":""+n+"@")+"api.github.com/repos/"+e+"/"+t+"/commits?sha="+r),(function(n){try{return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success(JSON.parse(n)[0].sha)))}catch(n){var i=n instanceof js__$Boot_HaxeError?n.val:n;var s;if(r==null){s=""}else if(r==""){s=""}else{var a=r;s="#"+a}return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Failure(new tink_core_TypedError(null,"Failed to lookup sha for github:"+e+"/"+t+s,{fileName:"src/lix/client/sources/GitHub.hx",lineNumber:73,className:"lix.client.sources.GitHub",methodName:"grabCommit"}))))}}))}},getArchive:function(e,t,r,n){var i=this;var doGet=function(r){return i.getArchive(e,t,r,n)};if(r==null){return q.next(this.grabCommit(e,t,""),doGet)}else{var s=r;if(s.length==40){return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success({normalized:W.fromString("gh://"+(n==null?"":""+n+"@")+"github.com/"+e+"/"+t+"#"+s),dest:A.Computed((function(e){return[e.name,e.version,"github",s]})),url:W.fromString("https://"+(n==null?"":""+n+"@")+"github.com/"+e+"/"+t+"/archive/"+s+".tar.gz"),lib:new lix_client_LibVersion(u.Some(t),u.None)})))}else{var a=r;return q.next(this.grabCommit(e,t,a),doGet)}}},processUrl:function(e){var t=e.path;var r;if(t==null){return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Failure(new tink_core_TypedError(null,"invalid github url "+W.toString(e),{fileName:"src/lix/client/sources/GitHub.hx",lineNumber:99,className:"lix.client.sources.GitHub",methodName:"processUrl"}))))}else{r=ie.toStringArray(re.parts(t));if(r.length==2){var n=r[1];var i=r[0];return this.getArchive(i,lix_client_sources_Git.strip(n),e.hash,e.auth)}else{return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Failure(new tink_core_TypedError(null,"invalid github url "+W.toString(e),{fileName:"src/lix/client/sources/GitHub.hx",lineNumber:102,className:"lix.client.sources.GitHub",methodName:"processUrl"}))))}}},__class__:lix_client_sources_GitHub};var lix_client_sources_GitLab=function(e){if(e==null){e=""}var t=StringTools.trim(e);var r;if(t==""){r=""}else{var n=t;r="private_token="+n}this.privateToken=r};t["lix.client.sources.GitLab"]=lix_client_sources_GitLab;lix_client_sources_GitLab.__name__="lix.client.sources.GitLab";lix_client_sources_GitLab.host=function(e){if(e==null){return"gitlab.com"}else{var t=e.host;if(t==null){return"gitlab.com"}else{var r=t;return r}}};lix_client_sources_GitLab.prototype={intercept:function(e){var t=e.query==null?e.path:e.path+"?"+e.query;var r=e.scheme;var n=e.query;var i=e.payload;var s=e.path;var a=e.hosts;var l=e.host;var o=e.hash;var c=e.auth;if(l==null){return u.None}else{var h=te.get_port(l);var d=te.get_name(l);if(d==null){return u.None}else if(d=="gitlab.com"){if(r==null){return u.None}else if(r=="https"){if(n==null){if(ne.stringly(re.parts(s)[0])=="api"==false){return u.Some(this.processUrl(e))}else{return u.None}}else if(ne.stringly(re.parts(s)[0])=="api"==false){return u.Some(this.processUrl(e))}else{return u.None}}else{return u.None}}else{return u.None}}},schemes:function(){return["gitlab"]},grabCommit:function(e,t,r,n){return q.next(lix_client_Download.text("https://"+lix_client_sources_GitLab.host(n)+"/api/v4/projects/"+e+"%2F"+t+"/repository/commits/"+r+"?"+this.privateToken),(function(n){try{var i=JSON.parse(n);if(r==""){i=i[0]}return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success(i.id)))}catch(n){var s=n instanceof js__$Boot_HaxeError?n.val:n;var a;if(r==null){a=""}else if(r==""){a=""}else{var l=r;a="#"+l}return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Failure(new tink_core_TypedError(null,"Failed to lookup sha for gitlab:"+e+"/"+t+a,{fileName:"src/lix/client/sources/GitLab.hx",lineNumber:43,className:"lix.client.sources.GitLab",methodName:"grabCommit"}))))}}))},getArchive:function(e,t,r,n){if(r==null){var i=$bind(this,this.getArchive);var s=e;var a=t;var l=n;var tmp=function(e){return i(s,a,e,l)};return q.next(this.grabCommit(e,t,"",n),tmp)}else{var o=r;if(o.length==40){var c="https://"+lix_client_sources_GitLab.host(n)+"/api/v4/projects/"+e+"%2F"+t+"/repository/archive.zip?sha="+o+"&"+this.privateToken;var h=A.Computed((function(e){return[e.name,e.version,"gitlab",o]}));return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success({normalized:W.fromString(c),dest:h,url:W.fromString(c),lib:new lix_client_LibVersion(u.Some(t),u.None)})))}else{var d=r;var v=$bind(this,this.getArchive);var m=e;var p=t;var _=n;var tmp1=function(e){return v(m,p,e,_)};return q.next(this.grabCommit(e,t,d,n),tmp1)}}},processUrl:function(e){var t=e.path;var r;if(t==null){return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Failure(new tink_core_TypedError(null,"invalid gitlab url "+W.toString(e),{fileName:"src/lix/client/sources/GitLab.hx",lineNumber:65,className:"lix.client.sources.GitLab",methodName:"processUrl"}))))}else{r=ie.toStringArray(re.parts(t));if(r.length==2){var n=r[1];var i=r[0];return this.getArchive(i,lix_client_sources_Git.strip(n),e.hash,{host:e.host})}else{return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Failure(new tink_core_TypedError(null,"invalid gitlab url "+W.toString(e),{fileName:"src/lix/client/sources/GitLab.hx",lineNumber:67,className:"lix.client.sources.GitLab",methodName:"processUrl"}))))}}},__class__:lix_client_sources_GitLab};var lix_client_sources_Haxelib=function(e){if(e==null){e=lix_client_sources_Haxelib.OFFICIAL}this.lazy_isOfficial=new tink_core__$Lazy_LazyFunc((function(){return lix_client_sources_Haxelib.OFFICIAL==e}));this.baseURL=e};t["lix.client.sources.Haxelib"]=lix_client_sources_Haxelib;lix_client_sources_Haxelib.__name__="lix.client.sources.Haxelib";lix_client_sources_Haxelib.prototype={getBaseUrl:function(e){if(e==null){return W.fromString(this.baseURL)}else{var t=e.host;if(t==null){return W.fromString(this.baseURL)}else{var r=t;return W.fromString(""+(te.get_port(r)==null?"https":"http")+"://"+r+"/")}}},resolve:function(e,t){return W.resolve(this.getBaseUrl(t),e)},schemes:function(){return["haxelib"]},processUrl:function(e){var t=se.toMap(e.query);var r=ne.toString(fe["url"]!=null?t.getReserved("url"):t.h["url"]);if((r==null||r==this.baseURL)==true){var n=e.path;var i;if(n==null){return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Failure(new tink_core_TypedError(null,"invalid haxelib url "+W.toString(e),{fileName:"src/lix/client/sources/Haxelib.hx",lineNumber:31,className:"lix.client.sources.Haxelib",methodName:"processUrl"}))))}else{i=ie.toStringArray(re.parts(n));if(i.length==1){var s=i[0];return this.getArchive(s,e.hash,{host:e.host})}else{return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Failure(new tink_core_TypedError(null,"invalid haxelib url "+W.toString(e),{fileName:"src/lix/client/sources/Haxelib.hx",lineNumber:33,className:"lix.client.sources.Haxelib",methodName:"processUrl"}))))}}}else{var a=r;return new lix_client_sources_Haxelib(a).processUrl(e)}},getArchive:function(e,t,r){var n=this;return q.next(this.getInfos(e,r),(function(e){var i;if(r==null){i=u.None}else{var s=r.host;if(s==null){i=u.None}else{var a=s;i=u.Some(a)}}var l=!(i==u.None&&n.get_isOfficial());var o=e.name;if(t==null){var getVersions=function(t){var r=[];var n=0;var i=e.versions;while(n<i.length){var s=i[n];++n;var a=Q.parse(s.name);if(a._hx_index==0){var l=a.data;if(t==null||t(l)){r.push(l)}else{continue}}else{continue}}var o=r;o.sort((function(e,t){return Q.compare(t,e)}));return o};var c=getVersions((function(e){return e.preview==null}));if(c.length==0){t=getVersions()[0].toString()}else{var h=c;t=h[0].toString()}}else{var d=false;var v=0;var m=e.versions;while(v<m.length){var p=m[v];++v;if(p.name==t){d=true;break}}if(!d){return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Failure(new tink_core_TypedError(null,"Library "+o+" has no version "+t,{fileName:"src/lix/client/sources/Haxelib.hx",lineNumber:78,className:"lix.client.sources.Haxelib",methodName:"getArchive"}))))}}var _="/files/3.0/"+StringTools.replace(o,".",",")+"-"+StringTools.replace(t,".",",")+".zip";var g=n.resolve(W.fromString(_),r);var w;if(i._hx_index==0){var b=i.v;w=b}else{w=null}var y=re.ofString("/"+o);var S=l?se.ofObj({url:n.baseURL}):null;var N=W.make({scheme:"haxelib",host:w,path:y,hash:t,query:S});var E;if(l){var k=W.toString(n.getBaseUrl(r));E="@"+encodeURIComponent(k)}else{E=""}return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success({url:g,normalized:N,dest:A.Fixed([o,t,"haxelib"+E]),kind:I.Zip,lib:new lix_client_LibVersion(u.Some(o),u.Some(t))})))}))},getInfos:function(e,t){var r=this;return Y.async((function(n){var i=haxe_remoting_HttpAsyncConnection.urlConnect(W.toString(r.resolve(W.fromString("/api/3.0/index.n"),t)));i.setErrorHandler((function(e){var t=x.Failure(tink_core_TypedError.withData(null,"Failed to get version information from haxelib because "+e,e,{fileName:"src/lix/client/sources/Haxelib.hx",lineNumber:99,className:"lix.client.sources.Haxelib",methodName:"getInfos"}));n(t)}));var s=new lix_client_sources_haxelib_Proxy(i.resolve("api"));s.infos(e,(function(e){n(x.Success(e))}))}))},get_isOfficial:function(){return this.lazy_isOfficial.get()},__class__:lix_client_sources_Haxelib};var lix_client_sources_Web=function(e){this.interceptors=e};t["lix.client.sources.Web"]=lix_client_sources_Web;lix_client_sources_Web.__name__="lix.client.sources.Web";lix_client_sources_Web.prototype={schemes:function(){return["http","https"]},processUrl:function(e){var t=0;var r=this.interceptors;while(t<r.length){var n=r[t];++t;var i=n(e);if(i._hx_index==0){var s=i.v;return s}}var a=A.Computed((function(t){return[t.name,t.version,W.toString(e)]}));return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success({url:e,dest:a,normalized:e,lib:null})))},__class__:lix_client_sources_Web};var lix_client_sources_haxelib_Async_$Repo=function(e){this.__cnx=e};t["lix.client.sources.haxelib.Async_Repo"]=lix_client_sources_haxelib_Async_$Repo;lix_client_sources_haxelib_Async_$Repo.__name__="lix.client.sources.haxelib.Async_Repo";lix_client_sources_haxelib_Async_$Repo.prototype={infos:function(e,t){this.__cnx.resolve("infos").call([e],t)},__class__:lix_client_sources_haxelib_Async_$Repo};var lix_client_sources_haxelib_Proxy=function(e){lix_client_sources_haxelib_Async_$Repo.call(this,e)};t["lix.client.sources.haxelib.Proxy"]=lix_client_sources_haxelib_Proxy;lix_client_sources_haxelib_Proxy.__name__="lix.client.sources.haxelib.Proxy";lix_client_sources_haxelib_Proxy.__super__=lix_client_sources_haxelib_Async_$Repo;lix_client_sources_haxelib_Proxy.prototype=$extend(lix_client_sources_haxelib_Async_$Repo.prototype,{__class__:lix_client_sources_haxelib_Proxy});var lix_client_uncompress_Tar=function(){};t["lix.client.uncompress.Tar"]=lix_client_uncompress_Tar;lix_client_uncompress_Tar.__name__="lix.client.uncompress.Tar";lix_client_uncompress_Tar.parse=function(e,t){return Y.async((function(r){var n=0;var i=0;var s=new j({onentry:function(e){n+=1;t(e)}});s.on("warn",(function(){i+=1}));s.on("end",(function(){var e=n==0&&i!=0?x.Failure(new tink_core_TypedError(422,"Invalid tar archive.",{fileName:"src/lix/client/uncompress/Tar.hx",lineNumber:23,className:"lix.client.uncompress.Tar",methodName:"parse"})):x.Success($.Noise);r(e)}));s.on("error",(function(e){var t=x.Failure(new tink_core_TypedError(null,e.message,{fileName:"src/lix/client/uncompress/Tar.hx",lineNumber:26,className:"lix.client.uncompress.Tar",methodName:"parse"}));r(t)}));e.pipe(s,{end:true})}))};var j=r(4674).Parse;var sys_io_File=function(){};t["sys.io.File"]=sys_io_File;sys_io_File.__name__="sys.io.File";sys_io_File.copy=function(e,t){var r=w.openSync(e,"r");var n=w.fstatSync(r);var i=w.openSync(t,"w",n.mode);var s;var a=0;while(true){s=w.readSync(r,sys_io_File.copyBuf,0,65536,a);if(!(s>0)){break}w.writeSync(i,sys_io_File.copyBuf,0,s);a+=s}w.closeSync(r);w.closeSync(i)};var W={};t["tink._Url.Url_Impl_"]=W;W.__name__="tink._Url.Url_Impl_";W.resolve=function(e,t){if(t.scheme!=null){return t}else if(t.host!=null){if(t.scheme!=null){return t}else{var r=Reflect.copy(t);r.scheme=e.scheme;return r}}else{var n={path:re.join(e.path,t.path),payload:"",scheme:e.scheme,query:t.query,auth:e.auth,host:e.host,hash:t.hash};W.makePayload(n);var i=n;return i}};W.makePayload=function(e){var t="";var r=e.scheme;var n=e.query;var i=e.payload;var s=e.path;var a=e.hosts;var l=e.host;var o=e.hash;var u=e.auth;if(u==null){if(l!=null){var c=l;t+="//"+c}}else if(l==null){var h=u;t+="//"+(h==null?"":""+h+"@")}else{var d=u;var v=l;t+="//"+(d==null?"":""+d+"@")+v}t+=e.path;var m=e.query;if(m!=null){var p=m;t+="?"+p}var _=e.hash;if(_!=null){var g=_;t+="#"+g}e.payload=t.toString()};W.toString=function(e){if(e.scheme==null){return e.payload}else{return""+e.scheme+":"+e.payload}};W.fromString=function(e){return W.parse(e)};W.noop=function(e){};W.parse=function(e,t){if(e==null){return W.parse("")}if(t==null){t=W.noop}e=StringTools.trim(e);if(StringTools.startsWith(e,"data:")){var r={scheme:"data",payload:HxOverrides.substr(e,5,null)};return r}var n=new EReg("^(([a-zA-Z][a-zA-Z0-9\\-+.]*):)?((//(([^@/]+)@)?([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?)$","");var i=new EReg("^(\\[(.*)\\]|([^:]*))(:(.*))?$","");n.match(e);var s;var a=n.matched(7);if(a==null){s=[]}else{var l=a;var o=[];var u=0;var c=l.split(",");while(u<c.length){var h=c[u];++u;i.match(h);var d;var v=i.matched(2);var m=i.matched(3);if(v==null){var p=m;d=p}else if(m==null){var _=v;d="["+_+"]"}else{t("invalid host "+h);d=null}var g;var w=i.matched(5);if(w==null){g=null}else{var x=w;var b=Std.parseInt(x);if(b==null){t("invalid port "+x);g=null}else{var y=b;g=y}}o.push(te._new(d,g))}s=o}var S=n.matched(8);if(s.length>0&&S.charAt(0)!="/"){S="/"+S}var N={scheme:n.matched(2),payload:n.matched(3),host:s[0],hosts:s,auth:n.matched(6),path:re.ofString(S),query:n.matched(10),hash:n.matched(12)};return N};W.make=function(e){var t={payload:"",path:e.path,query:e.query,host:e.host,hosts:e.hosts,auth:e.auth,scheme:e.scheme,hash:e.hash};W.makePayload(t);var r=t;return r};var V={};t["tink.core._Callback.Callback_Impl_"]=V;V.__name__="tink.core._Callback.Callback_Impl_";V.invoke=function(e,t){if(V.depth<500){V.depth++;e(t);V.depth--}else{var r=e;var f=function(e){V.invoke(r,e)};var n=t;V.defer((function(){f(n)}))}};V.fromNiladic=function(e){return e};V.defer=function(e){process.nextTick(e)};var tink_core_LinkObject=function(){};t["tink.core.LinkObject"]=tink_core_LinkObject;tink_core_LinkObject.__name__="tink.core.LinkObject";tink_core_LinkObject.__isInterface__=true;tink_core_LinkObject.prototype={__class__:tink_core_LinkObject};var G={};t["tink.core._Callback.CallbackLink_Impl_"]=G;G.__name__="tink.core._Callback.CallbackLink_Impl_";G.fromMany=function(e){var t=new tink_core_SimpleLink((function(){if(e!=null){var t=0;while(t<e.length){var r=e[t];++t;if(r!=null){r.cancel()}}}else{e=null}}));return t};var tink_core_SimpleLink=function(e){this.f=e};t["tink.core.SimpleLink"]=tink_core_SimpleLink;tink_core_SimpleLink.__name__="tink.core.SimpleLink";tink_core_SimpleLink.__interfaces__=[tink_core_LinkObject];tink_core_SimpleLink.prototype={cancel:function(){if(this.f!=null){this.f();this.f=null}},__class__:tink_core_SimpleLink};var tink_core__$Callback_LinkPair=function(e,t){this.dissolved=false;this.a=e;this.b=t};t["tink.core._Callback.LinkPair"]=tink_core__$Callback_LinkPair;tink_core__$Callback_LinkPair.__name__="tink.core._Callback.LinkPair";tink_core__$Callback_LinkPair.__interfaces__=[tink_core_LinkObject];tink_core__$Callback_LinkPair.prototype={cancel:function(){if(!this.dissolved){this.dissolved=true;var e=this.a;if(e!=null){e.cancel()}var t=this.b;if(t!=null){t.cancel()}this.a=null;this.b=null}},__class__:tink_core__$Callback_LinkPair};var tink_core__$Callback_ListCell=function(e,t){if(e==null){throw new js__$Boot_HaxeError("callback expected but null received")}this.cb=e;this.list=t};t["tink.core._Callback.ListCell"]=tink_core__$Callback_ListCell;tink_core__$Callback_ListCell.__name__="tink.core._Callback.ListCell";tink_core__$Callback_ListCell.__interfaces__=[tink_core_LinkObject];tink_core__$Callback_ListCell.prototype={cancel:function(){if(this.list!=null){var e=this.list;this.cb=null;this.list=null;if(--e.used<e.used>>1){e.compact()}}},__class__:tink_core__$Callback_ListCell};var tink_core_CallbackList=function(){this.busy=false;this.queue=[];this.used=0;this.cells=[]};t["tink.core.CallbackList"]=tink_core_CallbackList;tink_core_CallbackList.__name__="tink.core.CallbackList";tink_core_CallbackList.prototype={ondrain:function(){},invoke:function(e,t){if(this.busy){var r=$bind(this,this.invoke);var n=e;var i=t;var tmp=function(){r(n,i);return};this.queue.push(tmp)}else{this.busy=true;var s=this.cells.length;var a=0;var l=s;while(a<l){var o=a++;var u=this.cells[o];if(u.list!=null){V.invoke(u.cb,e)}}this.busy=false;if(t){var c=this.cells.length-s;var h=0;var d=s;while(h<d){var v=h++;var m=this.cells[v];m.cb=null;m.list=null}var p=0;var _=c;while(p<_){var g=p++;this.cells[g]=this.cells[s+g]}this.resize(c)}else if(this.used<this.cells.length){this.compact()}if(this.queue.length>0){this.queue.shift()()}}},compact:function(){if(this.busy){return}else if(this.used==0){this.resize(0);this.ondrain()}else{var e=0;var t=0;var r=this.cells.length;while(t<r){var n=t++;var i=this.cells[n];var s=i.list;if(i.cb!=null){var a=i;if(e!=n){this.cells[e]=a}if(++e==this.used){break}}}this.resize(this.used)}},resize:function(e){this.cells.length=e},__class__:tink_core_CallbackList};var tink_core_TypedError=function(e,t,r){if(e==null){e=500}this.isTinkError=true;this.code=e;this.message=t;this.pos=r;this.exceptionStack=[];this.callStack=[]};t["tink.core.TypedError"]=tink_core_TypedError;tink_core_TypedError.__name__="tink.core.TypedError";tink_core_TypedError.withData=function(e,t,r,n){return tink_core_TypedError.typed(e,t,r,n)};tink_core_TypedError.typed=function(e,t,r,n){var i=new tink_core_TypedError(e,t,n);i.data=r;return i};tink_core_TypedError.asError=function(e){if(e!=null&&e.isTinkError){return e}else{return null}};tink_core_TypedError.catchExceptions=function(e,t,r){try{return x.Success(e())}catch(e){var n=e instanceof js__$Boot_HaxeError?e.val:e;var i=tink_core_TypedError.asError(n);var s;if(i==null){s=t==null?tink_core_TypedError.withData(null,"Unexpected Error",n,r):t(n)}else{var a=i;s=a}return x.Failure(s)}};tink_core_TypedError.tryFinally=function(e,t){try{return e()}finally{t()}return null};tink_core_TypedError.prototype={printPos:function(){return this.pos.className+"."+this.pos.methodName+":"+this.pos.lineNumber},toString:function(){var e="Error#"+this.code+": "+this.message;if(this.pos!=null){e+=" @ "+this.printPos()}return e},throwSelf:function(){var e=this;throw js__$Boot_HaxeError.wrap(e)},__class__:tink_core_TypedError};var tink_core_FutureObject=function(){};t["tink.core.FutureObject"]=tink_core_FutureObject;tink_core_FutureObject.__name__="tink.core.FutureObject";tink_core_FutureObject.__isInterface__=true;tink_core_FutureObject.prototype={__class__:tink_core_FutureObject};var $=n["tink.core.Noise"]={__ename__:"tink.core.Noise",__constructs__:["Noise"],Noise:{_hx_index:0,__enum__:"tink.core.Noise",toString:$estr}};var tink_core__$Future_SyncFuture=function(e){this.value=e};t["tink.core._Future.SyncFuture"]=tink_core__$Future_SyncFuture;tink_core__$Future_SyncFuture.__name__="tink.core._Future.SyncFuture";tink_core__$Future_SyncFuture.__interfaces__=[tink_core_FutureObject];tink_core__$Future_SyncFuture.prototype={map:function(e){return new tink_core__$Future_SyncFuture(this.value.map(e))},flatMap:function(e){var t=this;return new tink_core__$Future_SuspendableFuture((function(r){var n=t.value.get();return e(n).handle(r)}))},handle:function(e){V.invoke(e,this.value.get());return null},eager:function(){return this},gather:function(){return this},__class__:tink_core__$Future_SyncFuture};var Y={};t["tink.core._Future.Future_Impl_"]=Y;Y.__name__="tink.core._Future.Future_Impl_";Y.next=function(e,t){return e.flatMap((function(e){return t(e)}))};Y.flatten=function(e){return new tink_core__$Future_SuspendableFuture((function(t){var r=null;var n=e.handle((function(e){r=e.handle(t)}));var i=new tink_core_SimpleLink((function(){if(r!=null){r.cancel()}}));return new tink_core__$Callback_LinkPair(n,i)}))};Y.ofMany=function(e,t){if(t==null){t=true}var r=new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst([]));var n=0;while(n<e.length){var i=[e[n]];++n;var s=false;if(s==null){s=true}var a=r.flatMap(function(e){return function(t){var r=false;if(r==null){r=true}var n=function(){return function(e){return t.concat([e])}}();var i=e[0].map(n);if(r){return i.gather()}else{return i}}}(i));r=s?a.gather():a}if(t){return r.gather()}else{return r}};Y.async=function(e,t){if(t==null){t=false}if(t){return new tink_core__$Future_SuspendableFuture((function(t){e(t);return null}))}else{var r=new tink_core_FutureTrigger;var n=e;V.invoke(n,$bind(r,r.trigger));return r}};Y._tryMap=function(e,t){var r=e.map((function(e){return tink_core_OutcomeTools.map(e,t)}));return r.gather()};var tink_core_FutureTrigger=function(){this.list=new tink_core_CallbackList};t["tink.core.FutureTrigger"]=tink_core_FutureTrigger;tink_core_FutureTrigger.__name__="tink.core.FutureTrigger";tink_core_FutureTrigger.__interfaces__=[tink_core_FutureObject];tink_core_FutureTrigger.prototype={handle:function(e){var t=this.list;if(t==null){V.invoke(e,this.result);return null}else{var r=t;var n=new tink_core__$Callback_ListCell(e,r);r.cells.push(n);r.used++;return n}},map:function(e){var t=this.list;if(t==null){return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(e(this.result)))}else{var r=t;var n=new tink_core_FutureTrigger;var i=this.list;var s=new tink_core__$Callback_ListCell((function(t){var r=e(t);n.trigger(r)}),i);i.cells.push(s);i.used++;return n}},flatMap:function(e){var t=this.list;if(t==null){return e(this.result)}else{var r=t;var n=new tink_core_FutureTrigger;var i=this.list;var s=new tink_core__$Callback_ListCell((function(t){e(t).handle($bind(n,n.trigger))}),i);i.cells.push(s);i.used++;return n}},gather:function(){return this},eager:function(){return this},trigger:function(e){if(this.list==null){return false}else{var t=this.list;this.list=null;this.result=e;t.invoke(e,true);return true}},__class__:tink_core_FutureTrigger};var tink_core__$Future_SuspendableFuture=function(e){this.suspended=true;var t=this;this.wakeup=e;this.callbacks=new tink_core_CallbackList;this.callbacks.ondrain=function(){if(t.callbacks!=null){t.suspended=true;var e=t.link;if(e!=null){e.cancel()}t.link=null}}};t["tink.core._Future.SuspendableFuture"]=tink_core__$Future_SuspendableFuture;tink_core__$Future_SuspendableFuture.__name__="tink.core._Future.SuspendableFuture";tink_core__$Future_SuspendableFuture.__interfaces__=[tink_core_FutureObject];tink_core__$Future_SuspendableFuture.prototype={trigger:function(e){var t=this.callbacks;if(t!=null){var r=t;this.callbacks=null;this.suspended=false;this.result=e;this.link=null;this.wakeup=null;r.invoke(e,true)}},handle:function(e){var t=this.callbacks;if(t==null){V.invoke(e,this.result);return null}else{var r=t;var n=this.callbacks;var i=new tink_core__$Callback_ListCell(e,n);n.cells.push(i);n.used++;var s=i;if(this.suspended){this.suspended=false;this.link=this.wakeup($bind(this,this.trigger))}return s}},map:function(e){var t=this;return new tink_core__$Future_SuspendableFuture((function(r){return t.handle((function(t){var n=e(t);r(n)}))}))},flatMap:function(e){return Y.flatten(this.map(e))},gather:function(){return this},eager:function(){this.handle(V.fromNiladic((function(){})));return this},__class__:tink_core__$Future_SuspendableFuture};var tink_core__$Lazy_LazyFunc=function(e){this.f=e};t["tink.core._Lazy.LazyFunc"]=tink_core__$Lazy_LazyFunc;tink_core__$Lazy_LazyFunc.__name__="tink.core._Lazy.LazyFunc";tink_core__$Lazy_LazyFunc.__interfaces__=[tink_core__$Lazy_LazyObject];tink_core__$Lazy_LazyFunc.prototype={get:function(){if(this.f!=null){this.result=this.f();this.f=null}return this.result},map:function(e){var t=this;return new tink_core__$Lazy_LazyFunc((function(){var r=t.get();return e(r)}))},__class__:tink_core__$Lazy_LazyFunc};var tink_core_NamedWith=function(e,t){this.name=e;this.value=t};t["tink.core.NamedWith"]=tink_core_NamedWith;tink_core_NamedWith.__name__="tink.core.NamedWith";tink_core_NamedWith.prototype={__class__:tink_core_NamedWith};var tink_core_OutcomeTools=function(){};t["tink.core.OutcomeTools"]=tink_core_OutcomeTools;tink_core_OutcomeTools.__name__="tink.core.OutcomeTools";tink_core_OutcomeTools.sure=function(e){switch(e._hx_index){case 0:var t=e.data;return t;case 1:var r=e.failure;var n=tink_core_TypedError.asError(r);if(n==null){throw new js__$Boot_HaxeError(r)}else{var i=n;return i.throwSelf()}break}};tink_core_OutcomeTools.map=function(e,t){switch(e._hx_index){case 0:var r=e.data;return x.Success(t(r));case 1:var n=e.failure;return x.Failure(n)}};var q={};t["tink.core._Promise.Promise_Impl_"]=q;q.__name__="tink.core._Promise.Promise_Impl_";q.mapError=function(e,t){var r=e.map((function(e){switch(e._hx_index){case 0:var r=e.data;return e;case 1:var n=e.failure;return x.Failure(t(n))}}));return r.gather()};q.noise=function(e){return q.next(e,(function(e){return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success($.Noise)))}))};q.next=function(e,t,r){if(r==null){r=true}var n=r;if(n==null){n=true}var i=e.flatMap((function(e){switch(e._hx_index){case 0:var r=e.data;return t(r);case 1:var n=e.failure;return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Failure(n)))}}));if(n){return i.gather()}else{return i}};q.ofSpecific=function(e){return e};q.inParallel=function(e,t,r){if(e.length==0){return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success([])))}else{return Y.async((function(r){var n=[];var i=e.length;var s=null;var a=[];var l=false;var o=0;var u=HxOverrides.iter(e);var c=null;var done=function(e){if(s==null){l=true}else if(s!=null){s.cancel()}r(e)};var fail=function(e){i=0;done(x.Failure(e))};var set=function(e,t){n[e]=t;if((i-=1)==0){done(x.Success(n))}else if(u.hasNext()&&i>0){c()}};c=function(){o+=1;var e=o-1;var t=u.next().handle((function(t){switch(t._hx_index){case 0:var r=t.data;set(e,r);break;case 1:var n=t.failure;fail(n);break}}));a.push(t)};while(true){var h;if(u.hasNext()&&i>0){if(t!=null){t-=1;h=t+1>0}else{h=true}}else{h=false}if(!h){break}c()}s=G.fromMany(a);if(l){if(s!=null){s.cancel()}}}),r)}};q.inSequence=function(e){var t=null;t=function(r){if(r==e.length){return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success([])))}else{return q.next(e[r],(function(e){return q.next(t(r+1),(function(t){return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success([e].concat(t))))}))}))}};return t(0)};var Z={};t["tink.core._Promise.Next_Impl_"]=Z;Z.__name__="tink.core._Promise.Next_Impl_";Z.ofSafeSync=function(e){return function(t){return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success(e(t))))}};var X={};t["tink.core._Promise.Recover_Impl_"]=X;X.__name__="tink.core._Promise.Recover_Impl_";X.ofSync=function(e){return function(t){return new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(e(t)))}};var tink_parse_Char=function(){};t["tink.parse.Char"]=tink_parse_Char;tink_parse_Char.__name__="tink.parse.Char";var tink_parse_ParserBase=function(e){this.source=e;this.max=e.length;this.pos=0};t["tink.parse.ParserBase"]=tink_parse_ParserBase;tink_parse_ParserBase.__name__="tink.parse.ParserBase";tink_parse_ParserBase.prototype={skipIgnored:function(){while(this.lastSkip!=this.pos){this.lastSkip=this.pos;this.doSkipIgnored()}this.lastSkip=this.pos;return null},doSkipIgnored:function(){},allowHere:function(e){if(K.hasSub(this.source,e,this.pos)){this.pos+=e.length;return true}else{return false}},die:function(e,t){if(t==null){t=new IntIterator(this.pos,this.pos+1)}var r=t.min;var n=t.max;throw new js__$Boot_HaxeError(this.makeError(e,this.doMakePos(r,n==null?r+1:n)))},makeError:function(e,t){throw new js__$Boot_HaxeError("ni")},doMakePos:function(e,t){throw new js__$Boot_HaxeError("ni")},__class__:tink_parse_ParserBase};var tink_parse__$StringSlice_Data=function(e,t,r){this.string=e;this.start=t;this.end=r;if((this.length=r-t)<0){this.length=0;this.end=this.start}};t["tink.parse._StringSlice.Data"]=tink_parse__$StringSlice_Data;tink_parse__$StringSlice_Data.__name__="tink.parse._StringSlice.Data";tink_parse__$StringSlice_Data.prototype={toString:function(){if(this.representation==null){this.representation=this.string.substring(this.start,this.end)}return this.representation},__class__:tink_parse__$StringSlice_Data};var K={};t["tink.parse._StringSlice.StringSlice_Impl_"]=K;K.__name__="tink.parse._StringSlice.StringSlice_Impl_";K._new=function(e,t,r){var n=new tink_parse__$StringSlice_Data(e,t==e.length?t:t<0?t%e.length+e.length:t%e.length,r==e.length?r:r<0?r%e.length+e.length:r%e.length);return n};K.clamp=function(e,t){if(t<0){if(-t>e.length){return 0}else{return t+e.length}}else if(t>e.length){return e.length}else{return t}};K.wrap=function(e,t){if(e.length==0){return 0}else if(t<0){return t%e.length+e.length}else{return t%e.length}};K.ofString=function(e){if(e==null||e==""){return K.EMPTY}else if(e.length==1){var t=e.charCodeAt(0);if(t<K.CHARS.length){return K.CHARS[t]}else{return new tink_parse__$StringSlice_Data(e,0,e.length)}}else{return new tink_parse__$StringSlice_Data(e,0,e.length)}};K.hasSub=function(e,t,r){if(r==null){r=0}r=K.wrap(e,r);if(r+t.length>e.length){return false}var n=e;var i=t;return K.isEqual(n.string,n.start+r,t.length,i.string,i.start,i.length)};K.isEqual=function(e,t,r,n,i,s){if(s!=r){return false}var a=0;var l=s;while(a<l){var o=a++;if(e.charCodeAt(t+o)!=n.charCodeAt(i+o)){return false}}return true};var tink_semver_Parser=function(e){tink_parse_ParserBase.call(this,e)};t["tink.semver.Parser"]=tink_semver_Parser;tink_semver_Parser.__name__="tink.semver.Parser";tink_semver_Parser.__super__=tink_parse_ParserBase;tink_semver_Parser.prototype=$extend(tink_parse_ParserBase.prototype,{doSkipIgnored:function(){var e=tink_parse_Char.WHITE;while(true){var t;if(this.pos<this.max){var r=this.source;var n=r.string.charCodeAt(this.pos+r.start);t=e==null||e(n)}else{t=false}if(!t){break}this.pos++}},num:function(){var e=tink_parse_Char.DIGIT;this.skipIgnored();var t=this.pos;while(true){var r;if(this.pos<this.max){var n=this.source;var i=n.string.charCodeAt(this.pos+n.start);r=e==null||e(i)}else{r=false}if(!r){break}this.pos++}var s=this.source;var a=t;var l=this.pos;var o=Std.parseInt(K._new(s.string,K.wrap(s,a)+s.start,K.clamp(s,l)+s.start).toString());if(o==null){return-1}else{var u=o;return u}},parseVersion:function(){var e=this.parseInlineVersion();this.skipIgnored();if(this.pos==this.max){return e}else{return this.die("Unexpected string",new IntIterator(this.pos,this.max))}},parsePartial:function(){var e=this;var t=this.pos;var next=function(){if(e.allowHere(K.ofString("."))){return e.num()}else{return-1}};var r=this.num();var n=next();var i=next();var s=null;var a=-1;if(i>=0&&this.allowHere(tink_semver_Parser.HYPHEN)){var l=tink_parse_Char.LOWER;this.skipIgnored();var o=this.pos;while(true){var u;if(this.pos<this.max){var c=this.source;var h=c.string.charCodeAt(this.pos+c.start);u=l==null||l(h)}else{u=false}if(!u){break}this.pos++}var d=this.source;var v=o;var m=this.pos;s=tink_core_OutcomeTools.sure(J.ofString(K._new(d.string,K.wrap(d,v)+d.start,K.clamp(d,m)+d.start).toString()));if(this.allowHere(tink_semver_Parser.DOT)){a=this.num()}}return{major:r,minor:n,patch:i,preview:s,previewNum:a,pos:new IntIterator(t,this.pos)}},clamp:function(e){if(e<0){return 0}else{return e}},full:function(e,t){if(t!=true&&e.patch<0){this.die("Partial version not allowed",e.pos)}var r=Q._new(e.major,this.clamp(e.minor),this.clamp(e.patch));if(e.preview!=null){return new tink_semver__$Version_Data(r.major,r.minor,r.patch,e.preview,e.previewNum)}else{return r}},parseInlineVersion:function(){return this.full(this.parsePartial())},makeError:function(e,t){var r=this.source;return new tink_core_TypedError(null,""+e+" at "+('"'+K._new(r.string,K.wrap(r,t.min)+r.start,K.clamp(r,t.max)+r.start).toString()+'"('+t.min+"-"+t.max+")")+(' in "'+this.source.toString()+'"'),{fileName:"tink/semver/Parser.hx",lineNumber:149,className:"tink.semver.Parser",methodName:"makeError"})},doMakePos:function(e,t){return new IntIterator(e,t)},__class__:tink_semver_Parser});var J={};t["tink.semver._Preview.Preview_Impl_"]=J;J.__name__="tink.semver._Preview.Preview_Impl_";J.ofString=function(e){switch(e){case"alpha":return x.Success("alpha");case"beta":return x.Success("beta");case"rc":return x.Success("rc");default:return x.Failure(new tink_core_TypedError(422,""+e+" should be alpha | beta | rc",{fileName:"tink/semver/Preview.hx",lineNumber:14,className:"tink.semver._Preview.Preview_Impl_",methodName:"ofString"}))}};var Q={};t["tink.semver._Version.Version_Impl_"]=Q;Q.__name__="tink.semver._Version.Version_Impl_";Q._new=function(e,t,r){if(r==null){r=0}if(t==null){t=0}var n=new tink_semver__$Version_Data(e,t,r);return n};Q.compare=function(e,t){var r=e.major-t.major;var n=e.minor-t.minor;var i=ee.chain(r>0?1:r<0?-1:0,n>0?1:n<0?-1:0);var s=e.patch-t.patch;var a=ee.chain(i,s>0?1:s<0?-1:0);var l=Q.idx(e,e.preview)-Q.idx(e,t.preview);var o=ee.chain(a,l>0?1:l<0?-1:0);var u=e.previewNum-t.previewNum;return ee.chain(o,u>0?1:u<0?-1:0)};Q.idx=function(e,t){if(t==null){return 100}else{switch(t){case"alpha":return 1;case"beta":return 2;case"rc":return 3}}};Q.parse=function(e){return tink_core_TypedError.catchExceptions((i=new tink_semver_Parser(K.ofString(e)),$bind(i,i.parseVersion)),Q.reportError,{fileName:"tink/semver/Version.hx",lineNumber:97,className:"tink.semver._Version.Version_Impl_",methodName:"parse"})};Q.reportError=function(e){if(typeof e=="string"){return new tink_core_TypedError(422,e,{fileName:"tink/semver/Version.hx",lineNumber:103,className:"tink.semver._Version.Version_Impl_",methodName:"reportError"})}else{return tink_core_TypedError.withData(422,Std.string(e),e,{fileName:"tink/semver/Version.hx",lineNumber:105,className:"tink.semver._Version.Version_Impl_",methodName:"reportError"})}};var tink_semver__$Version_Data=function(e,t,r,n,i){if(i==null){i=-1}if(e<0||t<0||r<0){throw new js__$Boot_HaxeError("version components must not be negative")}this.major=e;this.minor=t;this.patch=r;this.preview=n;this.previewNum=i};t["tink.semver._Version.Data"]=tink_semver__$Version_Data;tink_semver__$Version_Data.__name__="tink.semver._Version.Data";tink_semver__$Version_Data.prototype={toString:function(){var e=""+this.major+"."+this.minor+"."+this.patch;if(this.preview!=null){e+="-"+this.preview;if(this.previewNum!=-1){e+="."+this.previewNum}}return e},__class__:tink_semver__$Version_Data};var ee={};t["tink.semver._Version.Comparison_Impl_"]=ee;ee.__name__="tink.semver._Version.Comparison_Impl_";ee.chain=function(e,t){if(e==0){return t}else{return e}};var te={};t["tink.url._Host.Host_Impl_"]=te;te.__name__="tink.url._Host.Host_Impl_";te._new=function(e,t){var r;if(t==null){r=e}else if(t>65535||t<=0){throw new js__$Boot_HaxeError("Invalid port")}else{r=""+e+":"+t}return r};te.get_name=function(e){if(e==null){return null}else{var t=e.split("]");switch(t.length){case 1:var r=t[0];return r.split(":")[0];case 2:var n=t[1];var i=t[0];return i+"]";default:throw new js__$Boot_HaxeError("assert")}}};te.get_port=function(e){if(e==null){return null}else{var t=e.split("]");switch(t.length){case 1:var r=t[0];var n=r.split(":")[1];if(n==null){return null}else{var i=n;return Std.parseInt(i)}break;case 2:var s=t[0];var a=t[1];var l=a.split(":")[1];if(l==null){return null}else{var o=l;return Std.parseInt(o)}break;default:throw new js__$Boot_HaxeError("assert")}}};var re={};t["tink.url._Path.Path_Impl_"]=re;re.__name__="tink.url._Path.Path_Impl_";re.parts=function(e){var t=[];var r=0;var n=e.split("/");while(r<n.length){var i=n[r];++r;if(i!=""){var s=i;t.push(s)}}return t};re.join=function(e,t){if(t==""){return e}else if(t.charAt(0)=="/"){return t}else if(e.charAt(e.length-1)=="/"){return re.ofString(e+t)}else{var r=e.lastIndexOf("/");if(r==-1){return t}else{var n=r;return re.ofString(HxOverrides.substr(e,0,n+1)+t)}}};re.ofString=function(e){var t=re.normalize(e);return t};re.normalize=function(e){e=StringTools.trim(StringTools.replace(e,"\\","/"));if(e=="."){return"./"}var t=StringTools.endsWith(e,"/..")||StringTools.endsWith(e,"/")||StringTools.endsWith(e,"/.");var r=[];var n=StringTools.startsWith(e,"/");var i=0;var s=0;var a=e.split("/");while(s<a.length){var l=a[s];++s;var o=StringTools.trim(l);switch(o){case"":break;case".":break;case"..":if(r.pop()==null){++i}break;default:var u=o;r.push(u)}}if(n){r.unshift("")}else{var c=0;var h=i;while(c<h){var d=c++;r.unshift("..")}}if(t){r.push("")}return r.join("/")};var ne={};t["tink.url._Portion.Portion_Impl_"]=ne;ne.__name__="tink.url._Portion.Portion_Impl_";ne.stringly=function(e){return ne.toString(e)};ne.toString=function(e){if(e==null){return null}else{return decodeURIComponent(e.split("+").join(" "))}};ne.ofString=function(e){var t=e==null?"":encodeURIComponent(e);return t};var ie={};t["tink.url._PortionArray.PortionArray_Impl_"]=ie;ie.__name__="tink.url._PortionArray.PortionArray_Impl_";ie.toStringArray=function(e){var t=[];var r=0;while(r<e.length){var n=e[r];++r;t.push(ne.toString(n))}return t};var se={};t["tink.url._Query.Query_Impl_"]=se;se.__name__="tink.url._Query.Query_Impl_";se.toMap=function(e){var t=new haxe_ds_StringMap;var r=new tink_url__$Query_QueryStringParser(e,"&","=",0);while(r.hasNext()){var n=r.next();var i=n.name.toString();var s=n.value;if(fe[i]!=null){t.setReserved(i,s)}else{t.h[i]=s}}return t};se.ofObj=function(e){var t=[];var r=t;var n=e;var i=0;var s=Reflect.fields(n);while(i<s.length){var a=s[i];++i;r.push(ne.ofString(a)+"="+ne.ofString(n[a]))}return r.join("&")};var tink_url__$Query_QueryStringParser=function(e,t,r,n){this.s=e==null?"":e;this.sep=t;this.set=r;this.pos=n};t["tink.url._Query.QueryStringParser"]=tink_url__$Query_QueryStringParser;tink_url__$Query_QueryStringParser.__name__="tink.url._Query.QueryStringParser";tink_url__$Query_QueryStringParser.trimmedSub=function(e,t,r){if(t>=e.length){var n="";return n}while(e.charCodeAt(t)<33)++t;if(r<e.length-1){while(e.charCodeAt(r-1)<33)--r}var i=e.substring(t,r);return i};tink_url__$Query_QueryStringParser.prototype={hasNext:function(){return this.pos<this.s.length},next:function(){var e=this.s.indexOf(this.sep,this.pos);if(e==-1){e=this.s.length}var t=this.s.indexOf(this.set,this.pos);var r=this.pos;this.pos=e+this.sep.length;if(t==-1||t>e){return new tink_core_NamedWith(ne.stringly(tink_url__$Query_QueryStringParser.trimmedSub(this.s,r,e)),ne.ofString(""))}else{return new tink_core_NamedWith(ne.stringly(tink_url__$Query_QueryStringParser.trimmedSub(this.s,r,t)),tink_url__$Query_QueryStringParser.trimmedSub(this.s,t+this.set.length,e))}},__class__:tink_url__$Query_QueryStringParser};function $getIterator(e){if(e instanceof Array)return HxOverrides.iter(e);else return e.iterator()}function $bind(t,r){if(r==null)return null;if(r.__id__==null)r.__id__=e.$haxeUID++;var n;if(t.hx__closures__==null)t.hx__closures__={};else n=t.hx__closures__[r.__id__];if(n==null){n=r.bind(t);t.hx__closures__[r.__id__]=n}return n}function $arrayPush(e){this.push(e)}e.$haxeUID|=0;js_Boot.__toStr={}.toString;if(String.fromCodePoint==null)String.fromCodePoint=function(e){return e<65536?String.fromCharCode(e):String.fromCharCode((e>>10)+55232)+String.fromCharCode((e&1023)+56320)};String.prototype.__class__=t["String"]=String;String.__name__="String";t["Array"]=Array;Array.__name__="Array";Date.prototype.__class__=t["Date"]=Date;Date.__name__="Date";var ae={};var le={};var oe=Number;var ue=Boolean;var ce={};var he={};t["Math"]=Math;haxe_ds_ObjectMap.count=0;var fe={};Object.defineProperty(js__$Boot_HaxeError.prototype,"message",{get:function(){return String(this.val)}});if(ArrayBuffer.prototype.slice==null){ArrayBuffer.prototype.slice=js_lib__$ArrayBuffer_ArrayBufferCompat.sliceImpl}ANSI.values=function(e){var t;var r=new haxe_ds_EnumValueMap;r.set(s.Off,0);r.set(s.Bold,1);r.set(s.Underline,4);r.set(s.Blink,5);r.set(s.ReverseVideo,7);r.set(s.Concealed,8);r.set(s.BoldOff,22);r.set(s.UnderlineOff,24);r.set(s.BlinkOff,25);r.set(s.NormalVideo,27);r.set(s.ConcealedOff,28);r.set(s.Black,30);r.set(s.Red,31);r.set(s.Green,32);r.set(s.Yellow,33);r.set(s.Blue,34);r.set(s.Magenta,35);r.set(s.Cyan,36);r.set(s.White,37);r.set(s.DefaultForeground,39);r.set(s.BlackBack,40);r.set(s.RedBack,41);r.set(s.GreenBack,42);r.set(s.YellowBack,43);r.set(s.BlueBack,44);r.set(s.MagentaBack,45);r.set(s.CyanBack,46);r.set(s.WhiteBack,47);r.set(s.DefaultBackground,49);t=r;return t}(this);ANSI.available=ANSI.detectSupport();ANSI.strip=false;ANSI.stripIfUnavailable=true;DateTools.DAY_SHORT_NAMES=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];DateTools.DAY_NAMES=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];DateTools.MONTH_SHORT_NAMES=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];DateTools.MONTH_NAMES=["January","February","March","April","May","June","July","August","September","October","November","December"];haxe_SysTools.winMetaCharacters=[32,40,41,37,33,94,34,60,62,38,124,10,13,44,59];haxe_Serializer.USE_CACHE=false;haxe_Serializer.USE_ENUM_INDEX=false;haxe_Serializer.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";haxe_Unserializer.DEFAULT_RESOLVER=new haxe__$Unserializer_DefaultResolver;haxe_Unserializer.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";haxeshim_Os.IS_WINDOWS=Sys.systemName()=="Windows";haxeshim_Os.DELIMITER=haxeshim_Os.IS_WINDOWS?";":":";haxeshim_HaxeInstallation.EXT=haxeshim_Os.IS_WINDOWS?".exe":"";haxeshim__$Logger_SysLogger.isTTY=process.stderr.isTTY;haxeshim__$Logger_SysLogger.out=function(e){var t;ANSI.available=haxeshim__$Logger_SysLogger.isTTY;t=new _$Sys_FileOutput(2);return t}(this);haxeshim_Scope.CONFIG_FILE=".haxerc";haxeshim_Scope.fs={isDirectory:function(e){try{return sys_FileSystem.isDirectory(e)}catch(e){var t=e instanceof js__$Boot_HaxeError?e.val:e;return false}},readFile:function(e){try{return x.Success(w.readFileSync(e,{encoding:"utf8"}))}catch(t){return x.Failure("Cannot read "+e+" because "+Std.string(t instanceof js__$Boot_HaxeError?t.val:t))}}};haxeshim_Scope.DEFAULT_ROOT=function(e){var t;var r=haxeshim_Scope.env("HAXE_ROOT");var n=haxeshim_Scope.env("HAXESHIM_ROOT");var i=new tink_core__$Lazy_LazyConst(process.env[haxeshim_Os.IS_WINDOWS?"APPDATA":"HOME"]+"/haxe");var s;if(n._hx_index==0){var a=n.v;s=a}else{s=i.get()}var l=new tink_core__$Lazy_LazyConst(s);t=r._hx_index==0?function(e){var t;var n=r.v;t=n;return t}(e):l.get();return t}(this);haxeshim_Neko.PATH=haxeshim_Os.slashes(haxeshim_Scope.DEFAULT_ROOT+"/neko");haxeshim_Neko.isset=false;haxeshim_Neko.ENV=function(e){var t;var r;switch(Sys.systemName()){case"Mac":r="DYLD_LIBRARY_PATH";break;case"Windows":r="PATH";break;default:r="LD_LIBRARY_PATH"}var n=process.env[r];t=n==null?function(e){var t;var n=new haxe_ds_StringMap;{var i=haxeshim_Neko.PATH;if(fe[r]!=null){n.setReserved(r,i)}else{n.h[r]=i}}t=m.ofMap(n);return t}(e):function(e){var t;var i=n;t=i.indexOf(haxeshim_Neko.PATH)!=-1?m.ofVars({}):function(e){var t;var i=n;var s=new haxe_ds_StringMap;{var a=i+haxeshim_Os.DELIMITER+haxeshim_Neko.PATH;if(fe[r]!=null){s.setReserved(r,a)}else{s.h[r]=a}}t=m.ofMap(s);return t}(e);return t}(e);return t}(this);lix_client_DownloadedArchive.RESERVED="!#$&'()*+,/:;=?@[]";lix_client_Download.initZip=function(e){var t;var r=T.validateFileName;T.validateFileName=function(e){return null};t=true;return t}(this);lix_client_Download.USER_AGENT="switchx";lix_client_LibVersion.UNDEFINED=new lix_client_LibVersion(u.None,u.None);lix_client_haxe_Switcher.VERSION_INFO="version.json";lix_client_haxe_Switcher.NIGHTLIES="https://build.haxe.org/builds/haxe";lix_client_haxe_Switcher.PLATFORM=function(e){var t;var r=process.arch;t=function(e){var t;switch(Sys.systemName()){case"Mac":t="mac";break;case"Windows":t="windows";break;default:t=r=="arm64"?"linux-arm64":"linux64"}return t}(e);return t}(this);U.hex=function(e){var t;var r=new haxe_ds_IntMap;{var n=0;var i="0123456789abcdefABCDEF".split("");while(n<i.length){var s=i[n];++n;r.h[HxOverrides.cca(s,0)]=true}}t=r;return t}(this);lix_client_sources_Haxelib.OFFICIAL="https://lib.haxe.org/";sys_io_File.copyBuf=k.alloc(65536);V.depth=0;q.NOISE=new tink_core__$Future_SyncFuture(new tink_core__$Lazy_LazyConst(x.Success($.Noise)));tink_parse_Char.WHITE=function(e){return e<33};tink_parse_Char.LOWER=function(e){if(e>=97){return e<=122}else{return false}};tink_parse_Char.DIGIT=function(e){if(e>=48){return e<=57}else{return false}};K.CHARS=function(e){var t;var r=[];{var n=0;while(n<128){var i=n++;r.push(new tink_parse__$StringSlice_Data(String.fromCodePoint(i),0,1))}}t=r;return t}(this);K.EMPTY=new tink_parse__$StringSlice_Data("",0,0);tink_semver_Parser.DOT=K.ofString(".");tink_semver_Parser.HYPHEN=K.ofString("-");lix_cli_Cli.main()})(typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:this)},4794:(e,t,r)=>{var n=r(4300).Buffer;var i=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];if(typeof Int32Array!=="undefined"){i=new Int32Array(i)}function ensureBuffer(e){if(n.isBuffer(e)){return e}var t=typeof n.alloc==="function"&&typeof n.from==="function";if(typeof e==="number"){return t?n.alloc(e):new n(e)}else if(typeof e==="string"){return t?n.from(e):new n(e)}else{throw new Error("input must be buffer, number, or string, received "+typeof e)}}function bufferizeInt(e){var t=ensureBuffer(4);t.writeInt32BE(e,0);return t}function _crc32(e,t){e=ensureBuffer(e);if(n.isBuffer(t)){t=t.readUInt32BE(0)}var r=~~t^-1;for(var s=0;s<e.length;s++){r=i[(r^e[s])&255]^r>>>8}return r^-1}function crc32(){return bufferizeInt(_crc32.apply(null,arguments))}crc32.signed=function(){return _crc32.apply(null,arguments)};crc32.unsigned=function(){return _crc32.apply(null,arguments)>>>0};e.exports=crc32},9051:(e,t,r)=>{"use strict";const n=r(7147);const i=r(1017);const s=n.lchown?"lchown":"chown";const a=n.lchownSync?"lchownSync":"chownSync";const l=n.lchown&&!process.version.match(/v1[1-9]+\./)&&!process.version.match(/v10\.[6-9]/);const lchownSync=(e,t,r)=>{try{return n[a](e,t,r)}catch(e){if(e.code!=="ENOENT")throw e}};const chownSync=(e,t,r)=>{try{return n.chownSync(e,t,r)}catch(e){if(e.code!=="ENOENT")throw e}};const o=l?(e,t,r,i)=>s=>{if(!s||s.code!=="EISDIR")i(s);else n.chown(e,t,r,i)}:(e,t,r,n)=>n;const u=l?(e,t,r)=>{try{return lchownSync(e,t,r)}catch(n){if(n.code!=="EISDIR")throw n;chownSync(e,t,r)}}:(e,t,r)=>lchownSync(e,t,r);const c=process.version;let readdir=(e,t,r)=>n.readdir(e,t,r);let readdirSync=(e,t)=>n.readdirSync(e,t);if(/^v4\./.test(c))readdir=(e,t,r)=>n.readdir(e,r);const chown=(e,t,r,i)=>{n[s](e,t,r,o(e,t,r,(e=>{i(e&&e.code!=="ENOENT"?e:null)})))};const chownrKid=(e,t,r,s,a)=>{if(typeof t==="string")return n.lstat(i.resolve(e,t),((n,i)=>{if(n)return a(n.code!=="ENOENT"?n:null);i.name=t;chownrKid(e,i,r,s,a)}));if(t.isDirectory()){chownr(i.resolve(e,t.name),r,s,(n=>{if(n)return a(n);const l=i.resolve(e,t.name);chown(l,r,s,a)}))}else{const n=i.resolve(e,t.name);chown(n,r,s,a)}};const chownr=(e,t,r,n)=>{readdir(e,{withFileTypes:true},((i,s)=>{if(i){if(i.code==="ENOENT")return n();else if(i.code!=="ENOTDIR"&&i.code!=="ENOTSUP")return n(i)}if(i||!s.length)return chown(e,t,r,n);let a=s.length;let l=null;const then=i=>{if(l)return;if(i)return n(l=i);if(--a===0)return chown(e,t,r,n)};s.forEach((n=>chownrKid(e,n,t,r,then)))}))};const chownrKidSync=(e,t,r,s)=>{if(typeof t==="string"){try{const r=n.lstatSync(i.resolve(e,t));r.name=t;t=r}catch(e){if(e.code==="ENOENT")return;else throw e}}if(t.isDirectory())chownrSync(i.resolve(e,t.name),r,s);u(i.resolve(e,t.name),r,s)};const chownrSync=(e,t,r)=>{let n;try{n=readdirSync(e,{withFileTypes:true})}catch(n){if(n.code==="ENOENT")return;else if(n.code==="ENOTDIR"||n.code==="ENOTSUP")return u(e,t,r);else throw n}if(n&&n.length)n.forEach((n=>chownrKidSync(e,n,t,r)));return u(e,t,r)};e.exports=chownr;chownr.sync=chownrSync},5010:(e,t,r)=>{var n=r(7147);var i=r(3837);var s=r(2781);var a=s.Readable;var l=s.Writable;var o=s.PassThrough;var u=r(4833);var c=r(2361).EventEmitter;t.createFromBuffer=createFromBuffer;t.createFromFd=createFromFd;t.BufferSlicer=BufferSlicer;t.FdSlicer=FdSlicer;i.inherits(FdSlicer,c);function FdSlicer(e,t){t=t||{};c.call(this);this.fd=e;this.pend=new u;this.pend.max=1;this.refCount=0;this.autoClose=!!t.autoClose}FdSlicer.prototype.read=function(e,t,r,i,s){var a=this;a.pend.go((function(l){n.read(a.fd,e,t,r,i,(function(e,t,r){l();s(e,t,r)}))}))};FdSlicer.prototype.write=function(e,t,r,i,s){var a=this;a.pend.go((function(l){n.write(a.fd,e,t,r,i,(function(e,t,r){l();s(e,t,r)}))}))};FdSlicer.prototype.createReadStream=function(e){return new ReadStream(this,e)};FdSlicer.prototype.createWriteStream=function(e){return new WriteStream(this,e)};FdSlicer.prototype.ref=function(){this.refCount+=1};FdSlicer.prototype.unref=function(){var e=this;e.refCount-=1;if(e.refCount>0)return;if(e.refCount<0)throw new Error("invalid unref");if(e.autoClose){n.close(e.fd,onCloseDone)}function onCloseDone(t){if(t){e.emit("error",t)}else{e.emit("close")}}};i.inherits(ReadStream,a);function ReadStream(e,t){t=t||{};a.call(this,t);this.context=e;this.context.ref();this.start=t.start||0;this.endOffset=t.end;this.pos=this.start;this.destroyed=false}ReadStream.prototype._read=function(e){var t=this;if(t.destroyed)return;var r=Math.min(t._readableState.highWaterMark,e);if(t.endOffset!=null){r=Math.min(r,t.endOffset-t.pos)}if(r<=0){t.destroyed=true;t.push(null);t.context.unref();return}t.context.pend.go((function(e){if(t.destroyed)return e();var i=new Buffer(r);n.read(t.context.fd,i,0,r,t.pos,(function(r,n){if(r){t.destroy(r)}else if(n===0){t.destroyed=true;t.push(null);t.context.unref()}else{t.pos+=n;t.push(i.slice(0,n))}e()}))}))};ReadStream.prototype.destroy=function(e){if(this.destroyed)return;e=e||new Error("stream destroyed");this.destroyed=true;this.emit("error",e);this.context.unref()};i.inherits(WriteStream,l);function WriteStream(e,t){t=t||{};l.call(this,t);this.context=e;this.context.ref();this.start=t.start||0;this.endOffset=t.end==null?Infinity:+t.end;this.bytesWritten=0;this.pos=this.start;this.destroyed=false;this.on("finish",this.destroy.bind(this))}WriteStream.prototype._write=function(e,t,r){var i=this;if(i.destroyed)return;if(i.pos+e.length>i.endOffset){var s=new Error("maximum file length exceeded");s.code="ETOOBIG";i.destroy();r(s);return}i.context.pend.go((function(t){if(i.destroyed)return t();n.write(i.context.fd,e,0,e.length,i.pos,(function(e,n){if(e){i.destroy();t();r(e)}else{i.bytesWritten+=n;i.pos+=n;i.emit("progress");t();r()}}))}))};WriteStream.prototype.destroy=function(){if(this.destroyed)return;this.destroyed=true;this.context.unref()};i.inherits(BufferSlicer,c);function BufferSlicer(e,t){c.call(this);t=t||{};this.refCount=0;this.buffer=e;this.maxChunkSize=t.maxChunkSize||Number.MAX_SAFE_INTEGER}BufferSlicer.prototype.read=function(e,t,r,n,i){var s=n+r;var a=s-this.buffer.length;var l=a>0?a:r;this.buffer.copy(e,t,n,s);setImmediate((function(){i(null,l)}))};BufferSlicer.prototype.write=function(e,t,r,n,i){e.copy(this.buffer,n,t,t+r);setImmediate((function(){i(null,r,e)}))};BufferSlicer.prototype.createReadStream=function(e){e=e||{};var t=new o(e);t.destroyed=false;t.start=e.start||0;t.endOffset=e.end;t.pos=t.endOffset||this.buffer.length;var r=this.buffer.slice(t.start,t.pos);var n=0;while(true){var i=n+this.maxChunkSize;if(i>=r.length){if(n<r.length){t.write(r.slice(n,r.length))}break}t.write(r.slice(n,i));n=i}t.end();t.destroy=function(){t.destroyed=true};return t};BufferSlicer.prototype.createWriteStream=function(e){var t=this;e=e||{};var r=new l(e);r.start=e.start||0;r.endOffset=e.end==null?this.buffer.length:+e.end;r.bytesWritten=0;r.pos=r.start;r.destroyed=false;r._write=function(e,n,i){if(r.destroyed)return;var s=r.pos+e.length;if(s>r.endOffset){var a=new Error("maximum file length exceeded");a.code="ETOOBIG";r.destroyed=true;i(a);return}e.copy(t.buffer,r.pos,0,e.length);r.bytesWritten+=e.length;r.pos=s;r.emit("progress");i()};r.destroy=function(){r.destroyed=true};return r};BufferSlicer.prototype.ref=function(){this.refCount+=1};BufferSlicer.prototype.unref=function(){this.refCount-=1;if(this.refCount<0){throw new Error("invalid unref")}};function createFromBuffer(e,t){return new BufferSlicer(e,t)}function createFromFd(e,t){return new FdSlicer(e,t)}},7714:(e,t,r)=>{"use strict";const n=r(1077);const i=r(2361).EventEmitter;const s=r(7147);let a=s.writev;if(!a){const e=process.binding("fs");const t=e.FSReqWrap||e.FSReqCallback;a=(r,n,i,s)=>{const done=(e,t)=>s(e,t,n);const a=new t;a.oncomplete=done;e.writeBuffers(r,n,i,a)}}const l=Symbol("_autoClose");const o=Symbol("_close");const u=Symbol("_ended");const c=Symbol("_fd");const h=Symbol("_finished");const d=Symbol("_flags");const v=Symbol("_flush");const m=Symbol("_handleChunk");const p=Symbol("_makeBuf");const _=Symbol("_mode");const g=Symbol("_needDrain");const w=Symbol("_onerror");const x=Symbol("_onopen");const b=Symbol("_onread");const y=Symbol("_onwrite");const S=Symbol("_open");const N=Symbol("_path");const E=Symbol("_pos");const k=Symbol("_queue");const R=Symbol("_read");const O=Symbol("_readSize");const C=Symbol("_reading");const I=Symbol("_remain");const A=Symbol("_size");const F=Symbol("_write");const L=Symbol("_writing");const D=Symbol("_defaultFlag");const T=Symbol("_errored");class ReadStream extends n{constructor(e,t){t=t||{};super(t);this.readable=true;this.writable=false;if(typeof e!=="string")throw new TypeError("path must be a string");this[T]=false;this[c]=typeof t.fd==="number"?t.fd:null;this[N]=e;this[O]=t.readSize||16*1024*1024;this[C]=false;this[A]=typeof t.size==="number"?t.size:Infinity;this[I]=this[A];this[l]=typeof t.autoClose==="boolean"?t.autoClose:true;if(typeof this[c]==="number")this[R]();else this[S]()}get fd(){return this[c]}get path(){return this[N]}write(){throw new TypeError("this is a readable stream")}end(){throw new TypeError("this is a readable stream")}[S](){s.open(this[N],"r",((e,t)=>this[x](e,t)))}[x](e,t){if(e)this[w](e);else{this[c]=t;this.emit("open",t);this[R]()}}[p](){return Buffer.allocUnsafe(Math.min(this[O],this[I]))}[R](){if(!this[C]){this[C]=true;const e=this[p]();if(e.length===0)return process.nextTick((()=>this[b](null,0,e)));s.read(this[c],e,0,e.length,null,((e,t,r)=>this[b](e,t,r)))}}[b](e,t,r){this[C]=false;if(e)this[w](e);else if(this[m](t,r))this[R]()}[o](){if(this[l]&&typeof this[c]==="number"){const e=this[c];this[c]=null;s.close(e,(e=>e?this.emit("error",e):this.emit("close")))}}[w](e){this[C]=true;this[o]();this.emit("error",e)}[m](e,t){let r=false;this[I]-=e;if(e>0)r=super.write(e<t.length?t.slice(0,e):t);if(e===0||this[I]<=0){r=false;this[o]();super.end()}return r}emit(e,t){switch(e){case"prefinish":case"finish":break;case"drain":if(typeof this[c]==="number")this[R]();break;case"error":if(this[T])return;this[T]=true;return super.emit(e,t);default:return super.emit(e,t)}}}class ReadStreamSync extends ReadStream{[S](){let e=true;try{this[x](null,s.openSync(this[N],"r"));e=false}finally{if(e)this[o]()}}[R](){let e=true;try{if(!this[C]){this[C]=true;do{const e=this[p]();const t=e.length===0?0:s.readSync(this[c],e,0,e.length,null);if(!this[m](t,e))break}while(true);this[C]=false}e=false}finally{if(e)this[o]()}}[o](){if(this[l]&&typeof this[c]==="number"){const e=this[c];this[c]=null;s.closeSync(e);this.emit("close")}}}class WriteStream extends i{constructor(e,t){t=t||{};super(t);this.readable=false;this.writable=true;this[T]=false;this[L]=false;this[u]=false;this[g]=false;this[k]=[];this[N]=e;this[c]=typeof t.fd==="number"?t.fd:null;this[_]=t.mode===undefined?438:t.mode;this[E]=typeof t.start==="number"?t.start:null;this[l]=typeof t.autoClose==="boolean"?t.autoClose:true;const r=this[E]!==null?"r+":"w";this[D]=t.flags===undefined;this[d]=this[D]?r:t.flags;if(this[c]===null)this[S]()}emit(e,t){if(e==="error"){if(this[T])return;this[T]=true}return super.emit(e,t)}get fd(){return this[c]}get path(){return this[N]}[w](e){this[o]();this[L]=true;this.emit("error",e)}[S](){s.open(this[N],this[d],this[_],((e,t)=>this[x](e,t)))}[x](e,t){if(this[D]&&this[d]==="r+"&&e&&e.code==="ENOENT"){this[d]="w";this[S]()}else if(e)this[w](e);else{this[c]=t;this.emit("open",t);this[v]()}}end(e,t){if(e)this.write(e,t);this[u]=true;if(!this[L]&&!this[k].length&&typeof this[c]==="number")this[y](null,0);return this}write(e,t){if(typeof e==="string")e=Buffer.from(e,t);if(this[u]){this.emit("error",new Error("write() after end()"));return false}if(this[c]===null||this[L]||this[k].length){this[k].push(e);this[g]=true;return false}this[L]=true;this[F](e);return true}[F](e){s.write(this[c],e,0,e.length,this[E],((e,t)=>this[y](e,t)))}[y](e,t){if(e)this[w](e);else{if(this[E]!==null)this[E]+=t;if(this[k].length)this[v]();else{this[L]=false;if(this[u]&&!this[h]){this[h]=true;this[o]();this.emit("finish")}else if(this[g]){this[g]=false;this.emit("drain")}}}}[v](){if(this[k].length===0){if(this[u])this[y](null,0)}else if(this[k].length===1)this[F](this[k].pop());else{const e=this[k];this[k]=[];a(this[c],e,this[E],((e,t)=>this[y](e,t)))}}[o](){if(this[l]&&typeof this[c]==="number"){const e=this[c];this[c]=null;s.close(e,(e=>e?this.emit("error",e):this.emit("close")))}}}class WriteStreamSync extends WriteStream{[S](){let e;if(this[D]&&this[d]==="r+"){try{e=s.openSync(this[N],this[d],this[_])}catch(e){if(e.code==="ENOENT"){this[d]="w";return this[S]()}else throw e}}else e=s.openSync(this[N],this[d],this[_]);this[x](null,e)}[o](){if(this[l]&&typeof this[c]==="number"){const e=this[c];this[c]=null;s.closeSync(e);this.emit("close")}}[F](e){let t=true;try{this[y](null,s.writeSync(this[c],e,0,e.length,this[E]));t=false}finally{if(t)try{this[o]()}catch(e){}}}}t.ReadStream=ReadStream;t.ReadStreamSync=ReadStreamSync;t.WriteStream=WriteStream;t.WriteStreamSync=WriteStreamSync},7356:e=>{"use strict";e.exports=clone;function clone(e){if(e===null||typeof e!=="object")return e;if(e instanceof Object)var t={__proto__:e.__proto__};else var t=Object.create(null);Object.getOwnPropertyNames(e).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}));return t}},7758:(e,t,r)=>{var n=r(7147);var i=r(263);var s=r(3086);var a=r(7356);var l=r(3837);var o;var u;if(typeof Symbol==="function"&&typeof Symbol.for==="function"){o=Symbol.for("graceful-fs.queue");u=Symbol.for("graceful-fs.previous")}else{o="___graceful-fs.queue";u="___graceful-fs.previous"}function noop(){}var c=noop;if(l.debuglog)c=l.debuglog("gfs4");else if(/\bgfs4\b/i.test(process.env.NODE_DEBUG||""))c=function(){var e=l.format.apply(l,arguments);e="GFS4: "+e.split(/\n/).join("\nGFS4: ");console.error(e)};if(!global[o]){var h=[];Object.defineProperty(global,o,{get:function(){return h}});n.close=function(e){function close(t,r){return e.call(n,t,(function(e){if(!e){retry()}if(typeof r==="function")r.apply(this,arguments)}))}Object.defineProperty(close,u,{value:e});return close}(n.close);n.closeSync=function(e){function closeSync(t){e.apply(n,arguments);retry()}Object.defineProperty(closeSync,u,{value:e});return closeSync}(n.closeSync);if(/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")){process.on("exit",(function(){c(global[o]);r(9491).equal(global[o].length,0)}))}}e.exports=patch(a(n));if(process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!n.__patched){e.exports=patch(n);n.__patched=true}function patch(e){i(e);e.gracefulify=patch;e.createReadStream=createReadStream;e.createWriteStream=createWriteStream;var t=e.readFile;e.readFile=readFile;function readFile(e,r,n){if(typeof r==="function")n=r,r=null;return go$readFile(e,r,n);function go$readFile(e,r,n){return t(e,r,(function(t){if(t&&(t.code==="EMFILE"||t.code==="ENFILE"))enqueue([go$readFile,[e,r,n]]);else{if(typeof n==="function")n.apply(this,arguments);retry()}}))}}var r=e.writeFile;e.writeFile=writeFile;function writeFile(e,t,n,i){if(typeof n==="function")i=n,n=null;return go$writeFile(e,t,n,i);function go$writeFile(e,t,n,i){return r(e,t,n,(function(r){if(r&&(r.code==="EMFILE"||r.code==="ENFILE"))enqueue([go$writeFile,[e,t,n,i]]);else{if(typeof i==="function")i.apply(this,arguments);retry()}}))}}var n=e.appendFile;if(n)e.appendFile=appendFile;function appendFile(e,t,r,i){if(typeof r==="function")i=r,r=null;return go$appendFile(e,t,r,i);function go$appendFile(e,t,r,i){return n(e,t,r,(function(n){if(n&&(n.code==="EMFILE"||n.code==="ENFILE"))enqueue([go$appendFile,[e,t,r,i]]);else{if(typeof i==="function")i.apply(this,arguments);retry()}}))}}var a=e.readdir;e.readdir=readdir;function readdir(e,t,r){var n=[e];if(typeof t!=="function"){n.push(t)}else{r=t}n.push(go$readdir$cb);return go$readdir(n);function go$readdir$cb(e,t){if(t&&t.sort)t.sort();if(e&&(e.code==="EMFILE"||e.code==="ENFILE"))enqueue([go$readdir,[n]]);else{if(typeof r==="function")r.apply(this,arguments);retry()}}}function go$readdir(t){return a.apply(e,t)}if(process.version.substr(0,4)==="v0.8"){var l=s(e);ReadStream=l.ReadStream;WriteStream=l.WriteStream}var o=e.ReadStream;if(o){ReadStream.prototype=Object.create(o.prototype);ReadStream.prototype.open=ReadStream$open}var u=e.WriteStream;if(u){WriteStream.prototype=Object.create(u.prototype);WriteStream.prototype.open=WriteStream$open}Object.defineProperty(e,"ReadStream",{get:function(){return ReadStream},set:function(e){ReadStream=e},enumerable:true,configurable:true});Object.defineProperty(e,"WriteStream",{get:function(){return WriteStream},set:function(e){WriteStream=e},enumerable:true,configurable:true});var c=ReadStream;Object.defineProperty(e,"FileReadStream",{get:function(){return c},set:function(e){c=e},enumerable:true,configurable:true});var h=WriteStream;Object.defineProperty(e,"FileWriteStream",{get:function(){return h},set:function(e){h=e},enumerable:true,configurable:true});function ReadStream(e,t){if(this instanceof ReadStream)return o.apply(this,arguments),this;else return ReadStream.apply(Object.create(ReadStream.prototype),arguments)}function ReadStream$open(){var e=this;open(e.path,e.flags,e.mode,(function(t,r){if(t){if(e.autoClose)e.destroy();e.emit("error",t)}else{e.fd=r;e.emit("open",r);e.read()}}))}function WriteStream(e,t){if(this instanceof WriteStream)return u.apply(this,arguments),this;else return WriteStream.apply(Object.create(WriteStream.prototype),arguments)}function WriteStream$open(){var e=this;open(e.path,e.flags,e.mode,(function(t,r){if(t){e.destroy();e.emit("error",t)}else{e.fd=r;e.emit("open",r)}}))}function createReadStream(t,r){return new e.ReadStream(t,r)}function createWriteStream(t,r){return new e.WriteStream(t,r)}var d=e.open;e.open=open;function open(e,t,r,n){if(typeof r==="function")n=r,r=null;return go$open(e,t,r,n);function go$open(e,t,r,n){return d(e,t,r,(function(i,s){if(i&&(i.code==="EMFILE"||i.code==="ENFILE"))enqueue([go$open,[e,t,r,n]]);else{if(typeof n==="function")n.apply(this,arguments);retry()}}))}}return e}function enqueue(e){c("ENQUEUE",e[0].name,e[1]);global[o].push(e)}function retry(){var e=global[o].shift();if(e){c("RETRY",e[0].name,e[1]);e[0].apply(null,e[1])}}},3086:(e,t,r)=>{var n=r(2781).Stream;e.exports=legacy;function legacy(e){return{ReadStream:ReadStream,WriteStream:WriteStream};function ReadStream(t,r){if(!(this instanceof ReadStream))return new ReadStream(t,r);n.call(this);var i=this;this.path=t;this.fd=null;this.readable=true;this.paused=false;this.flags="r";this.mode=438;this.bufferSize=64*1024;r=r||{};var s=Object.keys(r);for(var a=0,l=s.length;a<l;a++){var o=s[a];this[o]=r[o]}if(this.encoding)this.setEncoding(this.encoding);if(this.start!==undefined){if("number"!==typeof this.start){throw TypeError("start must be a Number")}if(this.end===undefined){this.end=Infinity}else if("number"!==typeof this.end){throw TypeError("end must be a Number")}if(this.start>this.end){throw new Error("start must be <= end")}this.pos=this.start}if(this.fd!==null){process.nextTick((function(){i._read()}));return}e.open(this.path,this.flags,this.mode,(function(e,t){if(e){i.emit("error",e);i.readable=false;return}i.fd=t;i.emit("open",t);i._read()}))}function WriteStream(t,r){if(!(this instanceof WriteStream))return new WriteStream(t,r);n.call(this);this.path=t;this.fd=null;this.writable=true;this.flags="w";this.encoding="binary";this.mode=438;this.bytesWritten=0;r=r||{};var i=Object.keys(r);for(var s=0,a=i.length;s<a;s++){var l=i[s];this[l]=r[l]}if(this.start!==undefined){if("number"!==typeof this.start){throw TypeError("start must be a Number")}if(this.start<0){throw new Error("start must be >= zero")}this.pos=this.start}this.busy=false;this._queue=[];if(this.fd===null){this._open=e.open;this._queue.push([this._open,this.path,this.flags,this.mode,undefined]);this.flush()}}}},263:(e,t,r)=>{var n=r(2057);var i=process.cwd;var s=null;var a=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){if(!s)s=i.call(process);return s};try{process.cwd()}catch(e){}var l=process.chdir;process.chdir=function(e){s=null;l.call(process,e)};e.exports=patch;function patch(e){if(n.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)){patchLchmod(e)}if(!e.lutimes){patchLutimes(e)}e.chown=chownFix(e.chown);e.fchown=chownFix(e.fchown);e.lchown=chownFix(e.lchown);e.chmod=chmodFix(e.chmod);e.fchmod=chmodFix(e.fchmod);e.lchmod=chmodFix(e.lchmod);e.chownSync=chownFixSync(e.chownSync);e.fchownSync=chownFixSync(e.fchownSync);e.lchownSync=chownFixSync(e.lchownSync);e.chmodSync=chmodFixSync(e.chmodSync);e.fchmodSync=chmodFixSync(e.fchmodSync);e.lchmodSync=chmodFixSync(e.lchmodSync);e.stat=statFix(e.stat);e.fstat=statFix(e.fstat);e.lstat=statFix(e.lstat);e.statSync=statFixSync(e.statSync);e.fstatSync=statFixSync(e.fstatSync);e.lstatSync=statFixSync(e.lstatSync);if(!e.lchmod){e.lchmod=function(e,t,r){if(r)process.nextTick(r)};e.lchmodSync=function(){}}if(!e.lchown){e.lchown=function(e,t,r,n){if(n)process.nextTick(n)};e.lchownSync=function(){}}if(a==="win32"){e.rename=function(t){return function(r,n,i){var s=Date.now();var a=0;t(r,n,(function CB(l){if(l&&(l.code==="EACCES"||l.code==="EPERM")&&Date.now()-s<6e4){setTimeout((function(){e.stat(n,(function(e,s){if(e&&e.code==="ENOENT")t(r,n,CB);else i(l)}))}),a);if(a<100)a+=10;return}if(i)i(l)}))}}(e.rename)}e.read=function(t){function read(r,n,i,s,a,l){var o;if(l&&typeof l==="function"){var u=0;o=function(c,h,d){if(c&&c.code==="EAGAIN"&&u<10){u++;return t.call(e,r,n,i,s,a,o)}l.apply(this,arguments)}}return t.call(e,r,n,i,s,a,o)}read.__proto__=t;return read}(e.read);e.readSync=function(t){return function(r,n,i,s,a){var l=0;while(true){try{return t.call(e,r,n,i,s,a)}catch(e){if(e.code==="EAGAIN"&&l<10){l++;continue}throw e}}}}(e.readSync);function patchLchmod(e){e.lchmod=function(t,r,i){e.open(t,n.O_WRONLY|n.O_SYMLINK,r,(function(t,n){if(t){if(i)i(t);return}e.fchmod(n,r,(function(t){e.close(n,(function(e){if(i)i(t||e)}))}))}))};e.lchmodSync=function(t,r){var i=e.openSync(t,n.O_WRONLY|n.O_SYMLINK,r);var s=true;var a;try{a=e.fchmodSync(i,r);s=false}finally{if(s){try{e.closeSync(i)}catch(e){}}else{e.closeSync(i)}}return a}}function patchLutimes(e){if(n.hasOwnProperty("O_SYMLINK")){e.lutimes=function(t,r,i,s){e.open(t,n.O_SYMLINK,(function(t,n){if(t){if(s)s(t);return}e.futimes(n,r,i,(function(t){e.close(n,(function(e){if(s)s(t||e)}))}))}))};e.lutimesSync=function(t,r,i){var s=e.openSync(t,n.O_SYMLINK);var a;var l=true;try{a=e.futimesSync(s,r,i);l=false}finally{if(l){try{e.closeSync(s)}catch(e){}}else{e.closeSync(s)}}return a}}else{e.lutimes=function(e,t,r,n){if(n)process.nextTick(n)};e.lutimesSync=function(){}}}function chmodFix(t){if(!t)return t;return function(r,n,i){return t.call(e,r,n,(function(e){if(chownErOk(e))e=null;if(i)i.apply(this,arguments)}))}}function chmodFixSync(t){if(!t)return t;return function(r,n){try{return t.call(e,r,n)}catch(e){if(!chownErOk(e))throw e}}}function chownFix(t){if(!t)return t;return function(r,n,i,s){return t.call(e,r,n,i,(function(e){if(chownErOk(e))e=null;if(s)s.apply(this,arguments)}))}}function chownFixSync(t){if(!t)return t;return function(r,n,i){try{return t.call(e,r,n,i)}catch(e){if(!chownErOk(e))throw e}}}function statFix(t){if(!t)return t;return function(r,n,i){if(typeof n==="function"){i=n;n=null}function callback(e,t){if(t){if(t.uid<0)t.uid+=4294967296;if(t.gid<0)t.gid+=4294967296}if(i)i.apply(this,arguments)}return n?t.call(e,r,n,callback):t.call(e,r,callback)}}function statFixSync(t){if(!t)return t;return function(r,n){var i=n?t.call(e,r,n):t.call(e,r);if(i.uid<0)i.uid+=4294967296;if(i.gid<0)i.gid+=4294967296;return i}}function chownErOk(e){if(!e)return true;if(e.code==="ENOSYS")return true;var t=!process.getuid||process.getuid()!==0;if(t){if(e.code==="EINVAL"||e.code==="EPERM")return true}return false}}},1077:(e,t,r)=>{"use strict";const n=r(2361);const i=r(2781);const s=r(665);const a=r(1576).StringDecoder;const l=Symbol("EOF");const o=Symbol("maybeEmitEnd");const u=Symbol("emittedEnd");const c=Symbol("emittingEnd");const h=Symbol("closed");const d=Symbol("read");const v=Symbol("flush");const m=Symbol("flushChunk");const p=Symbol("encoding");const _=Symbol("decoder");const g=Symbol("flowing");const w=Symbol("paused");const x=Symbol("resume");const b=Symbol("bufferLength");const y=Symbol("bufferPush");const S=Symbol("bufferShift");const N=Symbol("objectMode");const E=Symbol("destroyed");const k=global._MP_NO_ITERATOR_SYMBOLS_!=="1";const R=k&&Symbol.asyncIterator||Symbol("asyncIterator not implemented");const O=k&&Symbol.iterator||Symbol("iterator not implemented");const isEndish=e=>e==="end"||e==="finish"||e==="prefinish";const isArrayBuffer=e=>e instanceof ArrayBuffer||typeof e==="object"&&e.constructor&&e.constructor.name==="ArrayBuffer"&&e.byteLength>=0;const isArrayBufferView=e=>!Buffer.isBuffer(e)&&ArrayBuffer.isView(e);e.exports=class Minipass extends i{constructor(e){super();this[g]=false;this[w]=false;this.pipes=new s;this.buffer=new s;this[N]=e&&e.objectMode||false;if(this[N])this[p]=null;else this[p]=e&&e.encoding||null;if(this[p]==="buffer")this[p]=null;this[_]=this[p]?new a(this[p]):null;this[l]=false;this[u]=false;this[c]=false;this[h]=false;this.writable=true;this.readable=true;this[b]=0;this[E]=false}get bufferLength(){return this[b]}get encoding(){return this[p]}set encoding(e){if(this[N])throw new Error("cannot set encoding in objectMode");if(this[p]&&e!==this[p]&&(this[_]&&this[_].lastNeed||this[b]))throw new Error("cannot change encoding");if(this[p]!==e){this[_]=e?new a(e):null;if(this.buffer.length)this.buffer=this.buffer.map((e=>this[_].write(e)))}this[p]=e}setEncoding(e){this.encoding=e}get objectMode(){return this[N]}set objectMode(e){this[N]=this[N]||!!e}write(e,t,r){if(this[l])throw new Error("write after end");if(this[E]){this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"}));return true}if(typeof t==="function")r=t,t="utf8";if(!t)t="utf8";if(!this[N]&&!Buffer.isBuffer(e)){if(isArrayBufferView(e))e=Buffer.from(e.buffer,e.byteOffset,e.byteLength);else if(isArrayBuffer(e))e=Buffer.from(e);else if(typeof e!=="string")this.objectMode=true}if(!this.objectMode&&!e.length){const e=this.flowing;if(this[b]!==0)this.emit("readable");if(r)r();return e}if(typeof e==="string"&&!this[N]&&!(t===this[p]&&!this[_].lastNeed)){e=Buffer.from(e,t)}if(Buffer.isBuffer(e)&&this[p])e=this[_].write(e);try{return this.flowing?(this.emit("data",e),this.flowing):(this[y](e),false)}finally{if(this[b]!==0)this.emit("readable");if(r)r()}}read(e){if(this[E])return null;try{if(this[b]===0||e===0||e>this[b])return null;if(this[N])e=null;if(this.buffer.length>1&&!this[N]){if(this.encoding)this.buffer=new s([Array.from(this.buffer).join("")]);else this.buffer=new s([Buffer.concat(Array.from(this.buffer),this[b])])}return this[d](e||null,this.buffer.head.value)}finally{this[o]()}}[d](e,t){if(e===t.length||e===null)this[S]();else{this.buffer.head.value=t.slice(e);t=t.slice(0,e);this[b]-=e}this.emit("data",t);if(!this.buffer.length&&!this[l])this.emit("drain");return t}end(e,t,r){if(typeof e==="function")r=e,e=null;if(typeof t==="function")r=t,t="utf8";if(e)this.write(e,t);if(r)this.once("end",r);this[l]=true;this.writable=false;if(this.flowing||!this[w])this[o]();return this}[x](){if(this[E])return;this[w]=false;this[g]=true;this.emit("resume");if(this.buffer.length)this[v]();else if(this[l])this[o]();else this.emit("drain")}resume(){return this[x]()}pause(){this[g]=false;this[w]=true}get destroyed(){return this[E]}get flowing(){return this[g]}get paused(){return this[w]}[y](e){if(this[N])this[b]+=1;else this[b]+=e.length;return this.buffer.push(e)}[S](){if(this.buffer.length){if(this[N])this[b]-=1;else this[b]-=this.buffer.head.value.length}return this.buffer.shift()}[v](){do{}while(this[m](this[S]()));if(!this.buffer.length&&!this[l])this.emit("drain")}[m](e){return e?(this.emit("data",e),this.flowing):false}pipe(e,t){if(this[E])return;const r=this[u];t=t||{};if(e===process.stdout||e===process.stderr)t.end=false;else t.end=t.end!==false;const n={dest:e,opts:t,ondrain:e=>this[x]()};this.pipes.push(n);e.on("drain",n.ondrain);this[x]();if(r&&n.opts.end)n.dest.end();return e}addListener(e,t){return this.on(e,t)}on(e,t){try{return super.on(e,t)}finally{if(e==="data"&&!this.pipes.length&&!this.flowing)this[x]();else if(isEndish(e)&&this[u]){super.emit(e);this.removeAllListeners(e)}}}get emittedEnd(){return this[u]}[o](){if(!this[c]&&!this[u]&&!this[E]&&this.buffer.length===0&&this[l]){this[c]=true;this.emit("end");this.emit("prefinish");this.emit("finish");if(this[h])this.emit("close");this[c]=false}}emit(e,t){if(e!=="error"&&e!=="close"&&e!==E&&this[E])return;else if(e==="data"){if(!t)return;if(this.pipes.length)this.pipes.forEach((e=>e.dest.write(t)===false&&this.pause()))}else if(e==="end"){if(this[u]===true)return;this[u]=true;this.readable=false;if(this[_]){t=this[_].end();if(t){this.pipes.forEach((e=>e.dest.write(t)));super.emit("data",t)}}this.pipes.forEach((e=>{e.dest.removeListener("drain",e.ondrain);if(e.opts.end)e.dest.end()}))}else if(e==="close"){this[h]=true;if(!this[u]&&!this[E])return}const r=new Array(arguments.length);r[0]=e;r[1]=t;if(arguments.length>2){for(let e=2;e<arguments.length;e++){r[e]=arguments[e]}}try{return super.emit.apply(this,r)}finally{if(!isEndish(e))this[o]();else this.removeAllListeners(e)}}collect(){const e=[];if(!this[N])e.dataLength=0;const t=this.promise();this.on("data",(t=>{e.push(t);if(!this[N])e.dataLength+=t.length}));return t.then((()=>e))}concat(){return this[N]?Promise.reject(new Error("cannot concat in objectMode")):this.collect().then((e=>this[N]?Promise.reject(new Error("cannot concat in objectMode")):this[p]?e.join(""):Buffer.concat(e,e.dataLength)))}promise(){return new Promise(((e,t)=>{this.on(E,(()=>t(new Error("stream destroyed"))));this.on("end",(()=>e()));this.on("error",(e=>t(e)))}))}[R](){const next=()=>{const e=this.read();if(e!==null)return Promise.resolve({done:false,value:e});if(this[l])return Promise.resolve({done:true});let t=null;let r=null;const onerr=e=>{this.removeListener("data",ondata);this.removeListener("end",onend);r(e)};const ondata=e=>{this.removeListener("error",onerr);this.removeListener("end",onend);this.pause();t({value:e,done:!!this[l]})};const onend=()=>{this.removeListener("error",onerr);this.removeListener("data",ondata);t({done:true})};const ondestroy=()=>onerr(new Error("stream destroyed"));return new Promise(((e,n)=>{r=n;t=e;this.once(E,ondestroy);this.once("error",onerr);this.once("end",onend);this.once("data",ondata)}))};return{next:next}}[O](){const next=()=>{const e=this.read();const t=e===null;return{value:e,done:t}};return{next:next}}destroy(e){if(this[E]){if(e)this.emit("error",e);else this.emit(E);return this}this[E]=true;this.buffer=new s;this[b]=0;if(typeof this.close==="function"&&!this[h])this.close();if(e)this.emit("error",e);else this.emit(E);return this}static isStream(e){return!!e&&(e instanceof Minipass||e instanceof i||e instanceof n&&(typeof e.pipe==="function"||typeof e.write==="function"&&typeof e.end==="function"))}}},6769:(e,t,r)=>{const n=r(9796).constants||{ZLIB_VERNUM:4736};e.exports=Object.freeze(Object.assign(Object.create(null),{Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_VERSION_ERROR:-6,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,DEFLATE:1,INFLATE:2,GZIP:3,GUNZIP:4,DEFLATERAW:5,INFLATERAW:6,UNZIP:7,BROTLI_DECODE:8,BROTLI_ENCODE:9,Z_MIN_WINDOWBITS:8,Z_MAX_WINDOWBITS:15,Z_DEFAULT_WINDOWBITS:15,Z_MIN_CHUNK:64,Z_MAX_CHUNK:Infinity,Z_DEFAULT_CHUNK:16384,Z_MIN_MEMLEVEL:1,Z_MAX_MEMLEVEL:9,Z_DEFAULT_MEMLEVEL:8,Z_MIN_LEVEL:-1,Z_MAX_LEVEL:9,Z_DEFAULT_LEVEL:-1,BROTLI_OPERATION_PROCESS:0,BROTLI_OPERATION_FLUSH:1,BROTLI_OPERATION_FINISH:2,BROTLI_OPERATION_EMIT_METADATA:3,BROTLI_MODE_GENERIC:0,BROTLI_MODE_TEXT:1,BROTLI_MODE_FONT:2,BROTLI_DEFAULT_MODE:0,BROTLI_MIN_QUALITY:0,BROTLI_MAX_QUALITY:11,BROTLI_DEFAULT_QUALITY:11,BROTLI_MIN_WINDOW_BITS:10,BROTLI_MAX_WINDOW_BITS:24,BROTLI_LARGE_MAX_WINDOW_BITS:30,BROTLI_DEFAULT_WINDOW:22,BROTLI_MIN_INPUT_BLOCK_BITS:16,BROTLI_MAX_INPUT_BLOCK_BITS:24,BROTLI_PARAM_MODE:0,BROTLI_PARAM_QUALITY:1,BROTLI_PARAM_LGWIN:2,BROTLI_PARAM_LGBLOCK:3,BROTLI_PARAM_DISABLE_LITERAL_CONTEXT_MODELING:4,BROTLI_PARAM_SIZE_HINT:5,BROTLI_PARAM_LARGE_WINDOW:6,BROTLI_PARAM_NPOSTFIX:7,BROTLI_PARAM_NDIRECT:8,BROTLI_DECODER_RESULT_ERROR:0,BROTLI_DECODER_RESULT_SUCCESS:1,BROTLI_DECODER_RESULT_NEEDS_MORE_INPUT:2,BROTLI_DECODER_RESULT_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_PARAM_DISABLE_RING_BUFFER_REALLOCATION:0,BROTLI_DECODER_PARAM_LARGE_WINDOW:1,BROTLI_DECODER_NO_ERROR:0,BROTLI_DECODER_SUCCESS:1,BROTLI_DECODER_NEEDS_MORE_INPUT:2,BROTLI_DECODER_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_NIBBLE:-1,BROTLI_DECODER_ERROR_FORMAT_RESERVED:-2,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_META_NIBBLE:-3,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_ALPHABET:-4,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_SAME:-5,BROTLI_DECODER_ERROR_FORMAT_CL_SPACE:-6,BROTLI_DECODER_ERROR_FORMAT_HUFFMAN_SPACE:-7,BROTLI_DECODER_ERROR_FORMAT_CONTEXT_MAP_REPEAT:-8,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_1:-9,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_2:-10,BROTLI_DECODER_ERROR_FORMAT_TRANSFORM:-11,BROTLI_DECODER_ERROR_FORMAT_DICTIONARY:-12,BROTLI_DECODER_ERROR_FORMAT_WINDOW_BITS:-13,BROTLI_DECODER_ERROR_FORMAT_PADDING_1:-14,BROTLI_DECODER_ERROR_FORMAT_PADDING_2:-15,BROTLI_DECODER_ERROR_FORMAT_DISTANCE:-16,BROTLI_DECODER_ERROR_DICTIONARY_NOT_SET:-19,BROTLI_DECODER_ERROR_INVALID_ARGUMENTS:-20,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MODES:-21,BROTLI_DECODER_ERROR_ALLOC_TREE_GROUPS:-22,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MAP:-25,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_1:-26,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_2:-27,BROTLI_DECODER_ERROR_ALLOC_BLOCK_TYPE_TREES:-30,BROTLI_DECODER_ERROR_UNREACHABLE:-31},n))},3486:(e,t,r)=>{"use strict";const n=r(9491);const i=r(4300).Buffer;const s=r(9796);const a=t.constants=r(6769);const l=r(1077);const o=i.concat;const u=Symbol("_superWrite");class ZlibError extends Error{constructor(e){super("zlib: "+e.message);this.code=e.code;this.errno=e.errno;if(!this.code)this.code="ZLIB_ERROR";this.message="zlib: "+e.message;Error.captureStackTrace(this,this.constructor)}get name(){return"ZlibError"}}const c=Symbol("opts");const h=Symbol("flushFlag");const d=Symbol("finishFlushFlag");const v=Symbol("fullFlushFlag");const m=Symbol("handle");const p=Symbol("onError");const _=Symbol("sawError");const g=Symbol("level");const w=Symbol("strategy");const x=Symbol("ended");const b=Symbol("_defaultFullFlush");class ZlibBase extends l{constructor(e,t){if(!e||typeof e!=="object")throw new TypeError("invalid options for ZlibBase constructor");super(e);this[x]=false;this[c]=e;this[h]=e.flush;this[d]=e.finishFlush;try{this[m]=new s[t](e)}catch(e){throw new ZlibError(e)}this[p]=e=>{this[_]=true;this.close();this.emit("error",e)};this[m].on("error",(e=>this[p](new ZlibError(e))));this.once("end",(()=>this.close))}close(){if(this[m]){this[m].close();this[m]=null;this.emit("close")}}reset(){if(!this[_]){n(this[m],"zlib binding closed");return this[m].reset()}}flush(e){if(this.ended)return;if(typeof e!=="number")e=this[v];this.write(Object.assign(i.alloc(0),{[h]:e}))}end(e,t,r){if(e)this.write(e,t);this.flush(this[d]);this[x]=true;return super.end(null,null,r)}get ended(){return this[x]}write(e,t,r){if(typeof t==="function")r=t,t="utf8";if(typeof e==="string")e=i.from(e,t);if(this[_])return;n(this[m],"zlib binding closed");const s=this[m]._handle;const a=s.close;s.close=()=>{};const l=this[m].close;this[m].close=()=>{};i.concat=e=>e;let c;try{const t=typeof e[h]==="number"?e[h]:this[h];c=this[m]._processChunk(e,t);i.concat=o}catch(e){i.concat=o;this[p](new ZlibError(e))}finally{if(this[m]){this[m]._handle=s;s.close=a;this[m].close=l;this[m].removeAllListeners("error")}}let d;if(c){if(Array.isArray(c)&&c.length>0){d=this[u](i.from(c[0]));for(let e=1;e<c.length;e++){d=this[u](c[e])}}else{d=this[u](i.from(c))}}if(r)r();return d}[u](e){return super.write(e)}}class Zlib extends ZlibBase{constructor(e,t){e=e||{};e.flush=e.flush||a.Z_NO_FLUSH;e.finishFlush=e.finishFlush||a.Z_FINISH;super(e,t);this[v]=a.Z_FULL_FLUSH;this[g]=e.level;this[w]=e.strategy}params(e,t){if(this[_])return;if(!this[m])throw new Error("cannot switch params when binding is closed");if(!this[m].params)throw new Error("not supported in this implementation");if(this[g]!==e||this[w]!==t){this.flush(a.Z_SYNC_FLUSH);n(this[m],"zlib binding closed");const r=this[m].flush;this[m].flush=(e,t)=>{this.flush(e);t()};try{this[m].params(e,t)}finally{this[m].flush=r}if(this[m]){this[g]=e;this[w]=t}}}}class Deflate extends Zlib{constructor(e){super(e,"Deflate")}}class Inflate extends Zlib{constructor(e){super(e,"Inflate")}}const y=Symbol("_portable");class Gzip extends Zlib{constructor(e){super(e,"Gzip");this[y]=e&&!!e.portable}[u](e){if(!this[y])return super[u](e);this[y]=false;e[9]=255;return super[u](e)}}class Gunzip extends Zlib{constructor(e){super(e,"Gunzip")}}class DeflateRaw extends Zlib{constructor(e){super(e,"DeflateRaw")}}class InflateRaw extends Zlib{constructor(e){super(e,"InflateRaw")}}class Unzip extends Zlib{constructor(e){super(e,"Unzip")}}class Brotli extends ZlibBase{constructor(e,t){e=e||{};e.flush=e.flush||a.BROTLI_OPERATION_PROCESS;e.finishFlush=e.finishFlush||a.BROTLI_OPERATION_FINISH;super(e,t);this[v]=a.BROTLI_OPERATION_FLUSH}}class BrotliCompress extends Brotli{constructor(e){super(e,"BrotliCompress")}}class BrotliDecompress extends Brotli{constructor(e){super(e,"BrotliDecompress")}}t.Deflate=Deflate;t.Inflate=Inflate;t.Gzip=Gzip;t.Gunzip=Gunzip;t.DeflateRaw=DeflateRaw;t.InflateRaw=InflateRaw;t.Unzip=Unzip;if(typeof s.BrotliCompress==="function"){t.BrotliCompress=BrotliCompress;t.BrotliDecompress=BrotliDecompress}else{t.BrotliCompress=t.BrotliDecompress=class{constructor(){throw new Error("Brotli is not supported in this version of Node.js")}}}},6186:(e,t,r)=>{const n=r(2853);const i=r(2930);const{mkdirpNative:s,mkdirpNativeSync:a}=r(4983);const{mkdirpManual:l,mkdirpManualSync:o}=r(356);const{useNative:u,useNativeSync:c}=r(4518);const mkdirp=(e,t)=>{e=i(e);t=n(t);return u(t)?s(e,t):l(e,t)};const mkdirpSync=(e,t)=>{e=i(e);t=n(t);return c(t)?a(e,t):o(e,t)};mkdirp.sync=mkdirpSync;mkdirp.native=(e,t)=>s(i(e),n(t));mkdirp.manual=(e,t)=>l(i(e),n(t));mkdirp.nativeSync=(e,t)=>a(i(e),n(t));mkdirp.manualSync=(e,t)=>o(i(e),n(t));e.exports=mkdirp},4992:(e,t,r)=>{const{dirname:n}=r(1017);const findMade=(e,t,r=undefined)=>{if(r===t)return Promise.resolve();return e.statAsync(t).then((e=>e.isDirectory()?r:undefined),(r=>r.code==="ENOENT"?findMade(e,n(t),t):undefined))};const findMadeSync=(e,t,r=undefined)=>{if(r===t)return undefined;try{return e.statSync(t).isDirectory()?r:undefined}catch(r){return r.code==="ENOENT"?findMadeSync(e,n(t),t):undefined}};e.exports={findMade:findMade,findMadeSync:findMadeSync}},356:(e,t,r)=>{const{dirname:n}=r(1017);const mkdirpManual=(e,t,r)=>{t.recursive=false;const i=n(e);if(i===e){return t.mkdirAsync(e,t).catch((e=>{if(e.code!=="EISDIR")throw e}))}return t.mkdirAsync(e,t).then((()=>r||e),(n=>{if(n.code==="ENOENT")return mkdirpManual(i,t).then((r=>mkdirpManual(e,t,r)));if(n.code!=="EEXIST"&&n.code!=="EROFS")throw n;return t.statAsync(e).then((e=>{if(e.isDirectory())return r;else throw n}),(()=>{throw n}))}))};const mkdirpManualSync=(e,t,r)=>{const i=n(e);t.recursive=false;if(i===e){try{return t.mkdirSync(e,t)}catch(e){if(e.code!=="EISDIR")throw e;else return}}try{t.mkdirSync(e,t);return r||e}catch(n){if(n.code==="ENOENT")return mkdirpManualSync(e,t,mkdirpManualSync(i,t,r));if(n.code!=="EEXIST"&&n.code!=="EROFS")throw n;try{if(!t.statSync(e).isDirectory())throw n}catch(e){throw n}}};e.exports={mkdirpManual:mkdirpManual,mkdirpManualSync:mkdirpManualSync}},4983:(e,t,r)=>{const{dirname:n}=r(1017);const{findMade:i,findMadeSync:s}=r(4992);const{mkdirpManual:a,mkdirpManualSync:l}=r(356);const mkdirpNative=(e,t)=>{t.recursive=true;const r=n(e);if(r===e)return t.mkdirAsync(e,t);return i(t,e).then((r=>t.mkdirAsync(e,t).then((()=>r)).catch((r=>{if(r.code==="ENOENT")return a(e,t);else throw r}))))};const mkdirpNativeSync=(e,t)=>{t.recursive=true;const r=n(e);if(r===e)return t.mkdirSync(e,t);const i=s(t,e);try{t.mkdirSync(e,t);return i}catch(r){if(r.code==="ENOENT")return l(e,t);else throw r}};e.exports={mkdirpNative:mkdirpNative,mkdirpNativeSync:mkdirpNativeSync}},2853:(e,t,r)=>{const{promisify:n}=r(3837);const i=r(7147);const optsArg=e=>{if(!e)e={mode:511&~process.umask(),fs:i};else if(typeof e==="object")e={mode:511&~process.umask(),fs:i,...e};else if(typeof e==="number")e={mode:e,fs:i};else if(typeof e==="string")e={mode:parseInt(e,8),fs:i};else throw new TypeError("invalid options argument");e.mkdir=e.mkdir||e.fs.mkdir||i.mkdir;e.mkdirAsync=n(e.mkdir);e.stat=e.stat||e.fs.stat||i.stat;e.statAsync=n(e.stat);e.statSync=e.statSync||e.fs.statSync||i.statSync;e.mkdirSync=e.mkdirSync||e.fs.mkdirSync||i.mkdirSync;return e};e.exports=optsArg},2930:(e,t,r)=>{const n=process.env.__TESTING_MKDIRP_PLATFORM__||process.platform;const{resolve:i,parse:s}=r(1017);const pathArg=e=>{if(/\0/.test(e)){throw Object.assign(new TypeError("path must be a string without null bytes"),{path:e,code:"ERR_INVALID_ARG_VALUE"})}e=i(e);if(n==="win32"){const t=/[*|"<>?:]/;const{root:r}=s(e);if(t.test(e.substr(r.length))){throw Object.assign(new Error("Illegal characters in path."),{path:e,code:"EINVAL"})}}return e};e.exports=pathArg},4518:(e,t,r)=>{const n=r(7147);const i=process.env.__TESTING_MKDIRP_NODE_VERSION__||process.version;const s=i.replace(/^v/,"").split(".");const a=+s[0]>10||+s[0]===10&&+s[1]>=12;const l=!a?()=>false:e=>e.mkdir===n.mkdir;const o=!a?()=>false:e=>e.mkdirSync===n.mkdirSync;e.exports={useNative:l,useNativeSync:o}},4833:e=>{e.exports=Pend;function Pend(){this.pending=0;this.max=Infinity;this.listeners=[];this.waiting=[];this.error=null}Pend.prototype.go=function(e){if(this.pending<this.max){pendGo(this,e)}else{this.waiting.push(e)}};Pend.prototype.wait=function(e){if(this.pending===0){e(this.error)}else{this.listeners.push(e)}};Pend.prototype.hold=function(){return pendHold(this)};function pendHold(e){e.pending+=1;var t=false;return onCb;function onCb(r){if(t)throw new Error("callback called twice");t=true;e.error=e.error||r;e.pending-=1;if(e.waiting.length>0&&e.pending<e.max){pendGo(e,e.waiting.shift())}else if(e.pending===0){var n=e.listeners;e.listeners=[];n.forEach(cbListener)}}function cbListener(t){t(e.error)}}function pendGo(e,t){t(pendHold(e))}},4674:(e,t,r)=>{"use strict";var n;n=r(4016);n=r(5923);n=r(1525);n=r(4404);n=r(5317);r(7900);r(7628);t.Parse=r(8917);r(8116);r(5450);r(6043);r(7996);r(4173)},4016:(e,t,r)=>{"use strict";const n=r(5274);const i=r(7900);const s=r(7147);const a=r(7714);const l=r(1525);const o=r(1017);const u=e.exports=(e,t,r)=>{if(typeof t==="function")r=t;if(Array.isArray(e))t=e,e={};if(!t||!Array.isArray(t)||!t.length)throw new TypeError("no files or directories specified");t=Array.from(t);const i=n(e);if(i.sync&&typeof r==="function")throw new TypeError("callback not supported for sync tar functions");if(!i.file&&typeof r==="function")throw new TypeError("callback only supported with file option");return i.file&&i.sync?createFileSync(i,t):i.file?createFile(i,t,r):i.sync?createSync(i,t):create(i,t)};const createFileSync=(e,t)=>{const r=new i.Sync(e);const n=new a.WriteStreamSync(e.file,{mode:e.mode||438});r.pipe(n);addFilesSync(r,t)};const createFile=(e,t,r)=>{const n=new i(e);const s=new a.WriteStream(e.file,{mode:e.mode||438});n.pipe(s);const l=new Promise(((e,t)=>{s.on("error",t);s.on("close",e);n.on("error",t)}));addFilesAsync(n,t);return r?l.then(r,r):l};const addFilesSync=(e,t)=>{t.forEach((t=>{if(t.charAt(0)==="@")l({file:o.resolve(e.cwd,t.substr(1)),sync:true,noResume:true,onentry:t=>e.add(t)});else e.add(t)}));e.end()};const addFilesAsync=(e,t)=>{while(t.length){const r=t.shift();if(r.charAt(0)==="@")return l({file:o.resolve(e.cwd,r.substr(1)),noResume:true,onentry:t=>e.add(t)}).then((r=>addFilesAsync(e,t)));else e.add(r)}e.end()};const createSync=(e,t)=>{const r=new i.Sync(e);addFilesSync(r,t);return r};const create=(e,t)=>{const r=new i(e);addFilesAsync(r,t);return r}},5317:(e,t,r)=>{"use strict";const n=r(5274);const i=r(7628);const s=r(7147);const a=r(7714);const l=r(1017);const o=e.exports=(e,t,r)=>{if(typeof e==="function")r=e,t=null,e={};else if(Array.isArray(e))t=e,e={};if(typeof t==="function")r=t,t=null;if(!t)t=[];else t=Array.from(t);const i=n(e);if(i.sync&&typeof r==="function")throw new TypeError("callback not supported for sync tar functions");if(!i.file&&typeof r==="function")throw new TypeError("callback only supported with file option");if(t.length)filesFilter(i,t);return i.file&&i.sync?extractFileSync(i):i.file?extractFile(i,r):i.sync?extractSync(i):extract(i)};const filesFilter=(e,t)=>{const r=new Map(t.map((e=>[e.replace(/\/+$/,""),true])));const n=e.filter;const mapHas=(e,t)=>{const n=t||l.parse(e).root||".";const i=e===n?false:r.has(e)?r.get(e):mapHas(l.dirname(e),n);r.set(e,i);return i};e.filter=n?(e,t)=>n(e,t)&&mapHas(e.replace(/\/+$/,"")):e=>mapHas(e.replace(/\/+$/,""))};const extractFileSync=e=>{const t=new i.Sync(e);const r=e.file;let n=true;let l;const o=s.statSync(r);const u=e.maxReadSize||16*1024*1024;const c=new a.ReadStreamSync(r,{readSize:u,size:o.size});c.pipe(t)};const extractFile=(e,t)=>{const r=new i(e);const n=e.maxReadSize||16*1024*1024;const l=e.file;const o=new Promise(((e,t)=>{r.on("error",t);r.on("close",e);s.stat(l,((e,i)=>{if(e)t(e);else{const e=new a.ReadStream(l,{readSize:n,size:i.size});e.on("error",t);e.pipe(r)}}))}));return t?o.then(t,t):o};const extractSync=e=>new i.Sync(e);const extract=e=>new i(e)},1172:(e,t,r)=>{const n=process.env.__FAKE_PLATFORM__||process.platform;const i=n==="win32";const s=global.__FAKE_TESTING_FS__||r(7147);const{O_CREAT:a,O_TRUNC:l,O_WRONLY:o,UV_FS_O_FILEMAP:u=0}=s.constants;const c=i&&!!u;const h=512*1024;const d=u|l|a|o;e.exports=!c?()=>"w":e=>e<h?d:"w"},6043:(e,t,r)=>{"use strict";const n=r(4173);const i=r(1017).posix;const s=r(2370);const a=Symbol("slurp");const l=Symbol("type");class Header{constructor(e,t,r,n){this.cksumValid=false;this.needPax=false;this.nullBlock=false;this.block=null;this.path=null;this.mode=null;this.uid=null;this.gid=null;this.size=null;this.mtime=null;this.cksum=null;this[l]="0";this.linkpath=null;this.uname=null;this.gname=null;this.devmaj=0;this.devmin=0;this.atime=null;this.ctime=null;if(Buffer.isBuffer(e))this.decode(e,t||0,r,n);else if(e)this.set(e)}decode(e,t,r,n){if(!t)t=0;if(!e||!(e.length>=t+512))throw new Error("need 512 bytes for header");this.path=decString(e,t,100);this.mode=decNumber(e,t+100,8);this.uid=decNumber(e,t+108,8);this.gid=decNumber(e,t+116,8);this.size=decNumber(e,t+124,12);this.mtime=decDate(e,t+136,12);this.cksum=decNumber(e,t+148,12);this[a](r);this[a](n,true);this[l]=decString(e,t+156,1);if(this[l]==="")this[l]="0";if(this[l]==="0"&&this.path.substr(-1)==="/")this[l]="5";if(this[l]==="5")this.size=0;this.linkpath=decString(e,t+157,100);if(e.slice(t+257,t+265).toString()==="ustar\x0000"){this.uname=decString(e,t+265,32);this.gname=decString(e,t+297,32);this.devmaj=decNumber(e,t+329,8);this.devmin=decNumber(e,t+337,8);if(e[t+475]!==0){const r=decString(e,t+345,155);this.path=r+"/"+this.path}else{const r=decString(e,t+345,130);if(r)this.path=r+"/"+this.path;this.atime=decDate(e,t+476,12);this.ctime=decDate(e,t+488,12)}}let i=8*32;for(let r=t;r<t+148;r++){i+=e[r]}for(let r=t+156;r<t+512;r++){i+=e[r]}this.cksumValid=i===this.cksum;if(this.cksum===null&&i===8*32)this.nullBlock=true}[a](e,t){for(let r in e){if(e[r]!==null&&e[r]!==undefined&&!(t&&r==="path"))this[r]=e[r]}}encode(e,t){if(!e){e=this.block=Buffer.alloc(512);t=0}if(!t)t=0;if(!(e.length>=t+512))throw new Error("need 512 bytes for header");const r=this.ctime||this.atime?130:155;const n=splitPrefix(this.path||"",r);const i=n[0];const s=n[1];this.needPax=n[2];this.needPax=encString(e,t,100,i)||this.needPax;this.needPax=encNumber(e,t+100,8,this.mode)||this.needPax;this.needPax=encNumber(e,t+108,8,this.uid)||this.needPax;this.needPax=encNumber(e,t+116,8,this.gid)||this.needPax;this.needPax=encNumber(e,t+124,12,this.size)||this.needPax;this.needPax=encDate(e,t+136,12,this.mtime)||this.needPax;e[t+156]=this[l].charCodeAt(0);this.needPax=encString(e,t+157,100,this.linkpath)||this.needPax;e.write("ustar\x0000",t+257,8);this.needPax=encString(e,t+265,32,this.uname)||this.needPax;this.needPax=encString(e,t+297,32,this.gname)||this.needPax;this.needPax=encNumber(e,t+329,8,this.devmaj)||this.needPax;this.needPax=encNumber(e,t+337,8,this.devmin)||this.needPax;this.needPax=encString(e,t+345,r,s)||this.needPax;if(e[t+475]!==0)this.needPax=encString(e,t+345,155,s)||this.needPax;else{this.needPax=encString(e,t+345,130,s)||this.needPax;this.needPax=encDate(e,t+476,12,this.atime)||this.needPax;this.needPax=encDate(e,t+488,12,this.ctime)||this.needPax}let a=8*32;for(let r=t;r<t+148;r++){a+=e[r]}for(let r=t+156;r<t+512;r++){a+=e[r]}this.cksum=a;encNumber(e,t+148,8,this.cksum);this.cksumValid=true;return this.needPax}set(e){for(let t in e){if(e[t]!==null&&e[t]!==undefined)this[t]=e[t]}}get type(){return n.name.get(this[l])||this[l]}get typeKey(){return this[l]}set type(e){if(n.code.has(e))this[l]=n.code.get(e);else this[l]=e}}const splitPrefix=(e,t)=>{const r=100;let n=e;let s="";let a;const l=i.parse(e).root||".";if(Buffer.byteLength(n)<r)a=[n,s,false];else{s=i.dirname(n);n=i.basename(n);do{if(Buffer.byteLength(n)<=r&&Buffer.byteLength(s)<=t)a=[n,s,false];else if(Buffer.byteLength(n)>r&&Buffer.byteLength(s)<=t)a=[n.substr(0,r-1),s,true];else{n=i.join(i.basename(s),n);s=i.dirname(s)}}while(s!==l&&!a);if(!a)a=[e.substr(0,r-1),"",true]}return a};const decString=(e,t,r)=>e.slice(t,t+r).toString("utf8").replace(/\0.*/,"");const decDate=(e,t,r)=>numToDate(decNumber(e,t,r));const numToDate=e=>e===null?null:new Date(e*1e3);const decNumber=(e,t,r)=>e[t]&128?s.parse(e.slice(t,t+r)):decSmallNumber(e,t,r);const nanNull=e=>isNaN(e)?null:e;const decSmallNumber=(e,t,r)=>nanNull(parseInt(e.slice(t,t+r).toString("utf8").replace(/\0.*$/,"").trim(),8));const o={12:8589934591,8:2097151};const encNumber=(e,t,r,n)=>n===null?false:n>o[r]||n<0?(s.encode(n,e.slice(t,t+r)),true):(encSmallNumber(e,t,r,n),false);const encSmallNumber=(e,t,r,n)=>e.write(octalString(n,r),t,r,"ascii");const octalString=(e,t)=>padOctal(Math.floor(e).toString(8),t);const padOctal=(e,t)=>(e.length===t-1?e:new Array(t-e.length-1).join("0")+e+" ")+"\0";const encDate=(e,t,r,n)=>n===null?false:encNumber(e,t,r,n.getTime()/1e3);const u=new Array(156).join("\0");const encString=(e,t,r,n)=>n===null?false:(e.write(n+u,t,r,"utf8"),n.length!==Buffer.byteLength(n)||n.length>r);e.exports=Header},5274:e=>{"use strict";const t=new Map([["C","cwd"],["f","file"],["z","gzip"],["P","preservePaths"],["U","unlink"],["strip-components","strip"],["stripComponents","strip"],["keep-newer","newer"],["keepNewer","newer"],["keep-newer-files","newer"],["keepNewerFiles","newer"],["k","keep"],["keep-existing","keep"],["keepExisting","keep"],["m","noMtime"],["no-mtime","noMtime"],["p","preserveOwner"],["L","follow"],["h","follow"]]);const r=e.exports=e=>e?Object.keys(e).map((r=>[t.has(r)?t.get(r):r,e[r]])).reduce(((e,t)=>(e[t[0]]=t[1],e)),Object.create(null)):{}},2370:(e,t)=>{"use strict";const r=t.encode=(e,t)=>{if(!Number.isSafeInteger(e))throw Error("cannot encode number outside of javascript safe integer range");else if(e<0)encodeNegative(e,t);else encodePositive(e,t);return t};const encodePositive=(e,t)=>{t[0]=128;for(var r=t.length;r>1;r--){t[r-1]=e&255;e=Math.floor(e/256)}};const encodeNegative=(e,t)=>{t[0]=255;var r=false;e=e*-1;for(var n=t.length;n>1;n--){var i=e&255;e=Math.floor(e/256);if(r)t[n-1]=onesComp(i);else if(i===0)t[n-1]=0;else{r=true;t[n-1]=twosComp(i)}}};const n=t.parse=e=>{var t=e[e.length-1];var r=e[0];var n;if(r===128)n=pos(e.slice(1,e.length));else if(r===255)n=twos(e);else throw Error("invalid base256 encoding");if(!Number.isSafeInteger(n))throw Error("parsed number outside of javascript safe integer range");return n};const twos=e=>{var t=e.length;var r=0;var n=false;for(var i=t-1;i>-1;i--){var s=e[i];var a;if(n)a=onesComp(s);else if(s===0)a=s;else{n=true;a=twosComp(s)}if(a!==0)r-=a*Math.pow(256,t-i-1)}return r};const pos=e=>{var t=e.length;var r=0;for(var n=t-1;n>-1;n--){var i=e[n];if(i!==0)r+=i*Math.pow(256,t-n-1)}return r};const onesComp=e=>(255^e)&255;const twosComp=e=>(255^e)+1&255},1525:(e,t,r)=>{"use strict";const n=r(5274);const i=r(8917);const s=r(7147);const a=r(7714);const l=r(1017);const o=e.exports=(e,t,r)=>{if(typeof e==="function")r=e,t=null,e={};else if(Array.isArray(e))t=e,e={};if(typeof t==="function")r=t,t=null;if(!t)t=[];else t=Array.from(t);const i=n(e);if(i.sync&&typeof r==="function")throw new TypeError("callback not supported for sync tar functions");if(!i.file&&typeof r==="function")throw new TypeError("callback only supported with file option");if(t.length)filesFilter(i,t);if(!i.noResume)onentryFunction(i);return i.file&&i.sync?listFileSync(i):i.file?listFile(i,r):list(i)};const onentryFunction=e=>{const t=e.onentry;e.onentry=t?e=>{t(e);e.resume()}:e=>e.resume()};const filesFilter=(e,t)=>{const r=new Map(t.map((e=>[e.replace(/\/+$/,""),true])));const n=e.filter;const mapHas=(e,t)=>{const n=t||l.parse(e).root||".";const i=e===n?false:r.has(e)?r.get(e):mapHas(l.dirname(e),n);r.set(e,i);return i};e.filter=n?(e,t)=>n(e,t)&&mapHas(e.replace(/\/+$/,"")):e=>mapHas(e.replace(/\/+$/,""))};const listFileSync=e=>{const t=list(e);const r=e.file;let n=true;let i;try{const a=s.statSync(r);const l=e.maxReadSize||16*1024*1024;if(a.size<l){t.end(s.readFileSync(r))}else{let e=0;const n=Buffer.allocUnsafe(l);i=s.openSync(r,"r");while(e<a.size){let r=s.readSync(i,n,0,l,e);e+=r;t.write(n.slice(0,r))}t.end()}n=false}finally{if(n&&i)try{s.closeSync(i)}catch(e){}}};const listFile=(e,t)=>{const r=new i(e);const n=e.maxReadSize||16*1024*1024;const l=e.file;const o=new Promise(((e,t)=>{r.on("error",t);r.on("end",e);s.stat(l,((e,i)=>{if(e)t(e);else{const e=new a.ReadStream(l,{readSize:n,size:i.size});e.on("error",t);e.pipe(r)}}))}));return t?o.then(t,t):o};const list=e=>new i(e)},9624:(e,t,r)=>{"use strict";const n=r(6186);const i=r(7147);const s=r(1017);const a=r(9051);class SymlinkError extends Error{constructor(e,t){super("Cannot extract through symbolic link");this.path=t;this.symlink=e}get name(){return"SylinkError"}}class CwdError extends Error{constructor(e,t){super(t+": Cannot cd into '"+e+"'");this.path=e;this.code=t}get name(){return"CwdError"}}const l=e.exports=(e,t,r)=>{const l=t.umask;const o=t.mode|448;const u=(o&l)!==0;const c=t.uid;const h=t.gid;const d=typeof c==="number"&&typeof h==="number"&&(c!==t.processUid||h!==t.processGid);const v=t.preserve;const m=t.unlink;const p=t.cache;const _=t.cwd;const done=(t,n)=>{if(t)r(t);else{p.set(e,true);if(n&&d)a(n,c,h,(e=>done(e)));else if(u)i.chmod(e,o,r);else r()}};if(p&&p.get(e)===true)return done();if(e===_)return i.stat(e,((t,r)=>{if(t||!r.isDirectory())t=new CwdError(e,t&&t.code||"ENOTDIR");done(t)}));if(v)return n(e,{mode:o}).then((e=>done(null,e)),done);const g=s.relative(_,e);const w=g.split(/\/|\\/);mkdir_(_,w,o,p,m,_,null,done)};const mkdir_=(e,t,r,n,s,a,l,o)=>{if(!t.length)return o(null,l);const u=t.shift();const c=e+"/"+u;if(n.get(c))return mkdir_(c,t,r,n,s,a,l,o);i.mkdir(c,r,onmkdir(c,t,r,n,s,a,l,o))};const onmkdir=(e,t,r,n,a,l,o,u)=>c=>{if(c){if(c.path&&s.dirname(c.path)===l&&(c.code==="ENOTDIR"||c.code==="ENOENT"))return u(new CwdError(l,c.code));i.lstat(e,((s,h)=>{if(s)u(s);else if(h.isDirectory())mkdir_(e,t,r,n,a,l,o,u);else if(a)i.unlink(e,(s=>{if(s)return u(s);i.mkdir(e,r,onmkdir(e,t,r,n,a,l,o,u))}));else if(h.isSymbolicLink())return u(new SymlinkError(e,e+"/"+t.join("/")));else u(c)}))}else{o=o||e;mkdir_(e,t,r,n,a,l,o,u)}};const o=e.exports.sync=(e,t)=>{const r=t.umask;const l=t.mode|448;const o=(l&r)!==0;const u=t.uid;const c=t.gid;const h=typeof u==="number"&&typeof c==="number"&&(u!==t.processUid||c!==t.processGid);const d=t.preserve;const v=t.unlink;const m=t.cache;const p=t.cwd;const done=t=>{m.set(e,true);if(t&&h)a.sync(t,u,c);if(o)i.chmodSync(e,l)};if(m&&m.get(e)===true)return done();if(e===p){let t=false;let r="ENOTDIR";try{t=i.statSync(e).isDirectory()}catch(e){r=e.code}finally{if(!t)throw new CwdError(e,r)}done();return}if(d)return done(n.sync(e,l));const _=s.relative(p,e);const g=_.split(/\/|\\/);let w=null;for(let e=g.shift(),t=p;e&&(t+="/"+e);e=g.shift()){if(m.get(t))continue;try{i.mkdirSync(t,l);w=w||t;m.set(t,true)}catch(e){if(e.path&&s.dirname(e.path)===p&&(e.code==="ENOTDIR"||e.code==="ENOENT"))return new CwdError(p,e.code);const r=i.lstatSync(t);if(r.isDirectory()){m.set(t,true);continue}else if(v){i.unlinkSync(t);i.mkdirSync(t,l);w=w||t;m.set(t,true);continue}else if(r.isSymbolicLink())return new SymlinkError(t,t+"/"+g.join("/"))}}return done(w)}},8371:e=>{"use strict";e.exports=(e,t,r)=>{e&=4095;if(r){e=(e|384)&~18}if(t){if(e&256)e|=64;if(e&32)e|=8;if(e&4)e|=1}return e}},7900:(e,t,r)=>{"use strict";class PackJob{constructor(e,t){this.path=e||"./";this.absolute=t;this.entry=null;this.stat=null;this.readdir=null;this.pending=false;this.ignore=false;this.piped=false}}const n=r(1077);const i=r(3486);const s=r(8116);const a=r(5450);const l=a.Sync;const o=a.Tar;const u=r(665);const c=Buffer.alloc(1024);const h=Symbol("onStat");const d=Symbol("ended");const v=Symbol("queue");const m=Symbol("current");const p=Symbol("process");const _=Symbol("processing");const g=Symbol("processJob");const w=Symbol("jobs");const x=Symbol("jobDone");const b=Symbol("addFSEntry");const y=Symbol("addTarEntry");const S=Symbol("stat");const N=Symbol("readdir");const E=Symbol("onreaddir");const k=Symbol("pipe");const R=Symbol("entry");const O=Symbol("entryOpt");const C=Symbol("writeEntryClass");const I=Symbol("write");const A=Symbol("ondrain");const F=r(7147);const L=r(1017);const D=r(5899);const T=D(class Pack extends n{constructor(e){super(e);e=e||Object.create(null);this.opt=e;this.file=e.file||"";this.cwd=e.cwd||process.cwd();this.maxReadSize=e.maxReadSize;this.preservePaths=!!e.preservePaths;this.strict=!!e.strict;this.noPax=!!e.noPax;this.prefix=(e.prefix||"").replace(/(\\|\/)+$/,"");this.linkCache=e.linkCache||new Map;this.statCache=e.statCache||new Map;this.readdirCache=e.readdirCache||new Map;this[C]=a;if(typeof e.onwarn==="function")this.on("warn",e.onwarn);this.portable=!!e.portable;this.zip=null;if(e.gzip){if(typeof e.gzip!=="object")e.gzip={};if(this.portable)e.gzip.portable=true;this.zip=new i.Gzip(e.gzip);this.zip.on("data",(e=>super.write(e)));this.zip.on("end",(e=>super.end()));this.zip.on("drain",(e=>this[A]()));this.on("resume",(e=>this.zip.resume()))}else this.on("drain",this[A]);this.noDirRecurse=!!e.noDirRecurse;this.follow=!!e.follow;this.noMtime=!!e.noMtime;this.mtime=e.mtime||null;this.filter=typeof e.filter==="function"?e.filter:e=>true;this[v]=new u;this[w]=0;this.jobs=+e.jobs||4;this[_]=false;this[d]=false}[I](e){return super.write(e)}add(e){this.write(e);return this}end(e){if(e)this.write(e);this[d]=true;this[p]();return this}write(e){if(this[d])throw new Error("write after end");if(e instanceof s)this[y](e);else this[b](e);return this.flowing}[y](e){const t=L.resolve(this.cwd,e.path);if(this.prefix)e.path=this.prefix+"/"+e.path.replace(/^\.(\/+|$)/,"");if(!this.filter(e.path,e))e.resume();else{const r=new PackJob(e.path,t,false);r.entry=new o(e,this[O](r));r.entry.on("end",(e=>this[x](r)));this[w]+=1;this[v].push(r)}this[p]()}[b](e){const t=L.resolve(this.cwd,e);if(this.prefix)e=this.prefix+"/"+e.replace(/^\.(\/+|$)/,"");this[v].push(new PackJob(e,t));this[p]()}[S](e){e.pending=true;this[w]+=1;const t=this.follow?"stat":"lstat";F[t](e.absolute,((t,r)=>{e.pending=false;this[w]-=1;if(t)this.emit("error",t);else this[h](e,r)}))}[h](e,t){this.statCache.set(e.absolute,t);e.stat=t;if(!this.filter(e.path,t))e.ignore=true;this[p]()}[N](e){e.pending=true;this[w]+=1;F.readdir(e.absolute,((t,r)=>{e.pending=false;this[w]-=1;if(t)return this.emit("error",t);this[E](e,r)}))}[E](e,t){this.readdirCache.set(e.absolute,t);e.readdir=t;this[p]()}[p](){if(this[_])return;this[_]=true;for(let e=this[v].head;e!==null&&this[w]<this.jobs;e=e.next){this[g](e.value);if(e.value.ignore){const t=e.next;this[v].removeNode(e);e.next=t}}this[_]=false;if(this[d]&&!this[v].length&&this[w]===0){if(this.zip)this.zip.end(c);else{super.write(c);super.end()}}}get[m](){return this[v]&&this[v].head&&this[v].head.value}[x](e){this[v].shift();this[w]-=1;this[p]()}[g](e){if(e.pending)return;if(e.entry){if(e===this[m]&&!e.piped)this[k](e);return}if(!e.stat){if(this.statCache.has(e.absolute))this[h](e,this.statCache.get(e.absolute));else this[S](e)}if(!e.stat)return;if(e.ignore)return;if(!this.noDirRecurse&&e.stat.isDirectory()&&!e.readdir){if(this.readdirCache.has(e.absolute))this[E](e,this.readdirCache.get(e.absolute));else this[N](e);if(!e.readdir)return}e.entry=this[R](e);if(!e.entry){e.ignore=true;return}if(e===this[m]&&!e.piped)this[k](e)}[O](e){return{onwarn:(e,t,r)=>this.warn(e,t,r),noPax:this.noPax,cwd:this.cwd,absolute:e.absolute,preservePaths:this.preservePaths,maxReadSize:this.maxReadSize,strict:this.strict,portable:this.portable,linkCache:this.linkCache,statCache:this.statCache,noMtime:this.noMtime,mtime:this.mtime}}[R](e){this[w]+=1;try{return new this[C](e.path,this[O](e)).on("end",(()=>this[x](e))).on("error",(e=>this.emit("error",e)))}catch(e){this.emit("error",e)}}[A](){if(this[m]&&this[m].entry)this[m].entry.resume()}[k](e){e.piped=true;if(e.readdir)e.readdir.forEach((t=>{const r=this.prefix?e.path.slice(this.prefix.length+1)||"./":e.path;const n=r==="./"?"":r.replace(/\/*$/,"/");this[b](n+t)}));const t=e.entry;const r=this.zip;if(r)t.on("data",(e=>{if(!r.write(e))t.pause()}));else t.on("data",(e=>{if(!super.write(e))t.pause()}))}pause(){if(this.zip)this.zip.pause();return super.pause()}});class PackSync extends T{constructor(e){super(e);this[C]=l}pause(){}resume(){}[S](e){const t=this.follow?"statSync":"lstatSync";this[h](e,F[t](e.absolute))}[N](e,t){this[E](e,F.readdirSync(e.absolute))}[k](e){const t=e.entry;const r=this.zip;if(e.readdir)e.readdir.forEach((t=>{const r=this.prefix?e.path.slice(this.prefix.length+1)||"./":e.path;const n=r==="./"?"":r.replace(/\/*$/,"/");this[b](n+t)}));if(r)t.on("data",(e=>{r.write(e)}));else t.on("data",(e=>{super[I](e)}))}}T.Sync=PackSync;e.exports=T},8917:(e,t,r)=>{"use strict";const n=r(5899);const i=r(1017);const s=r(6043);const a=r(2361);const l=r(665);const o=1024*1024;const u=r(8116);const c=r(7996);const h=r(3486);const d=Buffer.from([31,139]);const v=Symbol("state");const m=Symbol("writeEntry");const p=Symbol("readEntry");const _=Symbol("nextEntry");const g=Symbol("processEntry");const w=Symbol("extendedHeader");const x=Symbol("globalExtendedHeader");const b=Symbol("meta");const y=Symbol("emitMeta");const S=Symbol("buffer");const N=Symbol("queue");const E=Symbol("ended");const k=Symbol("emittedEnd");const R=Symbol("emit");const O=Symbol("unzip");const C=Symbol("consumeChunk");const I=Symbol("consumeChunkSub");const A=Symbol("consumeBody");const F=Symbol("consumeMeta");const L=Symbol("consumeHeader");const D=Symbol("consuming");const T=Symbol("bufferConcat");const B=Symbol("maybeEnd");const P=Symbol("writing");const M=Symbol("aborted");const z=Symbol("onDone");const U=Symbol("sawValidEntry");const H=Symbol("sawNullBlock");const j=Symbol("sawEOF");const noop=e=>true;e.exports=n(class Parser extends a{constructor(e){e=e||{};super(e);this.file=e.file||"";this[U]=null;this.on(z,(e=>{if(this[v]==="begin"||this[U]===false){this.warn("TAR_BAD_ARCHIVE","Unrecognized archive format")}}));if(e.ondone)this.on(z,e.ondone);else this.on(z,(e=>{this.emit("prefinish");this.emit("finish");this.emit("end");this.emit("close")}));this.strict=!!e.strict;this.maxMetaEntrySize=e.maxMetaEntrySize||o;this.filter=typeof e.filter==="function"?e.filter:noop;this.writable=true;this.readable=false;this[N]=new l;this[S]=null;this[p]=null;this[m]=null;this[v]="begin";this[b]="";this[w]=null;this[x]=null;this[E]=false;this[O]=null;this[M]=false;this[H]=false;this[j]=false;if(typeof e.onwarn==="function")this.on("warn",e.onwarn);if(typeof e.onentry==="function")this.on("entry",e.onentry)}[L](e,t){if(this[U]===null)this[U]=false;let r;try{r=new s(e,t,this[w],this[x])}catch(e){return this.warn("TAR_ENTRY_INVALID",e)}if(r.nullBlock){if(this[H]){this[j]=true;if(this[v]==="begin")this[v]="header";this[R]("eof")}else{this[H]=true;this[R]("nullBlock")}}else{this[H]=false;if(!r.cksumValid)this.warn("TAR_ENTRY_INVALID","checksum failure",{header:r});else if(!r.path)this.warn("TAR_ENTRY_INVALID","path is required",{header:r});else{const e=r.type;if(/^(Symbolic)?Link$/.test(e)&&!r.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath required",{header:r});else if(!/^(Symbolic)?Link$/.test(e)&&r.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath forbidden",{header:r});else{const e=this[m]=new u(r,this[w],this[x]);if(!this[U]){if(e.remain){const onend=()=>{if(!e.invalid)this[U]=true};e.on("end",onend)}else{this[U]=true}}if(e.meta){if(e.size>this.maxMetaEntrySize){e.ignore=true;this[R]("ignoredEntry",e);this[v]="ignore";e.resume()}else if(e.size>0){this[b]="";e.on("data",(e=>this[b]+=e));this[v]="meta"}}else{this[w]=null;e.ignore=e.ignore||!this.filter(e.path,e);if(e.ignore){this[R]("ignoredEntry",e);this[v]=e.remain?"ignore":"header";e.resume()}else{if(e.remain)this[v]="body";else{this[v]="header";e.end()}if(!this[p]){this[N].push(e);this[_]()}else this[N].push(e)}}}}}}[g](e){let t=true;if(!e){this[p]=null;t=false}else if(Array.isArray(e))this.emit.apply(this,e);else{this[p]=e;this.emit("entry",e);if(!e.emittedEnd){e.on("end",(e=>this[_]()));t=false}}return t}[_](){do{}while(this[g](this[N].shift()));if(!this[N].length){const e=this[p];const t=!e||e.flowing||e.size===e.remain;if(t){if(!this[P])this.emit("drain")}else e.once("drain",(e=>this.emit("drain")))}}[A](e,t){const r=this[m];const n=r.blockRemain;const i=n>=e.length&&t===0?e:e.slice(t,t+n);r.write(i);if(!r.blockRemain){this[v]="header";this[m]=null;r.end()}return i.length}[F](e,t){const r=this[m];const n=this[A](e,t);if(!this[m])this[y](r);return n}[R](e,t,r){if(!this[N].length&&!this[p])this.emit(e,t,r);else this[N].push([e,t,r])}[y](e){this[R]("meta",this[b]);switch(e.type){case"ExtendedHeader":case"OldExtendedHeader":this[w]=c.parse(this[b],this[w],false);break;case"GlobalExtendedHeader":this[x]=c.parse(this[b],this[x],true);break;case"NextFileHasLongPath":case"OldGnuLongPath":this[w]=this[w]||Object.create(null);this[w].path=this[b].replace(/\0.*/,"");break;case"NextFileHasLongLinkpath":this[w]=this[w]||Object.create(null);this[w].linkpath=this[b].replace(/\0.*/,"");break;default:throw new Error("unknown meta: "+e.type)}}abort(e){this[M]=true;this.emit("abort",e);this.warn("TAR_ABORT",e,{recoverable:false})}write(e){if(this[M])return;if(this[O]===null&&e){if(this[S]){e=Buffer.concat([this[S],e]);this[S]=null}if(e.length<d.length){this[S]=e;return true}for(let t=0;this[O]===null&&t<d.length;t++){if(e[t]!==d[t])this[O]=false}if(this[O]===null){const t=this[E];this[E]=false;this[O]=new h.Unzip;this[O].on("data",(e=>this[C](e)));this[O].on("error",(e=>this.abort(e)));this[O].on("end",(e=>{this[E]=true;this[C]()}));this[P]=true;const r=this[O][t?"end":"write"](e);this[P]=false;return r}}this[P]=true;if(this[O])this[O].write(e);else this[C](e);this[P]=false;const t=this[N].length?false:this[p]?this[p].flowing:true;if(!t&&!this[N].length)this[p].once("drain",(e=>this.emit("drain")));return t}[T](e){if(e&&!this[M])this[S]=this[S]?Buffer.concat([this[S],e]):e}[B](){if(this[E]&&!this[k]&&!this[M]&&!this[D]){this[k]=true;const e=this[m];if(e&&e.blockRemain){const t=this[S]?this[S].length:0;this.warn("TAR_BAD_ARCHIVE",`Truncated input (needed ${e.blockRemain} more bytes, only ${t} available)`,{entry:e});if(this[S])e.write(this[S]);e.end()}this[R](z)}}[C](e){if(this[D])this[T](e);else if(!e&&!this[S])this[B]();else{this[D]=true;if(this[S]){this[T](e);const t=this[S];this[S]=null;this[I](t)}else{this[I](e)}while(this[S]&&this[S].length>=512&&!this[M]&&!this[j]){const e=this[S];this[S]=null;this[I](e)}this[D]=false}if(!this[S]||this[E])this[B]()}[I](e){let t=0;let r=e.length;while(t+512<=r&&!this[M]&&!this[j]){switch(this[v]){case"begin":case"header":this[L](e,t);t+=512;break;case"ignore":case"body":t+=this[A](e,t);break;case"meta":t+=this[F](e,t);break;default:throw new Error("invalid state: "+this[v])}}if(t<r){if(this[S])this[S]=Buffer.concat([e.slice(t),this[S]]);else this[S]=e.slice(t)}}end(e){if(!this[M]){if(this[O])this[O].end(e);else{this[E]=true;this.write(e)}}}})},9587:(e,t,r)=>{const n=r(9491);e.exports=()=>{const e=new Map;const t=new Map;const{join:i}=r(1017);const getDirs=e=>i(e).split(/[\\\/]/).slice(0,-1).reduce(((e,t)=>e.length?e.concat(i(e[e.length-1],t)):[t]),[]);const s=new Set;const getQueues=r=>{const n=t.get(r);if(!n)throw new Error("function does not have any path reservations");return{paths:n.paths.map((t=>e.get(t))),dirs:[...n.dirs].map((t=>e.get(t)))}};const check=e=>{const{paths:t,dirs:r}=getQueues(e);return t.every((t=>t[0]===e))&&r.every((t=>t[0]instanceof Set&&t[0].has(e)))};const run=e=>{if(s.has(e)||!check(e))return false;s.add(e);e((()=>clear(e)));return true};const clear=r=>{if(!s.has(r))return false;const{paths:i,dirs:a}=t.get(r);const l=new Set;i.forEach((t=>{const i=e.get(t);n.equal(i[0],r);if(i.length===1)e.delete(t);else{i.shift();if(typeof i[0]==="function")l.add(i[0]);else i[0].forEach((e=>l.add(e)))}}));a.forEach((t=>{const i=e.get(t);n(i[0]instanceof Set);if(i[0].size===1&&i.length===1){e.delete(t)}else if(i[0].size===1){i.shift();l.add(i[0])}else i[0].delete(r)}));s.delete(r);l.forEach((e=>run(e)));return true};const reserve=(r,n)=>{const i=new Set(r.map((e=>getDirs(e))).reduce(((e,t)=>e.concat(t))));t.set(n,{dirs:i,paths:r});r.forEach((t=>{const r=e.get(t);if(!r)e.set(t,[n]);else r.push(n)}));i.forEach((t=>{const r=e.get(t);if(!r)e.set(t,[new Set([n])]);else if(r[r.length-1]instanceof Set)r[r.length-1].add(n);else r.push(new Set([n]))}));return run(n)};return{check:check,reserve:reserve}}},7996:(e,t,r)=>{"use strict";const n=r(6043);const i=r(1017);class Pax{constructor(e,t){this.atime=e.atime||null;this.charset=e.charset||null;this.comment=e.comment||null;this.ctime=e.ctime||null;this.gid=e.gid||null;this.gname=e.gname||null;this.linkpath=e.linkpath||null;this.mtime=e.mtime||null;this.path=e.path||null;this.size=e.size||null;this.uid=e.uid||null;this.uname=e.uname||null;this.dev=e.dev||null;this.ino=e.ino||null;this.nlink=e.nlink||null;this.global=t||false}encode(){const e=this.encodeBody();if(e==="")return null;const t=Buffer.byteLength(e);const r=512*Math.ceil(1+t/512);const s=Buffer.allocUnsafe(r);for(let e=0;e<512;e++){s[e]=0}new n({path:("PaxHeader/"+i.basename(this.path)).slice(0,99),mode:this.mode||420,uid:this.uid||null,gid:this.gid||null,size:t,mtime:this.mtime||null,type:this.global?"GlobalExtendedHeader":"ExtendedHeader",linkpath:"",uname:this.uname||"",gname:this.gname||"",devmaj:0,devmin:0,atime:this.atime||null,ctime:this.ctime||null}).encode(s);s.write(e,512,t,"utf8");for(let e=t+512;e<s.length;e++){s[e]=0}return s}encodeBody(){return this.encodeField("path")+this.encodeField("ctime")+this.encodeField("atime")+this.encodeField("dev")+this.encodeField("ino")+this.encodeField("nlink")+this.encodeField("charset")+this.encodeField("comment")+this.encodeField("gid")+this.encodeField("gname")+this.encodeField("linkpath")+this.encodeField("mtime")+this.encodeField("size")+this.encodeField("uid")+this.encodeField("uname")}encodeField(e){if(this[e]===null||this[e]===undefined)return"";const t=this[e]instanceof Date?this[e].getTime()/1e3:this[e];const r=" "+(e==="dev"||e==="ino"||e==="nlink"?"SCHILY.":"")+e+"="+t+"\n";const n=Buffer.byteLength(r);let i=Math.floor(Math.log(n)/Math.log(10))+1;if(n+i>=Math.pow(10,i))i+=1;const s=i+n;return s+r}}Pax.parse=(e,t,r)=>new Pax(merge(parseKV(e),t),r);const merge=(e,t)=>t?Object.keys(e).reduce(((t,r)=>(t[r]=e[r],t)),t):e;const parseKV=e=>e.replace(/\n$/,"").split("\n").reduce(parseKVLine,Object.create(null));const parseKVLine=(e,t)=>{const r=parseInt(t,10);if(r!==Buffer.byteLength(t)+1)return e;t=t.substr((r+" ").length);const n=t.split("=");const i=n.shift().replace(/^SCHILY\.(dev|ino|nlink)/,"$1");if(!i)return e;const s=n.join("=");e[i]=/^([A-Z]+\.)?([mac]|birth|creation)time$/.test(i)?new Date(s*1e3):/^[0-9]+$/.test(s)?+s:s;return e};e.exports=Pax},8116:(e,t,r)=>{"use strict";const n=r(4173);const i=r(1077);const s=Symbol("slurp");e.exports=class ReadEntry extends i{constructor(e,t,r){super();this.pause();this.extended=t;this.globalExtended=r;this.header=e;this.startBlockSize=512*Math.ceil(e.size/512);this.blockRemain=this.startBlockSize;this.remain=e.size;this.type=e.type;this.meta=false;this.ignore=false;switch(this.type){case"File":case"OldFile":case"Link":case"SymbolicLink":case"CharacterDevice":case"BlockDevice":case"Directory":case"FIFO":case"ContiguousFile":case"GNUDumpDir":break;case"NextFileHasLongLinkpath":case"NextFileHasLongPath":case"OldGnuLongPath":case"GlobalExtendedHeader":case"ExtendedHeader":case"OldExtendedHeader":this.meta=true;break;default:this.ignore=true}this.path=e.path;this.mode=e.mode;if(this.mode)this.mode=this.mode&4095;this.uid=e.uid;this.gid=e.gid;this.uname=e.uname;this.gname=e.gname;this.size=e.size;this.mtime=e.mtime;this.atime=e.atime;this.ctime=e.ctime;this.linkpath=e.linkpath;this.uname=e.uname;this.gname=e.gname;if(t)this[s](t);if(r)this[s](r,true)}write(e){const t=e.length;if(t>this.blockRemain)throw new Error("writing more to entry than is appropriate");const r=this.remain;const n=this.blockRemain;this.remain=Math.max(0,r-t);this.blockRemain=Math.max(0,n-t);if(this.ignore)return true;if(r>=t)return super.write(e);return super.write(e.slice(0,r))}[s](e,t){for(let r in e){if(e[r]!==null&&e[r]!==undefined&&!(t&&r==="path"))this[r]=e[r]}}}},5923:(e,t,r)=>{"use strict";const n=r(5274);const i=r(7900);const s=r(8917);const a=r(7147);const l=r(7714);const o=r(1525);const u=r(1017);const c=r(6043);const h=e.exports=(e,t,r)=>{const i=n(e);if(!i.file)throw new TypeError("file is required");if(i.gzip)throw new TypeError("cannot append to compressed archives");if(!t||!Array.isArray(t)||!t.length)throw new TypeError("no files or directories specified");t=Array.from(t);return i.sync?replaceSync(i,t):replace(i,t,r)};const replaceSync=(e,t)=>{const r=new i.Sync(e);let n=true;let s;let l;try{try{s=a.openSync(e.file,"r+")}catch(t){if(t.code==="ENOENT")s=a.openSync(e.file,"w+");else throw t}const i=a.fstatSync(s);const o=Buffer.alloc(512);e:for(l=0;l<i.size;l+=512){for(let e=0,t=0;e<512;e+=t){t=a.readSync(s,o,e,o.length-e,l+e);if(l===0&&o[0]===31&&o[1]===139)throw new Error("cannot append to compressed archives");if(!t)break e}let t=new c(o);if(!t.cksumValid)break;let r=512*Math.ceil(t.size/512);if(l+r+512>i.size)break;l+=r;if(e.mtimeCache)e.mtimeCache.set(t.path,t.mtime)}n=false;streamSync(e,r,l,s,t)}finally{if(n)try{a.closeSync(s)}catch(e){}}};const streamSync=(e,t,r,n,i)=>{const s=new l.WriteStreamSync(e.file,{fd:n,start:r});t.pipe(s);addFilesSync(t,i)};const replace=(e,t,r)=>{t=Array.from(t);const n=new i(e);const getPos=(t,r,n)=>{const cb=(e,r)=>{if(e)a.close(t,(t=>n(e)));else n(null,r)};let i=0;if(r===0)return cb(null,0);let s=0;const l=Buffer.alloc(512);const onread=(n,o)=>{if(n)return cb(n);s+=o;if(s<512&&o)return a.read(t,l,s,l.length-s,i+s,onread);if(i===0&&l[0]===31&&l[1]===139)return cb(new Error("cannot append to compressed archives"));if(s<512)return cb(null,i);const u=new c(l);if(!u.cksumValid)return cb(null,i);const h=512*Math.ceil(u.size/512);if(i+h+512>r)return cb(null,i);i+=h+512;if(i>=r)return cb(null,i);if(e.mtimeCache)e.mtimeCache.set(u.path,u.mtime);s=0;a.read(t,l,0,512,i,onread)};a.read(t,l,0,512,i,onread)};const s=new Promise(((r,i)=>{n.on("error",i);let s="r+";const onopen=(o,u)=>{if(o&&o.code==="ENOENT"&&s==="r+"){s="w+";return a.open(e.file,s,onopen)}if(o)return i(o);a.fstat(u,((s,a)=>{if(s)return i(s);getPos(u,a.size,((s,a)=>{if(s)return i(s);const o=new l.WriteStream(e.file,{fd:u,start:a});n.pipe(o);o.on("error",i);o.on("close",r);addFilesAsync(n,t)}))}))};a.open(e.file,s,onopen)}));return r?s.then(r,r):s};const addFilesSync=(e,t)=>{t.forEach((t=>{if(t.charAt(0)==="@")o({file:u.resolve(e.cwd,t.substr(1)),sync:true,noResume:true,onentry:t=>e.add(t)});else e.add(t)}));e.end()};const addFilesAsync=(e,t)=>{while(t.length){const r=t.shift();if(r.charAt(0)==="@")return o({file:u.resolve(e.cwd,r.substr(1)),noResume:true,onentry:t=>e.add(t)}).then((r=>addFilesAsync(e,t)));else e.add(r)}e.end()}},4173:(e,t)=>{"use strict";t.name=new Map([["0","File"],["","OldFile"],["1","Link"],["2","SymbolicLink"],["3","CharacterDevice"],["4","BlockDevice"],["5","Directory"],["6","FIFO"],["7","ContiguousFile"],["g","GlobalExtendedHeader"],["x","ExtendedHeader"],["A","SolarisACL"],["D","GNUDumpDir"],["I","Inode"],["K","NextFileHasLongLinkpath"],["L","NextFileHasLongPath"],["M","ContinuationFile"],["N","OldGnuLongPath"],["S","SparseFile"],["V","TapeVolumeHeader"],["X","OldExtendedHeader"]]);t.code=new Map(Array.from(t.name).map((e=>[e[1],e[0]])))},7628:(e,t,r)=>{"use strict";const n=r(9491);const i=r(2361).EventEmitter;const s=r(8917);const a=r(7147);const l=r(7714);const o=r(1017);const u=r(9624);const c=u.sync;const h=r(4808);const d=r(9587);const v=Symbol("onEntry");const m=Symbol("checkFs");const p=Symbol("checkFs2");const _=Symbol("isReusable");const g=Symbol("makeFs");const w=Symbol("file");const x=Symbol("directory");const b=Symbol("link");const y=Symbol("symlink");const S=Symbol("hardlink");const N=Symbol("unsupported");const E=Symbol("unknown");const k=Symbol("checkPath");const R=Symbol("mkdir");const O=Symbol("onError");const C=Symbol("pending");const I=Symbol("pend");const A=Symbol("unpend");const F=Symbol("ended");const L=Symbol("maybeClose");const D=Symbol("skip");const T=Symbol("doChown");const B=Symbol("uid");const P=Symbol("gid");const M=r(6113);const z=r(1172);const neverCalled=()=>{throw new Error("sync function called cb somehow?!?")};const unlinkFile=(e,t)=>{if(process.platform!=="win32")return a.unlink(e,t);const r=e+".DELETE."+M.randomBytes(16).toString("hex");a.rename(e,r,(e=>{if(e)return t(e);a.unlink(r,t)}))};const unlinkFileSync=e=>{if(process.platform!=="win32")return a.unlinkSync(e);const t=e+".DELETE."+M.randomBytes(16).toString("hex");a.renameSync(e,t);a.unlinkSync(t)};const uint32=(e,t,r)=>e===e>>>0?e:t===t>>>0?t:r;class Unpack extends s{constructor(e){if(!e)e={};e.ondone=e=>{this[F]=true;this[L]()};super(e);this.reservations=d();this.transform=typeof e.transform==="function"?e.transform:null;this.writable=true;this.readable=false;this[C]=0;this[F]=false;this.dirCache=e.dirCache||new Map;if(typeof e.uid==="number"||typeof e.gid==="number"){if(typeof e.uid!=="number"||typeof e.gid!=="number")throw new TypeError("cannot set owner without number uid and gid");if(e.preserveOwner)throw new TypeError("cannot preserve owner in archive and also set owner explicitly");this.uid=e.uid;this.gid=e.gid;this.setOwner=true}else{this.uid=null;this.gid=null;this.setOwner=false}if(e.preserveOwner===undefined&&typeof e.uid!=="number")this.preserveOwner=process.getuid&&process.getuid()===0;else this.preserveOwner=!!e.preserveOwner;this.processUid=(this.preserveOwner||this.setOwner)&&process.getuid?process.getuid():null;this.processGid=(this.preserveOwner||this.setOwner)&&process.getgid?process.getgid():null;this.forceChown=e.forceChown===true;this.win32=!!e.win32||process.platform==="win32";this.newer=!!e.newer;this.keep=!!e.keep;this.noMtime=!!e.noMtime;this.preservePaths=!!e.preservePaths;this.unlink=!!e.unlink;this.cwd=o.resolve(e.cwd||process.cwd());this.strip=+e.strip||0;this.processUmask=process.umask();this.umask=typeof e.umask==="number"?e.umask:this.processUmask;this.dmode=e.dmode||511&~this.umask;this.fmode=e.fmode||438&~this.umask;this.on("entry",(e=>this[v](e)))}warn(e,t,r={}){if(e==="TAR_BAD_ARCHIVE"||e==="TAR_ABORT")r.recoverable=false;return super.warn(e,t,r)}[L](){if(this[F]&&this[C]===0){this.emit("prefinish");this.emit("finish");this.emit("end");this.emit("close")}}[k](e){if(this.strip){const t=e.path.split(/\/|\\/);if(t.length<this.strip)return false;e.path=t.slice(this.strip).join("/");if(e.type==="Link"){const t=e.linkpath.split(/\/|\\/);if(t.length>=this.strip)e.linkpath=t.slice(this.strip).join("/")}}if(!this.preservePaths){const t=e.path;if(t.match(/(^|\/|\\)\.\.(\\|\/|$)/)){this.warn("TAR_ENTRY_ERROR",`path contains '..'`,{entry:e,path:t});return false}if(o.win32.isAbsolute(t)){const r=o.win32.parse(t);e.path=t.substr(r.root.length);const n=r.root;this.warn("TAR_ENTRY_INFO",`stripping ${n} from absolute path`,{entry:e,path:t})}}if(this.win32){const t=o.win32.parse(e.path);e.path=t.root===""?h.encode(e.path):t.root+h.encode(e.path.substr(t.root.length))}if(o.isAbsolute(e.path))e.absolute=e.path;else e.absolute=o.resolve(this.cwd,e.path);return true}[v](e){if(!this[k](e))return e.resume();n.equal(typeof e.absolute,"string");switch(e.type){case"Directory":case"GNUDumpDir":if(e.mode)e.mode=e.mode|448;case"File":case"OldFile":case"ContiguousFile":case"Link":case"SymbolicLink":return this[m](e);case"CharacterDevice":case"BlockDevice":case"FIFO":return this[N](e)}}[O](e,t){if(e.name==="CwdError")this.emit("error",e);else{this.warn("TAR_ENTRY_ERROR",e,{entry:t});this[A]();t.resume()}}[R](e,t,r){u(e,{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:t},r)}[T](e){return this.forceChown||this.preserveOwner&&(typeof e.uid==="number"&&e.uid!==this.processUid||typeof e.gid==="number"&&e.gid!==this.processGid)||(typeof this.uid==="number"&&this.uid!==this.processUid||typeof this.gid==="number"&&this.gid!==this.processGid)}[B](e){return uint32(this.uid,e.uid,this.processUid)}[P](e){return uint32(this.gid,e.gid,this.processGid)}[w](e,t){const r=e.mode&4095||this.fmode;const n=new l.WriteStream(e.absolute,{flags:z(e.size),mode:r,autoClose:false});n.on("error",(t=>this[O](t,e)));let i=1;const done=r=>{if(r)return this[O](r,e);if(--i===0){a.close(n.fd,(r=>{t();r?this[O](r,e):this[A]()}))}};n.on("finish",(t=>{const r=e.absolute;const s=n.fd;if(e.mtime&&!this.noMtime){i++;const t=e.atime||new Date;const n=e.mtime;a.futimes(s,t,n,(e=>e?a.utimes(r,t,n,(t=>done(t&&e))):done()))}if(this[T](e)){i++;const t=this[B](e);const n=this[P](e);a.fchown(s,t,n,(e=>e?a.chown(r,t,n,(t=>done(t&&e))):done()))}done()}));const s=this.transform?this.transform(e)||e:e;if(s!==e){s.on("error",(t=>this[O](t,e)));e.pipe(s)}s.pipe(n)}[x](e,t){const r=e.mode&4095||this.dmode;this[R](e.absolute,r,(r=>{if(r){t();return this[O](r,e)}let n=1;const done=r=>{if(--n===0){t();this[A]();e.resume()}};if(e.mtime&&!this.noMtime){n++;a.utimes(e.absolute,e.atime||new Date,e.mtime,done)}if(this[T](e)){n++;a.chown(e.absolute,this[B](e),this[P](e),done)}done()}))}[N](e){e.unsupported=true;this.warn("TAR_ENTRY_UNSUPPORTED",`unsupported entry type: ${e.type}`,{entry:e});e.resume()}[y](e,t){this[b](e,e.linkpath,"symlink",t)}[S](e,t){this[b](e,o.resolve(this.cwd,e.linkpath),"link",t)}[I](){this[C]++}[A](){this[C]--;this[L]()}[D](e){this[A]();e.resume()}[_](e,t){return e.type==="File"&&!this.unlink&&t.isFile()&&t.nlink<=1&&process.platform!=="win32"}[m](e){this[I]();const t=[e.path];if(e.linkpath)t.push(e.linkpath);this.reservations.reserve(t,(t=>this[p](e,t)))}[p](e,t){this[R](o.dirname(e.absolute),this.dmode,(r=>{if(r){t();return this[O](r,e)}a.lstat(e.absolute,((r,n)=>{if(n&&(this.keep||this.newer&&n.mtime>e.mtime)){this[D](e);t()}else if(r||this[_](e,n)){this[g](null,e,t)}else if(n.isDirectory()){if(e.type==="Directory"){if(!e.mode||(n.mode&4095)===e.mode)this[g](null,e,t);else a.chmod(e.absolute,e.mode,(r=>this[g](r,e,t)))}else a.rmdir(e.absolute,(r=>this[g](r,e,t)))}else unlinkFile(e.absolute,(r=>this[g](r,e,t)))}))}))}[g](e,t,r){if(e)return this[O](e,t);switch(t.type){case"File":case"OldFile":case"ContiguousFile":return this[w](t,r);case"Link":return this[S](t,r);case"SymbolicLink":return this[y](t,r);case"Directory":case"GNUDumpDir":return this[x](t,r)}}[b](e,t,r,n){a[r](t,e.absolute,(t=>{if(t)return this[O](t,e);n();this[A]();e.resume()}))}}class UnpackSync extends Unpack{constructor(e){super(e)}[m](e){const t=this[R](o.dirname(e.absolute),this.dmode,neverCalled);if(t)return this[O](t,e);try{const r=a.lstatSync(e.absolute);if(this.keep||this.newer&&r.mtime>e.mtime)return this[D](e);else if(this[_](e,r))return this[g](null,e,neverCalled);else{try{if(r.isDirectory()){if(e.type==="Directory"){if(e.mode&&(r.mode&4095)!==e.mode)a.chmodSync(e.absolute,e.mode)}else a.rmdirSync(e.absolute)}else unlinkFileSync(e.absolute);return this[g](null,e,neverCalled)}catch(t){return this[O](t,e)}}}catch(t){return this[g](null,e,neverCalled)}}[w](e,t){const r=e.mode&4095||this.fmode;const oner=t=>{let r;try{a.closeSync(i)}catch(e){r=e}if(t||r)this[O](t||r,e)};let n;let i;try{i=a.openSync(e.absolute,z(e.size),r)}catch(e){return oner(e)}const s=this.transform?this.transform(e)||e:e;if(s!==e){s.on("error",(t=>this[O](t,e)));e.pipe(s)}s.on("data",(e=>{try{a.writeSync(i,e,0,e.length)}catch(e){oner(e)}}));s.on("end",(t=>{let r=null;if(e.mtime&&!this.noMtime){const t=e.atime||new Date;const n=e.mtime;try{a.futimesSync(i,t,n)}catch(i){try{a.utimesSync(e.absolute,t,n)}catch(e){r=i}}}if(this[T](e)){const t=this[B](e);const n=this[P](e);try{a.fchownSync(i,t,n)}catch(i){try{a.chownSync(e.absolute,t,n)}catch(e){r=r||i}}}oner(r)}))}[x](e,t){const r=e.mode&4095||this.dmode;const n=this[R](e.absolute,r);if(n)return this[O](n,e);if(e.mtime&&!this.noMtime){try{a.utimesSync(e.absolute,e.atime||new Date,e.mtime)}catch(n){}}if(this[T](e)){try{a.chownSync(e.absolute,this[B](e),this[P](e))}catch(n){}}e.resume()}[R](e,t){try{return u.sync(e,{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:t})}catch(e){return e}}[b](e,t,r,n){try{a[r+"Sync"](t,e.absolute);e.resume()}catch(t){return this[O](t,e)}}}Unpack.Sync=UnpackSync;e.exports=Unpack},4404:(e,t,r)=>{"use strict";const n=r(5274);const i=r(5923);const s=e.exports=(e,t,r)=>{const s=n(e);if(!s.file)throw new TypeError("file is required");if(s.gzip)throw new TypeError("cannot append to compressed archives");if(!t||!Array.isArray(t)||!t.length)throw new TypeError("no files or directories specified");t=Array.from(t);mtimeFilter(s);return i(s,t,r)};const mtimeFilter=e=>{const t=e.filter;if(!e.mtimeCache)e.mtimeCache=new Map;e.filter=t?(r,n)=>t(r,n)&&!(e.mtimeCache.get(r)>n.mtime):(t,r)=>!(e.mtimeCache.get(t)>r.mtime)}},5899:e=>{"use strict";e.exports=e=>class extends e{warn(e,t,r={}){if(this.file)r.file=this.file;if(this.cwd)r.cwd=this.cwd;r.code=t instanceof Error&&t.code||e;r.tarCode=e;if(!this.strict&&r.recoverable!==false){if(t instanceof Error){r=Object.assign(t,r);t=t.message}this.emit("warn",r.tarCode,t,r)}else if(t instanceof Error){this.emit("error",Object.assign(t,r))}else this.emit("error",Object.assign(new Error(`${e}: ${t}`),r))}}},4808:e=>{"use strict";const t=["|","<",">","?",":"];const r=t.map((e=>String.fromCharCode(61440+e.charCodeAt(0))));const n=new Map(t.map(((e,t)=>[e,r[t]])));const i=new Map(r.map(((e,r)=>[e,t[r]])));e.exports={encode:e=>t.reduce(((e,t)=>e.split(t).join(n.get(t))),e),decode:e=>r.reduce(((e,t)=>e.split(t).join(i.get(t))),e)}},5450:(e,t,r)=>{"use strict";const n=r(1077);const i=r(7996);const s=r(6043);const a=r(8116);const l=r(7147);const o=r(1017);const u=r(4173);const c=16*1024*1024;const h=Symbol("process");const d=Symbol("file");const v=Symbol("directory");const m=Symbol("symlink");const p=Symbol("hardlink");const _=Symbol("header");const g=Symbol("read");const w=Symbol("lstat");const x=Symbol("onlstat");const b=Symbol("onread");const y=Symbol("onreadlink");const S=Symbol("openfile");const N=Symbol("onopenfile");const E=Symbol("close");const k=Symbol("mode");const R=r(5899);const O=r(4808);const C=r(8371);const I=R(class WriteEntry extends n{constructor(e,t){t=t||{};super(t);if(typeof e!=="string")throw new TypeError("path is required");this.path=e;this.portable=!!t.portable;this.myuid=process.getuid&&process.getuid();this.myuser=process.env.USER||"";this.maxReadSize=t.maxReadSize||c;this.linkCache=t.linkCache||new Map;this.statCache=t.statCache||new Map;this.preservePaths=!!t.preservePaths;this.cwd=t.cwd||process.cwd();this.strict=!!t.strict;this.noPax=!!t.noPax;this.noMtime=!!t.noMtime;this.mtime=t.mtime||null;if(typeof t.onwarn==="function")this.on("warn",t.onwarn);let r=false;if(!this.preservePaths&&o.win32.isAbsolute(e)){const t=o.win32.parse(e);this.path=e.substr(t.root.length);r=t.root}this.win32=!!t.win32||process.platform==="win32";if(this.win32){this.path=O.decode(this.path.replace(/\\/g,"/"));e=e.replace(/\\/g,"/")}this.absolute=t.absolute||o.resolve(this.cwd,e);if(this.path==="")this.path="./";if(r){this.warn("TAR_ENTRY_INFO",`stripping ${r} from absolute path`,{entry:this,path:r+this.path})}if(this.statCache.has(this.absolute))this[x](this.statCache.get(this.absolute));else this[w]()}[w](){l.lstat(this.absolute,((e,t)=>{if(e)return this.emit("error",e);this[x](t)}))}[x](e){this.statCache.set(this.absolute,e);this.stat=e;if(!e.isFile())e.size=0;this.type=getType(e);this.emit("stat",e);this[h]()}[h](){switch(this.type){case"File":return this[d]();case"Directory":return this[v]();case"SymbolicLink":return this[m]();default:return this.end()}}[k](e){return C(e,this.type==="Directory",this.portable)}[_](){if(this.type==="Directory"&&this.portable)this.noMtime=true;this.header=new s({path:this.path,linkpath:this.linkpath,mode:this[k](this.stat.mode),uid:this.portable?null:this.stat.uid,gid:this.portable?null:this.stat.gid,size:this.stat.size,mtime:this.noMtime?null:this.mtime||this.stat.mtime,type:this.type,uname:this.portable?null:this.stat.uid===this.myuid?this.myuser:"",atime:this.portable?null:this.stat.atime,ctime:this.portable?null:this.stat.ctime});if(this.header.encode()&&!this.noPax)this.write(new i({atime:this.portable?null:this.header.atime,ctime:this.portable?null:this.header.ctime,gid:this.portable?null:this.header.gid,mtime:this.noMtime?null:this.mtime||this.header.mtime,path:this.path,linkpath:this.linkpath,size:this.header.size,uid:this.portable?null:this.header.uid,uname:this.portable?null:this.header.uname,dev:this.portable?null:this.stat.dev,ino:this.portable?null:this.stat.ino,nlink:this.portable?null:this.stat.nlink}).encode());this.write(this.header.block)}[v](){if(this.path.substr(-1)!=="/")this.path+="/";this.stat.size=0;this[_]();this.end()}[m](){l.readlink(this.absolute,((e,t)=>{if(e)return this.emit("error",e);this[y](t)}))}[y](e){this.linkpath=e.replace(/\\/g,"/");this[_]();this.end()}[p](e){this.type="Link";this.linkpath=o.relative(this.cwd,e).replace(/\\/g,"/");this.stat.size=0;this[_]();this.end()}[d](){if(this.stat.nlink>1){const e=this.stat.dev+":"+this.stat.ino;if(this.linkCache.has(e)){const t=this.linkCache.get(e);if(t.indexOf(this.cwd)===0)return this[p](t)}this.linkCache.set(e,this.absolute)}this[_]();if(this.stat.size===0)return this.end();this[S]()}[S](){l.open(this.absolute,"r",((e,t)=>{if(e)return this.emit("error",e);this[N](t)}))}[N](e){const t=512*Math.ceil(this.stat.size/512);const r=Math.min(t,this.maxReadSize);const n=Buffer.allocUnsafe(r);this[g](e,n,0,n.length,0,this.stat.size,t)}[g](e,t,r,n,i,s,a){l.read(e,t,r,n,i,((l,o)=>{if(l){return this[E](e,(()=>this.emit("error",l)))}this[b](e,t,r,n,i,s,a,o)}))}[E](e,t){l.close(e,t)}[b](e,t,r,n,i,s,a,l){if(l<=0&&s>0){const t=new Error("encountered unexpected EOF");t.path=this.absolute;t.syscall="read";t.code="EOF";return this[E](e,(()=>this.emit("error",t)))}if(l>s){const t=new Error("did not encounter expected EOF");t.path=this.absolute;t.syscall="read";t.code="EOF";return this[E](e,(()=>this.emit("error",t)))}if(l===s){for(let e=l;e<n&&l<a;e++){t[e+r]=0;l++;s++}}const o=r===0&&l===t.length?t:t.slice(r,r+l);s-=l;a-=l;i+=l;r+=l;this.write(o);if(!s){if(a)this.write(Buffer.alloc(a));return this[E](e,(e=>e?this.emit("error",e):this.end()))}if(r>=n){t=Buffer.allocUnsafe(n);r=0}n=t.length-r;this[g](e,t,r,n,i,s,a)}});class WriteEntrySync extends I{constructor(e,t){super(e,t)}[w](){this[x](l.lstatSync(this.absolute))}[m](){this[y](l.readlinkSync(this.absolute))}[S](){this[N](l.openSync(this.absolute,"r"))}[g](e,t,r,n,i,s,a){let o=true;try{const u=l.readSync(e,t,r,n,i);this[b](e,t,r,n,i,s,a,u);o=false}finally{if(o)try{this[E](e,(()=>{}))}catch(e){}}}[E](e,t){l.closeSync(e);t()}}const A=R(class WriteEntryTar extends n{constructor(e,t){t=t||{};super(t);this.preservePaths=!!t.preservePaths;this.portable=!!t.portable;this.strict=!!t.strict;this.noPax=!!t.noPax;this.noMtime=!!t.noMtime;this.readEntry=e;this.type=e.type;if(this.type==="Directory"&&this.portable)this.noMtime=true;this.path=e.path;this.mode=this[k](e.mode);this.uid=this.portable?null:e.uid;this.gid=this.portable?null:e.gid;this.uname=this.portable?null:e.uname;this.gname=this.portable?null:e.gname;this.size=e.size;this.mtime=this.noMtime?null:t.mtime||e.mtime;this.atime=this.portable?null:e.atime;this.ctime=this.portable?null:e.ctime;this.linkpath=e.linkpath;if(typeof t.onwarn==="function")this.on("warn",t.onwarn);let r=false;if(o.isAbsolute(this.path)&&!this.preservePaths){const e=o.parse(this.path);r=e.root;this.path=this.path.substr(e.root.length)}this.remain=e.size;this.blockRemain=e.startBlockSize;this.header=new s({path:this.path,linkpath:this.linkpath,mode:this.mode,uid:this.portable?null:this.uid,gid:this.portable?null:this.gid,size:this.size,mtime:this.noMtime?null:this.mtime,type:this.type,uname:this.portable?null:this.uname,atime:this.portable?null:this.atime,ctime:this.portable?null:this.ctime});if(r){this.warn("TAR_ENTRY_INFO",`stripping ${r} from absolute path`,{entry:this,path:r+this.path})}if(this.header.encode()&&!this.noPax)super.write(new i({atime:this.portable?null:this.atime,ctime:this.portable?null:this.ctime,gid:this.portable?null:this.gid,mtime:this.noMtime?null:this.mtime,path:this.path,linkpath:this.linkpath,size:this.size,uid:this.portable?null:this.uid,uname:this.portable?null:this.uname,dev:this.portable?null:this.readEntry.dev,ino:this.portable?null:this.readEntry.ino,nlink:this.portable?null:this.readEntry.nlink}).encode());super.write(this.header.block);e.pipe(this)}[k](e){return C(e,this.type==="Directory",this.portable)}write(e){const t=e.length;if(t>this.blockRemain)throw new Error("writing more to entry than is appropriate");this.blockRemain-=t;return super.write(e)}end(){if(this.blockRemain)this.write(Buffer.alloc(this.blockRemain));return super.end()}});I.Sync=WriteEntrySync;I.Tar=A;const getType=e=>e.isFile()?"File":e.isDirectory()?"Directory":e.isSymbolicLink()?"SymbolicLink":"Unsupported";e.exports=I},4091:e=>{"use strict";e.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next){yield e.value}}}},665:(e,t,r)=>{"use strict";e.exports=Yallist;Yallist.Node=Node;Yallist.create=Yallist;function Yallist(e){var t=this;if(!(t instanceof Yallist)){t=new Yallist}t.tail=null;t.head=null;t.length=0;if(e&&typeof e.forEach==="function"){e.forEach((function(e){t.push(e)}))}else if(arguments.length>0){for(var r=0,n=arguments.length;r<n;r++){t.push(arguments[r])}}return t}Yallist.prototype.removeNode=function(e){if(e.list!==this){throw new Error("removing node which does not belong to this list")}var t=e.next;var r=e.prev;if(t){t.prev=r}if(r){r.next=t}if(e===this.head){this.head=t}if(e===this.tail){this.tail=r}e.list.length--;e.next=null;e.prev=null;e.list=null;return t};Yallist.prototype.unshiftNode=function(e){if(e===this.head){return}if(e.list){e.list.removeNode(e)}var t=this.head;e.list=this;e.next=t;if(t){t.prev=e}this.head=e;if(!this.tail){this.tail=e}this.length++};Yallist.prototype.pushNode=function(e){if(e===this.tail){return}if(e.list){e.list.removeNode(e)}var t=this.tail;e.list=this;e.prev=t;if(t){t.next=e}this.tail=e;if(!this.head){this.head=e}this.length++};Yallist.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++){push(this,arguments[e])}return this.length};Yallist.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++){unshift(this,arguments[e])}return this.length};Yallist.prototype.pop=function(){if(!this.tail){return undefined}var e=this.tail.value;this.tail=this.tail.prev;if(this.tail){this.tail.next=null}else{this.head=null}this.length--;return e};Yallist.prototype.shift=function(){if(!this.head){return undefined}var e=this.head.value;this.head=this.head.next;if(this.head){this.head.prev=null}else{this.tail=null}this.length--;return e};Yallist.prototype.forEach=function(e,t){t=t||this;for(var r=this.head,n=0;r!==null;n++){e.call(t,r.value,n,this);r=r.next}};Yallist.prototype.forEachReverse=function(e,t){t=t||this;for(var r=this.tail,n=this.length-1;r!==null;n--){e.call(t,r.value,n,this);r=r.prev}};Yallist.prototype.get=function(e){for(var t=0,r=this.head;r!==null&&t<e;t++){r=r.next}if(t===e&&r!==null){return r.value}};Yallist.prototype.getReverse=function(e){for(var t=0,r=this.tail;r!==null&&t<e;t++){r=r.prev}if(t===e&&r!==null){return r.value}};Yallist.prototype.map=function(e,t){t=t||this;var r=new Yallist;for(var n=this.head;n!==null;){r.push(e.call(t,n.value,this));n=n.next}return r};Yallist.prototype.mapReverse=function(e,t){t=t||this;var r=new Yallist;for(var n=this.tail;n!==null;){r.push(e.call(t,n.value,this));n=n.prev}return r};Yallist.prototype.reduce=function(e,t){var r;var n=this.head;if(arguments.length>1){r=t}else if(this.head){n=this.head.next;r=this.head.value}else{throw new TypeError("Reduce of empty list with no initial value")}for(var i=0;n!==null;i++){r=e(r,n.value,i);n=n.next}return r};Yallist.prototype.reduceReverse=function(e,t){var r;var n=this.tail;if(arguments.length>1){r=t}else if(this.tail){n=this.tail.prev;r=this.tail.value}else{throw new TypeError("Reduce of empty list with no initial value")}for(var i=this.length-1;n!==null;i--){r=e(r,n.value,i);n=n.prev}return r};Yallist.prototype.toArray=function(){var e=new Array(this.length);for(var t=0,r=this.head;r!==null;t++){e[t]=r.value;r=r.next}return e};Yallist.prototype.toArrayReverse=function(){var e=new Array(this.length);for(var t=0,r=this.tail;r!==null;t++){e[t]=r.value;r=r.prev}return e};Yallist.prototype.slice=function(e,t){t=t||this.length;if(t<0){t+=this.length}e=e||0;if(e<0){e+=this.length}var r=new Yallist;if(t<e||t<0){return r}if(e<0){e=0}if(t>this.length){t=this.length}for(var n=0,i=this.head;i!==null&&n<e;n++){i=i.next}for(;i!==null&&n<t;n++,i=i.next){r.push(i.value)}return r};Yallist.prototype.sliceReverse=function(e,t){t=t||this.length;if(t<0){t+=this.length}e=e||0;if(e<0){e+=this.length}var r=new Yallist;if(t<e||t<0){return r}if(e<0){e=0}if(t>this.length){t=this.length}for(var n=this.length,i=this.tail;i!==null&&n>t;n--){i=i.prev}for(;i!==null&&n>e;n--,i=i.prev){r.push(i.value)}return r};Yallist.prototype.splice=function(e,t,...r){if(e>this.length){e=this.length-1}if(e<0){e=this.length+e}for(var n=0,i=this.head;i!==null&&n<e;n++){i=i.next}var s=[];for(var n=0;i&&n<t;n++){s.push(i.value);i=this.removeNode(i)}if(i===null){i=this.tail}if(i!==this.head&&i!==this.tail){i=i.prev}for(var n=0;n<r.length;n++){i=insert(this,i,r[n])}return s};Yallist.prototype.reverse=function(){var e=this.head;var t=this.tail;for(var r=e;r!==null;r=r.prev){var n=r.prev;r.prev=r.next;r.next=n}this.head=t;this.tail=e;return this};function insert(e,t,r){var n=t===e.head?new Node(r,null,t,e):new Node(r,t,t.next,e);if(n.next===null){e.tail=n}if(n.prev===null){e.head=n}e.length++;return n}function push(e,t){e.tail=new Node(t,e.tail,null,e);if(!e.head){e.head=e.tail}e.length++}function unshift(e,t){e.head=new Node(t,null,e.head,e);if(!e.tail){e.tail=e.head}e.length++}function Node(e,t,r,n){if(!(this instanceof Node)){return new Node(e,t,r,n)}this.list=n;this.value=e;if(t){t.next=this;this.prev=t}else{this.prev=null}if(r){r.prev=this;this.next=r}else{this.next=null}}try{r(4091)(Yallist)}catch(e){}},8781:(e,t,r)=>{var n=r(7147);var i=r(9796);var s=r(5010);var a=r(4794);var l=r(3837);var o=r(2361).EventEmitter;var u=r(2781).Transform;var c=r(2781).PassThrough;var h=r(2781).Writable;t.open=open;t.fromFd=fromFd;t.fromBuffer=fromBuffer;t.fromRandomAccessReader=fromRandomAccessReader;t.dosDateTimeToDate=dosDateTimeToDate;t.validateFileName=validateFileName;t.ZipFile=ZipFile;t.Entry=Entry;t.RandomAccessReader=RandomAccessReader;function open(e,t,r){if(typeof t==="function"){r=t;t=null}if(t==null)t={};if(t.autoClose==null)t.autoClose=true;if(t.lazyEntries==null)t.lazyEntries=false;if(t.decodeStrings==null)t.decodeStrings=true;if(t.validateEntrySizes==null)t.validateEntrySizes=true;if(t.strictFileNames==null)t.strictFileNames=false;if(r==null)r=defaultCallback;n.open(e,"r",(function(e,i){if(e)return r(e);fromFd(i,t,(function(e,t){if(e)n.close(i,defaultCallback);r(e,t)}))}))}function fromFd(e,t,r){if(typeof t==="function"){r=t;t=null}if(t==null)t={};if(t.autoClose==null)t.autoClose=false;if(t.lazyEntries==null)t.lazyEntries=false;if(t.decodeStrings==null)t.decodeStrings=true;if(t.validateEntrySizes==null)t.validateEntrySizes=true;if(t.strictFileNames==null)t.strictFileNames=false;if(r==null)r=defaultCallback;n.fstat(e,(function(n,i){if(n)return r(n);var a=s.createFromFd(e,{autoClose:true});fromRandomAccessReader(a,i.size,t,r)}))}function fromBuffer(e,t,r){if(typeof t==="function"){r=t;t=null}if(t==null)t={};t.autoClose=false;if(t.lazyEntries==null)t.lazyEntries=false;if(t.decodeStrings==null)t.decodeStrings=true;if(t.validateEntrySizes==null)t.validateEntrySizes=true;if(t.strictFileNames==null)t.strictFileNames=false;var n=s.createFromBuffer(e,{maxChunkSize:65536});fromRandomAccessReader(n,e.length,t,r)}function fromRandomAccessReader(e,t,r,n){if(typeof r==="function"){n=r;r=null}if(r==null)r={};if(r.autoClose==null)r.autoClose=true;if(r.lazyEntries==null)r.lazyEntries=false;if(r.decodeStrings==null)r.decodeStrings=true;var i=!!r.decodeStrings;if(r.validateEntrySizes==null)r.validateEntrySizes=true;if(r.strictFileNames==null)r.strictFileNames=false;if(n==null)n=defaultCallback;if(typeof t!=="number")throw new Error("expected totalSize parameter to be a number");if(t>Number.MAX_SAFE_INTEGER){throw new Error("zip file too large. only file sizes up to 2^52 are supported due to JavaScript's Number type being an IEEE 754 double.")}e.ref();var s=22;var a=65535;var l=Math.min(s+a,t);var o=v(l);var u=t-o.length;readAndAssertNoEof(e,o,0,l,u,(function(a){if(a)return n(a);for(var c=l-s;c>=0;c-=1){if(o.readUInt32LE(c)!==101010256)continue;var h=o.slice(c);var d=h.readUInt16LE(4);if(d!==0){return n(new Error("multi-disk zip files are not supported: found disk number: "+d))}var m=h.readUInt16LE(10);var p=h.readUInt32LE(16);var _=h.readUInt16LE(20);var g=h.length-s;if(_!==g){return n(new Error("invalid comment length. expected: "+g+". found: "+_))}var w=i?decodeBuffer(h,22,h.length,false):h.slice(22);if(!(m===65535||p===4294967295)){return n(null,new ZipFile(e,p,t,m,w,r.autoClose,r.lazyEntries,i,r.validateEntrySizes,r.strictFileNames))}var x=v(20);var b=u+c-x.length;readAndAssertNoEof(e,x,0,x.length,b,(function(s){if(s)return n(s);if(x.readUInt32LE(0)!==117853008){return n(new Error("invalid zip64 end of central directory locator signature"))}var a=readUInt64LE(x,8);var l=v(56);readAndAssertNoEof(e,l,0,l.length,a,(function(s){if(s)return n(s);if(l.readUInt32LE(0)!==101075792){return n(new Error("invalid zip64 end of central directory record signature"))}m=readUInt64LE(l,32);p=readUInt64LE(l,48);return n(null,new ZipFile(e,p,t,m,w,r.autoClose,r.lazyEntries,i,r.validateEntrySizes,r.strictFileNames))}))}));return}n(new Error("end of central directory record signature not found"))}))}l.inherits(ZipFile,o);function ZipFile(e,t,r,n,i,s,a,l,u,c){var h=this;o.call(h);h.reader=e;h.reader.on("error",(function(e){emitError(h,e)}));h.reader.once("close",(function(){h.emit("close")}));h.readEntryCursor=t;h.fileSize=r;h.entryCount=n;h.comment=i;h.entriesRead=0;h.autoClose=!!s;h.lazyEntries=!!a;h.decodeStrings=!!l;h.validateEntrySizes=!!u;h.strictFileNames=!!c;h.isOpen=true;h.emittedError=false;if(!h.lazyEntries)h._readEntry()}ZipFile.prototype.close=function(){if(!this.isOpen)return;this.isOpen=false;this.reader.unref()};function emitErrorAndAutoClose(e,t){if(e.autoClose)e.close();emitError(e,t)}function emitError(e,t){if(e.emittedError)return;e.emittedError=true;e.emit("error",t)}ZipFile.prototype.readEntry=function(){if(!this.lazyEntries)throw new Error("readEntry() called without lazyEntries:true");this._readEntry()};ZipFile.prototype._readEntry=function(){var e=this;if(e.entryCount===e.entriesRead){setImmediate((function(){if(e.autoClose)e.close();if(e.emittedError)return;e.emit("end")}));return}if(e.emittedError)return;var r=v(46);readAndAssertNoEof(e.reader,r,0,r.length,e.readEntryCursor,(function(n){if(n)return emitErrorAndAutoClose(e,n);if(e.emittedError)return;var i=new Entry;var s=r.readUInt32LE(0);if(s!==33639248)return emitErrorAndAutoClose(e,new Error("invalid central directory file header signature: 0x"+s.toString(16)));i.versionMadeBy=r.readUInt16LE(4);i.versionNeededToExtract=r.readUInt16LE(6);i.generalPurposeBitFlag=r.readUInt16LE(8);i.compressionMethod=r.readUInt16LE(10);i.lastModFileTime=r.readUInt16LE(12);i.lastModFileDate=r.readUInt16LE(14);i.crc32=r.readUInt32LE(16);i.compressedSize=r.readUInt32LE(20);i.uncompressedSize=r.readUInt32LE(24);i.fileNameLength=r.readUInt16LE(28);i.extraFieldLength=r.readUInt16LE(30);i.fileCommentLength=r.readUInt16LE(32);i.internalFileAttributes=r.readUInt16LE(36);i.externalFileAttributes=r.readUInt32LE(38);i.relativeOffsetOfLocalHeader=r.readUInt32LE(42);if(i.generalPurposeBitFlag&64)return emitErrorAndAutoClose(e,new Error("strong encryption is not supported"));e.readEntryCursor+=46;r=v(i.fileNameLength+i.extraFieldLength+i.fileCommentLength);readAndAssertNoEof(e.reader,r,0,r.length,e.readEntryCursor,(function(n){if(n)return emitErrorAndAutoClose(e,n);if(e.emittedError)return;var s=(i.generalPurposeBitFlag&2048)!==0;i.fileName=e.decodeStrings?decodeBuffer(r,0,i.fileNameLength,s):r.slice(0,i.fileNameLength);var l=i.fileNameLength+i.extraFieldLength;var o=r.slice(i.fileNameLength,l);i.extraFields=[];var u=0;while(u<o.length-3){var c=o.readUInt16LE(u+0);var h=o.readUInt16LE(u+2);var d=u+4;var m=d+h;if(m>o.length)return emitErrorAndAutoClose(e,new Error("extra field length exceeds extra field buffer size"));var p=v(h);o.copy(p,0,d,m);i.extraFields.push({id:c,data:p});u=m}i.fileComment=e.decodeStrings?decodeBuffer(r,l,l+i.fileCommentLength,s):r.slice(l,l+i.fileCommentLength);i.comment=i.fileComment;e.readEntryCursor+=r.length;e.entriesRead+=1;if(i.uncompressedSize===4294967295||i.compressedSize===4294967295||i.relativeOffsetOfLocalHeader===4294967295){var _=null;for(var u=0;u<i.extraFields.length;u++){var g=i.extraFields[u];if(g.id===1){_=g.data;break}}if(_==null){return emitErrorAndAutoClose(e,new Error("expected zip64 extended information extra field"))}var w=0;if(i.uncompressedSize===4294967295){if(w+8>_.length){return emitErrorAndAutoClose(e,new Error("zip64 extended information extra field does not include uncompressed size"))}i.uncompressedSize=readUInt64LE(_,w);w+=8}if(i.compressedSize===4294967295){if(w+8>_.length){return emitErrorAndAutoClose(e,new Error("zip64 extended information extra field does not include compressed size"))}i.compressedSize=readUInt64LE(_,w);w+=8}if(i.relativeOffsetOfLocalHeader===4294967295){if(w+8>_.length){return emitErrorAndAutoClose(e,new Error("zip64 extended information extra field does not include relative header offset"))}i.relativeOffsetOfLocalHeader=readUInt64LE(_,w);w+=8}}if(e.decodeStrings){for(var u=0;u<i.extraFields.length;u++){var g=i.extraFields[u];if(g.id===28789){if(g.data.length<6){continue}if(g.data.readUInt8(0)!==1){continue}var x=g.data.readUInt32LE(1);if(a.unsigned(r.slice(0,i.fileNameLength))!==x){continue}i.fileName=decodeBuffer(g.data,5,g.data.length,true);break}}}if(e.validateEntrySizes&&i.compressionMethod===0){var b=i.uncompressedSize;if(i.isEncrypted()){b+=12}if(i.compressedSize!==b){var y="compressed/uncompressed size mismatch for stored file: "+i.compressedSize+" != "+i.uncompressedSize;return emitErrorAndAutoClose(e,new Error(y))}}if(e.decodeStrings){if(!e.strictFileNames){i.fileName=i.fileName.replace(/\\/g,"/")}var S=t.validateFileName(i.fileName);if(S!=null)return emitErrorAndAutoClose(e,new Error(S))}e.emit("entry",i);if(!e.lazyEntries)e._readEntry()}))}))};ZipFile.prototype.openReadStream=function(e,t,r){var n=this;var s=0;var a=e.compressedSize;if(r==null){r=t;t={}}else{if(t.decrypt!=null){if(!e.isEncrypted()){throw new Error("options.decrypt can only be specified for encrypted entries")}if(t.decrypt!==false)throw new Error("invalid options.decrypt value: "+t.decrypt);if(e.isCompressed()){if(t.decompress!==false)throw new Error("entry is encrypted and compressed, and options.decompress !== false")}}if(t.decompress!=null){if(!e.isCompressed()){throw new Error("options.decompress can only be specified for compressed entries")}if(!(t.decompress===false||t.decompress===true)){throw new Error("invalid options.decompress value: "+t.decompress)}}if(t.start!=null||t.end!=null){if(e.isCompressed()&&t.decompress!==false){throw new Error("start/end range not allowed for compressed entry without options.decompress === false")}if(e.isEncrypted()&&t.decrypt!==false){throw new Error("start/end range not allowed for encrypted entry without options.decrypt === false")}}if(t.start!=null){s=t.start;if(s<0)throw new Error("options.start < 0");if(s>e.compressedSize)throw new Error("options.start > entry.compressedSize")}if(t.end!=null){a=t.end;if(a<0)throw new Error("options.end < 0");if(a>e.compressedSize)throw new Error("options.end > entry.compressedSize");if(a<s)throw new Error("options.end < options.start")}}if(!n.isOpen)return r(new Error("closed"));if(e.isEncrypted()){if(t.decrypt!==false)return r(new Error("entry is encrypted, and options.decrypt !== false"))}n.reader.ref();var l=v(30);readAndAssertNoEof(n.reader,l,0,l.length,e.relativeOffsetOfLocalHeader,(function(o){try{if(o)return r(o);var u=l.readUInt32LE(0);if(u!==67324752){return r(new Error("invalid local file header signature: 0x"+u.toString(16)))}var c=l.readUInt16LE(26);var h=l.readUInt16LE(28);var d=e.relativeOffsetOfLocalHeader+l.length+c+h;var v;if(e.compressionMethod===0){v=false}else if(e.compressionMethod===8){v=t.decompress!=null?t.decompress:true}else{return r(new Error("unsupported compression method: "+e.compressionMethod))}var m=d;var p=m+e.compressedSize;if(e.compressedSize!==0){if(p>n.fileSize){return r(new Error("file data overflows file bounds: "+m+" + "+e.compressedSize+" > "+n.fileSize))}}var _=n.reader.createReadStream({start:m+s,end:m+a});var g=_;if(v){var w=false;var x=i.createInflateRaw();_.on("error",(function(e){setImmediate((function(){if(!w)x.emit("error",e)}))}));_.pipe(x);if(n.validateEntrySizes){g=new AssertByteCountStream(e.uncompressedSize);x.on("error",(function(e){setImmediate((function(){if(!w)g.emit("error",e)}))}));x.pipe(g)}else{g=x}g.destroy=function(){w=true;if(x!==g)x.unpipe(g);_.unpipe(x);_.destroy()}}r(null,g)}finally{n.reader.unref()}}))};function Entry(){}Entry.prototype.getLastModDate=function(){return dosDateTimeToDate(this.lastModFileDate,this.lastModFileTime)};Entry.prototype.isEncrypted=function(){return(this.generalPurposeBitFlag&1)!==0};Entry.prototype.isCompressed=function(){return this.compressionMethod===8};function dosDateTimeToDate(e,t){var r=e&31;var n=(e>>5&15)-1;var i=(e>>9&127)+1980;var s=0;var a=(t&31)*2;var l=t>>5&63;var o=t>>11&31;return new Date(i,n,r,o,l,a,s)}function validateFileName(e){if(e.indexOf("\\")!==-1){return"invalid characters in fileName: "+e}if(/^[a-zA-Z]:/.test(e)||/^\//.test(e)){return"absolute path: "+e}if(e.split("/").indexOf("..")!==-1){return"invalid relative path: "+e}return null}function readAndAssertNoEof(e,t,r,n,i,s){if(n===0){return setImmediate((function(){s(null,v(0))}))}e.read(t,r,n,i,(function(e,t){if(e)return s(e);if(t<n){return s(new Error("unexpected EOF"))}s()}))}l.inherits(AssertByteCountStream,u);function AssertByteCountStream(e){u.call(this);this.actualByteCount=0;this.expectedByteCount=e}AssertByteCountStream.prototype._transform=function(e,t,r){this.actualByteCount+=e.length;if(this.actualByteCount>this.expectedByteCount){var n="too many bytes in the stream. expected "+this.expectedByteCount+". got at least "+this.actualByteCount;return r(new Error(n))}r(null,e)};AssertByteCountStream.prototype._flush=function(e){if(this.actualByteCount<this.expectedByteCount){var t="not enough bytes in the stream. expected "+this.expectedByteCount+". got only "+this.actualByteCount;return e(new Error(t))}e()};l.inherits(RandomAccessReader,o);function RandomAccessReader(){o.call(this);this.refCount=0}RandomAccessReader.prototype.ref=function(){this.refCount+=1};RandomAccessReader.prototype.unref=function(){var e=this;e.refCount-=1;if(e.refCount>0)return;if(e.refCount<0)throw new Error("invalid unref");e.close(onCloseDone);function onCloseDone(t){if(t)return e.emit("error",t);e.emit("close")}};RandomAccessReader.prototype.createReadStream=function(e){var t=e.start;var r=e.end;if(t===r){var n=new c;setImmediate((function(){n.end()}));return n}var i=this._readStreamForRange(t,r);var s=false;var a=new RefUnrefFilter(this);i.on("error",(function(e){setImmediate((function(){if(!s)a.emit("error",e)}))}));a.destroy=function(){i.unpipe(a);a.unref();i.destroy()};var l=new AssertByteCountStream(r-t);a.on("error",(function(e){setImmediate((function(){if(!s)l.emit("error",e)}))}));l.destroy=function(){s=true;a.unpipe(l);a.destroy()};return i.pipe(a).pipe(l)};RandomAccessReader.prototype._readStreamForRange=function(e,t){throw new Error("not implemented")};RandomAccessReader.prototype.read=function(e,t,r,n,i){var s=this.createReadStream({start:n,end:n+r});var a=new h;var l=0;a._write=function(r,n,i){r.copy(e,t+l,0,r.length);l+=r.length;i()};a.on("finish",i);s.on("error",(function(e){i(e)}));s.pipe(a)};RandomAccessReader.prototype.close=function(e){setImmediate(e)};l.inherits(RefUnrefFilter,c);function RefUnrefFilter(e){c.call(this);this.context=e;this.context.ref();this.unreffedYet=false}RefUnrefFilter.prototype._flush=function(e){this.unref();e()};RefUnrefFilter.prototype.unref=function(e){if(this.unreffedYet)return;this.unreffedYet=true;this.context.unref()};var d="\0☺☻♥♦♣♠•◘○◙♂♀♪♫☼►◄↕‼¶§▬↨↑↓→←∟↔▲▼ !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~⌂ÇüéâäàåçêëèïîìÄÅÉæÆôöòûùÿÖÜ¢£¥₧ƒáíóúñÑªº¿⌐¬½¼¡«»░▒▓│┤╡╢╖╕╣║╗╝╜╛┐└┴┬├─┼╞╟╚╔╩╦╠═╬╧╨╤╥╙╘╒╓╫╪┘┌█▄▌▐▀αßΓπΣσµτΦΘΩδ∞φε∩≡±≥≤⌠⌡÷≈°∙·√ⁿ²■ ";function decodeBuffer(e,t,r,n){if(n){return e.toString("utf8",t,r)}else{var i="";for(var s=t;s<r;s++){i+=d[e[s]]}return i}}function readUInt64LE(e,t){var r=e.readUInt32LE(t);var n=e.readUInt32LE(t+4);return n*4294967296+r}var v;if(typeof Buffer.allocUnsafe==="function"){v=function(e){return Buffer.allocUnsafe(e)}}else{v=function(e){return new Buffer(e)}}function defaultCallback(e){if(e)throw e}},9491:e=>{"use strict";e.exports=require("assert")},4300:e=>{"use strict";e.exports=require("buffer")},2081:e=>{"use strict";e.exports=require("child_process")},2057:e=>{"use strict";e.exports=require("constants")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},1576:e=>{"use strict";e.exports=require("string_decoder")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")}};var t={};function __nccwpck_require__(r){var n=t[r];if(n!==undefined){return n.exports}var i=t[r]={exports:{}};var s=true;try{e[r].call(i.exports,i,i.exports,__nccwpck_require__);s=false}finally{if(s)delete t[r]}return i.exports}if(typeof __nccwpck_require__!=="undefined")__nccwpck_require__.ab=__dirname+"/";var r=__nccwpck_require__(6732);module.exports=r})();